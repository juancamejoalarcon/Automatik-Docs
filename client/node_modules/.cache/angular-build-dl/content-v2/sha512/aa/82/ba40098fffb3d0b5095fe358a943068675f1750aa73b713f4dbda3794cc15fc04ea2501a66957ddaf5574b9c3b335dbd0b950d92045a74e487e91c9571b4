(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"D5/R":function(e,t,i){"use strict";i.r(t),i.d(t,"CertifiedFormsModule",(function(){return Ze}));var o=i("ofXK"),n=i("M0ag"),r=i("tyNb"),c=i("ey9i"),a=i("fXoL"),s=i("mrSG"),d=i("AytR"),l=i("5eHb"),p=i("3Pt+"),u=i("TYhg");const f=["emailInput"],b=["conditions"],m=["cardField"];function _(e,t){if(1&e&&(a.Qb(0,"div",15),a.Qb(1,"div",16),a.Qb(2,"div",17),a.Mb(3,"img",18),a.Pb(),a.Qb(4,"div",19),a.Qb(5,"h2",20),a.zc(6),a.Pb(),a.Qb(7,"div",21),a.Qb(8,"ul"),a.Qb(9,"li"),a.zc(10,"Descarga inmediata en formatos Word y PDF"),a.Pb(),a.Qb(11,"li"),a.zc(12,"Una vez comprado podr\xe1s retroceder, modificar el formulario y descargar de nuevo"),a.Pb(),a.Pb(),a.Pb(),a.Qb(13,"div",22),a.Qb(14,"span",23),a.zc(15,"Total:"),a.Pb(),a.Qb(16,"span",24),a.zc(17),a.Pb(),a.Pb(),a.Qb(18,"div",25),a.Qb(19,"span"),a.Mb(20,"img",26),a.Pb(),a.Qb(21,"span"),a.Qb(22,"a",27),a.Mb(23,"img",28),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e){const e=a.dc();a.zb(3),a.jc("src",e.form.image,a.tc),a.zb(3),a.Ac(e.form.title),a.zb(11),a.Bc("",e.form.amount," \u20ac")}}function h(e,t){if(1&e){const e=a.Rb();a.Qb(0,"label",37),a.zc(1," \xbfTienes cuenta? "),a.Qb(2,"a",42),a.Zb("click",(function(){return a.rc(e),a.dc(2).goToAuth()})),a.zc(3,"Inicia sesi\xf3n"),a.Pb(),a.Pb()}}function g(e,t){1&e&&a.Mb(0,"br")}function v(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",29),a.Qb(1,"div",30),a.Qb(2,"h1",31),a.zc(3,"Direcci\xf3n de correo para recibir el documento"),a.Pb(),a.Mb(4,"label",32),a.Qb(5,"input",33,34),a.Zb("ngModelChange",(function(t){return a.rc(e),a.dc().email=t})),a.Pb(),a.yc(7,h,4,0,"label",35),a.yc(8,g,1,0,"br",36),a.Qb(9,"div",37),a.Qb(10,"label",38),a.Qb(11,"input",39,40),a.Zb("ngModelChange",(function(t){return a.rc(e),a.dc().conditionsChecked=t})),a.Pb(),a.Qb(13,"span"),a.zc(14,"Acepto las condiciones generales de venta "),a.Qb(15,"a",41),a.zc(16,"(leer las CGV)"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=a.dc();a.zb(5),a.ic("ngModel",e.email),a.zb(2),a.ic("appShowAuthed",!1),a.zb(1),a.ic("appShowAuthed",!0),a.zb(3),a.ic("ngModel",e.conditionsChecked)}}function y(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",47),a.Qb(1,"label",48),a.Qb(2,"div",49),a.Mb(3,"img",50),a.Mb(4,"img",51),a.Pb(),a.Qb(5,"div",52),a.Qb(6,"input",53),a.Zb("change",(function(){return a.rc(e),a.dc(2).onPaymentMethodSelected("card")})),a.Pb(),a.zc(7," con tarjeta "),a.Pb(),a.Pb(),a.Qb(8,"label",54),a.Qb(9,"div",49),a.Mb(10,"img",55),a.Pb(),a.Qb(11,"div",52),a.Qb(12,"input",56),a.Zb("change",(function(){return a.rc(e),a.dc(2).onPaymentMethodSelected("paypal")})),a.Pb(),a.zc(13," con paypal "),a.Pb(),a.Pb(),a.Pb()}}function S(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",57),a.Qb(1,"div",58),a.Qb(2,"label",59),a.zc(3,"Nombre"),a.Pb(),a.Qb(4,"input",60),a.Zb("ngModelChange",(function(t){return a.rc(e),a.dc(2).cardholdersName=t})),a.Pb(),a.Qb(5,"div",61),a.Qb(6,"div"),a.Qb(7,"label",62),a.zc(8,"Fecha v\xe1lida"),a.Pb(),a.Mb(9,"div",63,64),a.Qb(11,"small",65),a.zc(12,"Fecha de expiraci\xf3n inv\xe1lida"),a.Pb(),a.Pb(),a.Qb(13,"div"),a.Qb(14,"label",66),a.zc(15,"CVV / CVC *"),a.Pb(),a.Mb(16,"div",67,68),a.Qb(18,"small",65),a.zc(19,"CVV Inv\xe1lido"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(20,"div",69),a.Qb(21,"label",70),a.zc(22,"N\xfamero de la tarjeta"),a.Pb(),a.Mb(23,"div",71,72),a.Qb(25,"small",65),a.zc(26,"N\xfamero inv\xe1lido"),a.Pb(),a.Qb(27,"span",73),a.zc(28,"* El c\xf3digo CVV o CVC es un grupo de 3 o 4 n\xfameros situado en el reverso de la tarjeta de cr\xe9dito."),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=a.dc(2);a.zb(4),a.ic("ngModel",e.cardholdersName)}}function P(e,t){1&e&&(a.Qb(0,"div",74),a.Mb(1,"div",75),a.Pb())}function w(e,t){if(1&e&&(a.Qb(0,"div",43),a.yc(1,y,14,0,"div",44),a.yc(2,S,29,1,"form",45),a.yc(3,P,2,0,"div",46),a.Pb()),2&e){const e=a.dc();a.zb(1),a.ic("ngIf",!1===e.loadingPayment),a.zb(1),a.ic("ngIf",!1===e.loadingPayment&&"card"===e.paymentMethod),a.zb(1),a.ic("ngIf","paypal"===e.paymentMethod)}}function I(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",76),a.Qb(1,"h2"),a.zc(2),a.Pb(),a.Qb(3,"div",22),a.Qb(4,"span",77),a.zc(5),a.Pb(),a.Qb(6,"span",78),a.zc(7),a.Pb(),a.Pb(),a.Qb(8,"p",79),a.zc(9,"Recibir\xe1s un mensaje a "),a.Qb(10,"strong"),a.zc(11),a.Pb(),a.zc(12," con tu factura as\xed como los documentos. Durante los pr\xf3ximos 15 d\xedas podr\xe1s modificar el formulario de nuevo sin tener que pagar y volver a descargarlo, una vez terminado el plazo caducar\xe1."),a.Pb(),a.Qb(13,"div",80),a.Qb(14,"h3"),a.zc(15,"Descarga ahora"),a.Pb(),a.Qb(16,"span",81),a.Zb("click",(function(){return a.rc(e),a.dc().downloadWord()})),a.Pb(),a.Qb(17,"span",82),a.Zb("click",(function(){return a.rc(e),a.dc().downloadPdf()})),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=a.dc();a.zb(2),a.Bc("Transacci\xf3n: ",e.transactionId,""),a.zb(3),a.Ac(e.form.title),a.zb(2),a.Bc("",e.form.amount," \u20ac"),a.zb(4),a.Ac(e.email)}}const Q=function(e){return{opacity:e}};function R(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",83),a.Zb("click",(function(){return a.rc(e),a.dc().moveStep("previous")})),a.zc(1,"Anterior"),a.Pb()}if(2&e){const e=a.dc();a.xc("display","cart"===e.steps[e.currentStep].type?"none":"block"),a.ic("ngStyle",a.lc(4,Q,"cart"===e.steps[e.currentStep].type?0:1))("disabled","cart"===e.steps[e.currentStep].type)}}function k(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",84),a.Zb("click",(function(){return a.rc(e),a.dc().exitModal.emit()})),a.zc(1,"Anterior"),a.Pb()}}function E(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",84),a.Zb("click",(function(){return a.rc(e),a.dc().exitModal.emit()})),a.zc(1,"Anterior"),a.Pb()}}function x(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",85),a.Zb("click",(function(){return a.rc(e),a.dc().moveStep("next")})),a.zc(1,"Siguiente"),a.Pb()}if(2&e){const e=a.dc();a.ic("ngStyle",a.lc(2,Q,"finish"===e.steps[e.currentStep].type?0:1))("disabled","finish"===e.steps[e.currentStep].type)}}function z(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",86),a.Zb("click",(function(){return a.rc(e),a.dc().onSubmit()})),a.Qb(1,"strong",87),a.zc(2,"PAGAR"),a.Pb(),a.Pb()}}const C=function(e){return{"checkout-panel__body__progress-bar__step__active":e}};let T=(()=>{class e{constructor(e,t,i,o,n,r,c){this.userService=e,this.checkoutService=t,this.formService=i,this.commonsService=o,this.convertService=n,this.router=r,this.toastr=c,this.formPaid=new a.n,this.exitModal=new a.n,this.downloadPdfOutput=new a.n,this.downloadWordOutput=new a.n,this.currentStep=0,this.loadingPayment=!0,this.idsOfFields=["card-element","expirationDate","cvv"],this.paymentMethod="card",this.paypalButtonCreated=!1,this.steps=[{type:"cart",stepNum:0},{type:"login",stepNum:1},{type:"payment",stepNum:2},{type:"finish",stepNum:3}]}ngOnInit(){this.userService.isAuthenticated.subscribe(e=>{this.email=e?this.userService.getCurrentUser().email:""}),this.form.fields[this.form.fields.length-1]&&(this.currentStep=this.form.fields[this.form.fields.length-1].checkoutProcess.phase,"payment"===this.steps[this.currentStep].type&&(this.currentStep=this.currentStep-1)),this.commonsService.isBrowser()&&(this.stripe=Stripe(d.a.stripe_key))}moveStep(e){"next"===e?this.validateBeforeNextStep()&&(this.currentStep+=1):"previous"===e&&(this.currentStep-=1),this.form.fields[this.form.fields.length-1].checkoutProcess.phase=this.currentStep,this.paymentProcess()}validateBeforeNextStep(){if("login"===this.steps[this.currentStep].type){if(""===this.email)return this.emailInput.nativeElement.style.borderBottom="3px solid red",this.toastr.error("Email no puede estar vac\xedo","Email vac\xedo",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),!1;if(!this.conditions.nativeElement.checked)return this.toastr.error("Debe aceptar las condiciones de venta","Aceptar",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),!1}return!0}goToAuth(){window.sessionStorage&&(window.sessionStorage[this.form.title]=JSON.stringify(this.form),this.router.navigate(["/auth/login"],{queryParams:{formPath:this.router.url.substring(this.router.url.lastIndexOf("/")+1)}}))}onSubmit(){this.payWithCard()}onPaymentMethodSelected(e){this.paymentMethod=e,"card"===this.paymentMethod?this.paymentProcess():"paypal"===this.paymentMethod&&this.createPaypalButton()}paymentProcess(){"payment"===this.steps[this.currentStep].type?(this.commonsService.toggleSpinner(),this.loadingPayment=!1,this.checkoutService.getToken(this.form.id).subscribe(e=>{this.commonsService.toggleSpinner(),this.clientSecret=e.clientSecret;const t=this.stripe.elements(),i={base:{fontSize:"16px",fontFamily:"Lato",fontWeight:"300",color:"rgba(46, 46, 46, 0.8)","::placeholder":{transition:"transition: 100ms linear",fontWeight:"300",fontFamily:"Lato",color:"#4ECDC4"},":focus":{borderColor:"#77db77",borderBottom:"3px solid #77db77"},"input:focus":{"border-color":"#77db77","border-bottom":"3px solid #77db77"}},invalid:{fontFamily:"Arial, sans-serif",color:"#fa755a",iconColor:"#fa755a"}};this.cardNumber=t.create("cardNumber",{style:i}),this.cardExpiry=t.create("cardExpiry",{style:i}),this.cardCvc=t.create("cardCvc",{style:i}),this.cardNumber.mount("#card-element"),this.cardExpiry.mount("#expirationDate"),this.cardCvc.mount("#cvv"),[this.cardNumber,this.cardExpiry,this.cardCvc].forEach((e,t)=>{const i=document.getElementById(this.idsOfFields[t]),o=()=>{i.classList.toggle("braintree-hosted-fields-focused")};e.on("focus",o),e.on("blur",o),e.on("change",e=>{e.error?(i.classList.add("hosted-fields-invalid"),i.nextElementSibling.hidden=!1):(i.classList.remove("hosted-fields-invalid"),i.nextElementSibling.hidden=!0)})})})):this.loadingPayment=!0}payWithCard(){this.commonsService.toggleSpinner(),this.stripe.confirmCardPayment(this.clientSecret,{payment_method:{card:this.cardNumber,billing_details:{name:this.cardholdersName}}}).then(e=>{this.commonsService.toggleSpinner(),e.error?this.toastr.error(e.error.message,"Error en el pago",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}):this.checkoutService.pay(JSON.stringify(this.form.fields),this.email,e.paymentIntent.id,this.form.id,this.paymentMethod).subscribe(e=>{e.transaction?(this.moveStep("next"),this.onPaymentCompleted(e.transaction.transactionId),this.toastr.success("Pago completado","Finalizado",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})):this.commonsService.toggleSpinner()})})}onPaymentCompleted(e){this.transactionId=e,this.formService.getPaidCertifiedForm(e).subscribe(t=>{t.certifiedForm.transactionId=e,this.formPaid.emit(t.certifiedForm)})}createPaypalButton(){this.commonsService.toggleSpinner(),this.checkoutService.getPaypalOrder(this.form.id).subscribe(e=>{console.log(e),this.paypalButton(e.orderID)})}paypalButton(e){paypal.Buttons({style:{layout:"horizontal",size:"large",shape:"pill",tagline:!0},createOrder:()=>e,onApprove:(e,t)=>Object(s.a)(this,void 0,void 0,(function*(){this.commonsService.toggleSpinner(),console.log(t);const i=yield t.order.capture();this.checkoutService.pay(JSON.stringify(this.form.fields),this.email,i.id,this.form.id,this.paymentMethod).subscribe(e=>{e.transaction?(this.moveStep("next"),this.onPaymentCompleted(e.transaction.transactionId),this.toastr.success("Pago completado","Finalizado",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.commonsService.toggleSpinner()):this.commonsService.toggleSpinner()}),console.log(i),console.log(e)})),onError:e=>{console.log(e)}}).render(document.getElementById("paypal-button")),setTimeout(()=>{this.commonsService.toggleSpinner()},2e3)}downloadWord(){this.downloadWordOutput.emit()}downloadPdf(){this.downloadPdfOutput.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(c.t),a.Lb(c.c),a.Lb(c.k),a.Lb(c.e),a.Lb(c.g),a.Lb(r.d),a.Lb(l.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-checkout"]],viewQuery:function(e,t){var i;1&e&&(a.Dc(f,!0),a.Dc(b,!0),a.Dc(m,!0)),2&e&&(a.oc(i=a.ac())&&(t.emailInput=i.first),a.oc(i=a.ac())&&(t.conditions=i.first),a.oc(i=a.ac())&&(t.cardField=i.first))},inputs:{form:"form"},outputs:{formPaid:"formPaid",exitModal:"exitModal",downloadPdfOutput:"downloadPdfOutput",downloadWordOutput:"downloadWordOutput"},decls:18,vars:18,consts:[[1,"modal__content__top","modal__content__top--privacy"],[1,"checkout-panel__body__progress-bar"],[1,"checkout-panel__body__progress-bar__step","checkout-panel__body__progress-bar__step__active"],[1,"checkout-panel__body__progress-bar__step",3,"ngClass"],["id","modal-middle-privacy",1,"modal__content__modal-middle","modal__content__modal-middle--privacy",2,"border-bottom","none"],[1,"modal__content__modal-middle__container"],["class","checkout-panel__body__invoice",4,"ngIf"],["class","checkout-panel__body__email",4,"ngIf"],["class","payment-container",4,"ngIf"],["class","checkout-panel__body__success",4,"ngIf"],[1,"modal__content__modal-bottom","modal__content__modal-bottom--privacy","checkout-panel__footer"],["class","btn back-btn",3,"ngStyle","display","disabled","click",4,"ngIf"],["class","btn back-btn",3,"click",4,"ngIf"],["class","btn next-btn",3,"ngStyle","disabled","click",4,"ngIf"],["class","btn next-btn secondaryC-background-color",3,"click",4,"ngIf"],[1,"checkout-panel__body__invoice"],[1,"checkout-panel__body__invoice__container"],[1,"checkout-panel__body__invoice__document"],["alt","checkout-image",3,"src"],[1,"checkout-panel__body__invoice__text"],[1,"checkout-panel__body__invoice__text__title"],[1,"checkout-panel__body__invoice__text__description"],[1,"checkout-panel__body__invoice__text__total"],[1,"checkout-panel__body__invoice__text__total__right"],[1,"checkout-panel__body__invoice__text__total__left"],[1,"checkout-panel__body__invoice__text__more-info"],["src","/assets/images/ssl-secure-en.png","alt","secure payment"],["href","https://stripe.com/","target","_blank"],["src","/assets/images/stripe-logo.png"],[1,"checkout-panel__body__email"],[1,"checkout-panel__body__email__container"],[1,"checkout-panel__body__email__container__title"],["for","email"],["type","email","name","email","id","name","placeholder","Email",3,"ngModel","ngModelChange"],["emailInput",""],["class","checkout-panel__body__email__container__message",4,"appShowAuthed"],[4,"appShowAuthed"],[1,"checkout-panel__body__email__container__message"],["for","conditions"],["type","checkbox","name","conditions","id","conditions",1,"filled-in",3,"ngModel","ngModelChange"],["conditions",""],["routerLink","/static-pages/cgv","target","_blank",1,"trigger"],["href","javascript:void(0)",3,"click"],[1,"payment-container"],["class","checkout-panel__body__payment-method",4,"ngIf"],["class","checkout-panel__body__input-fields","id","payment-form",4,"ngIf"],["style","height: 200px; margin-left: auto;margin-right:auto; display: flex;align-items: center;",4,"ngIf"],[1,"checkout-panel__body__payment-method"],["for","card",1,"checkout-panel__body__payment-method__method","card"],[1,"checkout-panel__body__payment-method__method__card-logos"],["src","https://designmodo.com/demo/checkout-panel/img/visa_logo.png"],["src","https://designmodo.com/demo/checkout-panel/img/mastercard_logo.png"],[1,"checkout-panel__body__payment-method__method__radio-input"],["id","card","type","radio","name","payment","value","card","checked","",3,"change"],["for","paypal",1,"checkout-panel__body__payment-method__method","paypal"],["src","https://designmodo.com/demo/checkout-panel/img/paypal_logo.png"],["id","paypal","type","radio","name","payment","value","paypal",3,"change"],["id","payment-form",1,"checkout-panel__body__input-fields"],[1,"checkout-panel__body__input-fields__column-1"],["for","cardholder-name","name","cardholderName",1,"hosted-field--label"],["type","text","id","cardholder","placeholder","P. ej: Juan P\xe9rez \xc1lvarez","name","cardholderName",1,"name-custom-input",3,"ngModel","ngModelChange"],[1,"checkout-panel__body__input-fields__small-inputs"],["for","expirationDate"],["id","expirationDate",1,"hosted-fields-stripe"],["dateField",""],["hidden","",1,"secondary-color"],["for","cvv"],["id","cvv","name","cvv",1,"hosted-fields-stripe"],["cvv",""],[1,"checkout-panel__body__input-fields__column-2"],["for","number"],["id","card-element",1,"hosted-fields-stripe"],["cardField",""],[1,"info"],[2,"height","200px","margin-left","auto","margin-right","auto","display","flex","align-items","center"],["id","paypal-button",2,"width","300px"],[1,"checkout-panel__body__success"],[1,"checkout-panel__body__invoice__text__total__right","total-success"],[1,"checkout-panel__body__invoice__text__total__left","total-success"],[1,"checkout-panel__body__success__message"],[1,"checkout-panel__body__success__download"],[1,"icon","icon-file-word-solid","trigger",3,"click"],[1,"icon","icon-file-pdf-solid",3,"click"],[1,"btn","back-btn",3,"ngStyle","disabled","click"],[1,"btn","back-btn",3,"click"],[1,"btn","next-btn",3,"ngStyle","disabled","click"],[1,"btn","next-btn","secondaryC-background-color",3,"click"],[2,"text-shadow","1px 1px 4px #000000"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Mb(2,"div",2),a.Mb(3,"div",3),a.Mb(4,"div",3),a.Mb(5,"div",3),a.Pb(),a.Pb(),a.Qb(6,"div",4),a.Qb(7,"div",5),a.yc(8,_,24,3,"div",6),a.yc(9,v,17,4,"div",7),a.yc(10,w,4,3,"div",8),a.yc(11,I,18,4,"div",9),a.Pb(),a.Pb(),a.Qb(12,"div",10),a.yc(13,R,2,6,"button",11),a.yc(14,k,2,0,"button",12),a.yc(15,E,2,0,"button",12),a.yc(16,x,2,4,"button",13),a.yc(17,z,3,0,"button",14),a.Pb()),2&e&&(a.zb(3),a.ic("ngClass",a.lc(12,C,t.steps[t.currentStep].stepNum>0)),a.zb(1),a.ic("ngClass",a.lc(14,C,t.steps[t.currentStep].stepNum>1)),a.zb(1),a.ic("ngClass",a.lc(16,C,t.steps[t.currentStep].stepNum>2)),a.zb(3),a.ic("ngIf","cart"===t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","login"===t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","payment"===t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","finish"===t.steps[t.currentStep].type),a.zb(2),a.ic("ngIf","finish"!==t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","cart"===t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","finish"===t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","payment"!==t.steps[t.currentStep].type),a.zb(1),a.ic("ngIf","payment"===t.steps[t.currentStep].type&&"card"===t.paymentMethod))},directives:[o.q,o.t,p.c,p.q,p.t,u.a,p.a,r.g,p.G,p.r,p.s,o.w],encapsulation:2}),e})();var M=i("2Vo4"),F=i("/uUt");let B=(()=>{class e{constructor(){this.currentFormSubject=new M.a({}),this.currentForm=this.currentFormSubject.asObservable().pipe(Object(F.a)())}setForm(e){this.currentFormSubject.next(Object.assign({},e))}getCurrentForm(){return this.currentFormSubject.value}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac}),e})();var L=i("KlD3");let O=(()=>{class e{constructor(e,t){this.commonsService=e,this.convertService=t,this.scrollToelement=!1}init(e){return this.createEditorFromURI("fillForm","editorContainer",e),new Promise((e,t)=>{const i=setInterval(()=>{window.editor&&window.editor.getEditorSession()&&document.getElementsByTagName("office:text").length&&(this.originalDocumentBodyClone=document.getElementsByTagName("office:text")[0].cloneNode(!0),clearInterval(i),e("Document ready"))},20)})}destroy(){this.commonsService.isBrowser()&&(L.a(),window.removeEventListener("resize",this.resizeEvent))}createEditorFromURI(e,t="editorContainer",i){const o=atob(i.split(",")[1]),n=i.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(o.length),c=new Uint8Array(r);for(let d=0;d<o.length;d++)c[d]=o.charCodeAt(d);const a=new Blob([r],{type:n}),s=URL.createObjectURL(a);window.DOCUMENTOURL=s,L.c(e,t)}getEditorSession(){return L.f()}saveUri(){const e=new FileReader;return new Promise((t,i)=>{L.e().getDocumentAsByteArray((i,o)=>{if(i)return void alert(i);const n=new Blob([o.buffer],{type:"application/vnd.oasis.opendocument.text"});e.readAsDataURL(n),e.onloadend=()=>{t(e.result)}})})}resizeDocumentContainer(){this.resizeEvent=()=>{setTimeout(()=>{document.getElementById("webodfeditor-editor1").style.height="100%",document.getElementById("webodfeditor-editor1").style.width="100%",L.d()},100)},window.addEventListener("resize",this.resizeEvent),L.d()}buildDocument(e,t,i=!1){this.currentDocumentBodyClone=this.originalDocumentBodyClone.cloneNode(!0),i?(this.currentDocumentBodyClone=this.documentBodyCloneJustForReplacements.cloneNode(!0),this.currentDocumentBodyClone.querySelectorAll(".highlight-disapear").forEach(e=>{e.classList.remove("highlight-disapear"),e.classList.remove("focused")})):this.structuralChanges(e),this.replacements(e),document.getElementsByTagName("office:text")[0].parentElement.replaceChild(this.currentDocumentBodyClone.cloneNode(!0),document.getElementsByTagName("office:text")[0]),this.getEditorSession().getOdfCanvas().refreshSize(),t&&this.scrollToElementWithClass("focused")}scrollToElementWithClass(e,t=0){const i=document.querySelector("."+e);if(i){const e=document.getElementById("webodfeditor-canvascontainer1"),t=e.clientHeight/2,o=i.getBoundingClientRect().top;e.scrollTo({top:e.scrollTop+o-t,behavior:"smooth"})}}dateToSpanishFormat(e){const t=new Date(e);let i="";return e&&(i=t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})),i}showIndicationInsideText(e,t){const i=document.querySelector(`[data-identifier=${e}]`),o=document.createElement("div");o.innerHTML=`<div class="indicator-content not-selectable">\n                        <button id="close-indication">&#10006;</button>\n                        <span class="not-selectable" style="margin:auto; width:100%">${t}\n                        </span>\n                    </div>`,o.style.top=i.getBoundingClientRect().top.toString(),o.style.left=i.getBoundingClientRect().left.toString(),o.classList.add("indicator"),o.classList.add("smooth-intro"),o.classList.add("not-selectable"),i.appendChild(o);const n=e=>{window.innerWidth>885?e.target.classList.contains("icon-info-circle-solid")||e.target.classList.contains("indication")?document.querySelectorAll(".indicator").length>=2&&(o.parentNode.removeChild(o),window.removeEventListener("click",n)):(o.parentNode.removeChild(o),window.removeEventListener("click",n)):"scrollToTop"!==e.target.id&&"close-indication"!==e.target.id||(o.parentNode.removeChild(o),window.removeEventListener("click",n))};window.addEventListener("click",n),this.scrollToElementWithClass("indicator",o.offsetHeight)}structuralChanges(e){e.forEach(e=>{"iRadioC"===e.type?this.buildForRadioC(e):"iCheckbox"===e.type?this.buildForCheckbox(e):"iForEach"===e.type&&this.buildForEach(e)}),this.documentBodyCloneJustForReplacements=this.currentDocumentBodyClone.cloneNode(!0)}buildForEach(e){e.content.forEach(t=>{const i=this.findword(t.wordToReplace);if(i.textContent===t.wordToReplace)t.modifiedReplacements.slice().reverse().forEach((o,n)=>{let r;const c=new RegExp(e.wordToReplace,"g");if(n!==t.modifiedReplacements.length-1){const t=i.cloneNode(!0);if(i.parentNode.insertBefore(t,i.nextSibling),e.forEachFocused){const e=document.createElement("span");for(e.classList.add("highlight-disapear","focused"),t.childNodes.forEach(t=>{e.appendChild(t)});t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e)}r=t}else r=i;r=this.findExactContainingElement(e.wordToReplace,r),r.innerHTML=r.innerHTML.replace(c,o)}),t.modifiedExtraReplacements.slice().reverse().forEach((e,t)=>{e.forEach(e=>{const t=this.findword(e[0].identifier);e.slice().reverse().forEach((i,o)=>{let n;const r=new RegExp(i.identifier,"g");if(o!==e.length-1){const e=t.cloneNode(!0);t.parentNode.insertBefore(e,t.nextSibling),n=this.findExactContainingElement(i.identifier,e)}else n=this.findExactContainingElement(i.identifier,t);n.innerHTML=n.innerHTML.replace(r,i.replacement)})})});else if(i.textContent.includes(t.wordToReplace)&&i.childElementCount<=1){const o=t.modifiedReplacements.slice().reverse(),n=new RegExp(e.wordToReplace,"g"),r=i.textContent,c=r.slice(0,r.indexOf(t.wordToReplace));let a=r.slice(r.indexOf(t.wordToReplace),r.length).replace(n,"");o.forEach((e,t)=>{a=e+a}),i.innerHTML=`<span>${c+a}</span>`}}),e.forEachFocused=!1}buildForRadioC(e){let t=this.findword(e.wordToReplace);const i=new RegExp(e.wordToReplace,"g");let o;for(e.radios.forEach(t=>{t.checked&&(o=e.isFocused||e.radioCfocused?`<span class="highlight-disapear focused">${t.replacement}</span>`:t.replacement,e.extraReplacements.forEach((e,i)=>{const o=new RegExp(e.wordToReplace,"g"),n=this.findword(e.wordToReplace),r=this.findExactContainingElement(e.wordToReplace,n);let c;t.extraReplacements.forEach(t=>{t.insideId===e.insideId&&(c=t.replacement)}),r.innerHTML=r.innerHTML.replace(o,c)}))}),t=this.findExactContainingElement(e.wordToReplace,t);null!==t.firstElementChild&&!this.allElementsAreBr(t);)t=t.firstElementChild;t.innerHTML=t.innerHTML.replace(i,o),e.radioCfocused=!1}allElementsAreBr(e){let t=!0;const i=e.children;for(let o;o<i.length;o++)"BR"!==i[o].tagName&&(t=!1);return i.length||(t=!1),t}buildForCheckbox(e){const t=this.findword(e.wordToReplace);let i=e.replacement;e.checkboxes.forEach(t=>{if(e.replacement.includes(t.wordToReplace))if(t.checked){const e=new RegExp(t.wordToReplace,"g");i=i.replace(e,t.replacement)}else{const e=new RegExp(t.wordToReplace,"g");i=i.replace(e,"")}}),t.innerHTML===e.wordToReplace&&(t.innerHTML=i)}replacements(e){e.forEach(e=>{if("iText"===e.type||"iDate"===e.type||"iNumber"===e.type){const t=this.findAllwords(e.wordToReplace),i=new RegExp(e.wordToReplace,"g");t.forEach(t=>{let o=t,n=e.replacement;o.innerHTML!==e.wordToReplace&&(o=this.findExactContainingElement(e.wordToReplace,o)),"iDate"===e.type&&(n=this.dateToSpanishFormat(e.replacement)),e.isEmpty&&(""!==e.replacement?(e.isEmpty.prepend&&(n.slice(0,e.isEmpty.prepend.length)===e.isEmpty.prepend&&(n=n.slice(e.isEmpty.prepend.length,n.length)),n=e.isEmpty.prepend+n),e.isEmpty.append&&(n.slice(-e.isEmpty.append.length)===e.isEmpty.append&&(n=n.slice(0,-e.isEmpty.prepend.length)),n+=e.isEmpty.append)):e.isEmpty.defaultValue&&(n=e.isEmpty.defaultValue)),o&&(o.innerHTML=o.innerHTML.replace(i,`<span class="${e.isFocused?"highlight focused":""}" data-identifier="${e.wordToReplace}">${n}</span>`))})}else if("iRadioB"===e.type){const t=this.findAllwords(e.wordToReplace);let i;const o=new RegExp(e.wordToReplace,"g");t.forEach(t=>{e.radios.forEach(n=>{if(n.checked){i=n.replacement;let r=t;r.innerHTML!==e.wordToReplace&&(r=this.findExactContainingElement(e.wordToReplace,r)),r&&(r.innerHTML=r.innerHTML.replace(o,`<span class=" ${e.isFocused?"highlight focused":""}" data-identifier="${e.wordToReplace}">${e.replacement}</span>`))}})})}e.extraReplacements&&e.extraReplacements.length&&e.extraReplacements.forEach(e=>{const t=this.findAllwords(e.wordToReplace),i=new RegExp(e.wordToReplace,"g");t.forEach(t=>{let o=t,n=e.replacement;o.innerHTML!==e.wordToReplace&&(o=this.findExactContainingElement(e.wordToReplace,o)),o&&(o.innerHTML=o.innerHTML.replace(i,`<span class="${e.isFocused?"highlight focused":""}" data-identifier="${e.wordToReplace}">${n}</span>`))})})})}findword(e,t=this.currentDocumentBodyClone){const i=t.childNodes;for(let o=0;o<i.length;o++)if(!this.elementIsExcluded(i[o])&&(i[o].innerHTML.includes(e)||i[o].textContent.includes(e)))return i[o]}findAllwords(e,t=this.currentDocumentBodyClone){const i=[],o=t.childNodes;for(let n=0;n<o.length;n++)this.elementIsExcluded(o[n])||o[n].innerHTML.includes(e)&&i.push(o[n]);return i}findExactContainingElement(e,t){let i=t;for(;i.childNodes&&i.childNodes.length>0&&i.innerHTML.includes(e);)i.childNodes.forEach(t=>{"#text"!==t.nodeName?t.innerHTML.includes(e)&&(i=t):t.textContent.includes(e)&&(i=t)});return"#text"===i.nodeName&&(i=i.parentNode),i}elementIsExcluded(e){return["office:text","text:sequence-decls","text:sequence-decl","draw:frame","draw:image","office:annotation","office:annotation-end","dc:creator","dc:date"].includes(e.nodeName)}downloadWord(e,t){this.commonsService.toggleSpinner(),this.saveUri().then(t=>{this.convertService.toWord(e,t).subscribe(e=>{const t=atob(e.word.split(",")[1]),i=e.word.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=new Blob([o],{type:i}),c=URL.createObjectURL(r);console.log(c);const a=document.createElement("a");a.href=c,a.download="word.doc",a.click(),this.commonsService.toggleSpinner()})})}downloadPdf(e,t){this.commonsService.toggleSpinner(),this.saveUri().then(t=>{this.convertService.toPdf(e,t).subscribe(e=>{const t=atob(e.pdf.split(",")[1]),i=e.pdf.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=new Blob([o],{type:i}),c=URL.createObjectURL(r);console.log(c);const a=document.createElement("a");a.href=c,a.download="document.pdf",a.click(),this.commonsService.toggleSpinner()})})}}return e.\u0275fac=function(t){return new(t||e)(a.Vb(c.e),a.Vb(c.g))},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac}),e})(),N=(()=>{class e{constructor(e,t){this.documentCreatorService=e,this.commonsService=t}init(e){this.steps=e,this.cacheSteps=JSON.parse(JSON.stringify(this.steps))}refreshCache(){this.cacheSteps=JSON.parse(JSON.stringify(this.steps))}setInitialState(){if(!this.steps[0].inited){const e=()=>{this.steps.forEach(e=>{switch(e.type){case"start":e.inited=!0;break;case"iText":case"iNumber":case"iDate":this.input(e.replacement,e.wordToReplace,!1);break;case"iForEach":this.buildForEach(e.value,e.wordToReplace,!1);break;case"iRadioB":e.radios.forEach(t=>{t.checked&&this.onInputRadioBSelected(t.radioId,e.wordToReplace,!1,!0)});break;case"iRadioC":let t=!0;e.radios.forEach(i=>{i.checked&&(t=!1,this.onInputRadioCSelected(i.radioId,e.wordToReplace,!1))}),t&&this.onInputRadioCSelected(e.defaultRadioId,e.wordToReplace,!1)}})};for(let t=0;t<5;t++)e()}this.buildDocument(!1)}buildDocument(e=!0,t=!1,i=!1){i&&this.checkCache(),this.documentCreatorService.buildDocument(this.steps,e,t)}checkCache(){this.steps.forEach(e=>{this.checkIfIsOfType(["iText","iNumber","iDate","iRadioB"],e)&&this.cacheSteps.forEach(t=>{e.wordToReplace===t.wordToReplace&&("iRadioB"===e.type?t.radios.forEach(t=>{t.checked&&this.onInputRadioBSelected(t.radioId,e.wordToReplace,!1,!0)}):e.replacement=t.replacement)})})}checkIfIsOfType(e,t){return e.forEach(e=>{if(t.type===e)return!0}),!1}input(e,t,i=!0,o=!1){const{step:n,index:r}=this.findStep(t,!0,"wordToReplace");n.replacement=e,n.isFocused=!0,"iNumber"===n.type&&this.rulesForInumber(n,r),i&&this.buildDocument(!0,o)}findStep(e,t,i){let o,n;return this.steps.forEach((r,c)=>{r[i]===e?(o=r,n=c):t&&(r.isFocused=!1)}),{step:o,index:n}}rulesForInumber(e,t){e.rules&&e.rules.length&&e.rules.forEach(t=>{"extraReplacementToCharacter"===t.rulename&&e.extraReplacements&&this.extraReplacementToCharacter(e,t),"extraReplacementAletras"===t.rulename&&e.extraReplacements&&this.extraReplacementAletras(e,t)})}extraReplacementToCharacter(e,t){e.extraReplacements.forEach((i,o)=>{i.wordToReplace===t.wordToReplace&&e.extraReplacements.splice(o,1)}),e.extraReplacements.push({wordToReplace:t.wordToReplace,replacement:this.commonsService.precioALetras(e.replacement,{plural:"euros",singular:"euro",centPlural:"centavos",centSingular:"centavo"})})}extraReplacementAletras(e,t){e.extraReplacements.forEach((i,o)=>{i.wordToReplace===t.wordToReplace&&e.extraReplacements.splice(o,1)}),e.extraReplacements.push({wordToReplace:t.wordToReplace,replacement:this.commonsService.numeroALetras(e.replacement)})}buildForEach(e,t,i=!0,o=!1,n=!1){const r=[],c=[],{step:a,index:s}=this.findStep(t,!1,"wordToReplace");a.forEachFocused=o,a.value=e,this.cleanPreviouslyAddedSteps(s,a.identifier),a.content.forEach((t,i)=>{t.modifiedReplacements=[],t.modifiedExtraReplacements=[];const o=[];t.extraReplacements.forEach(()=>{o.push([])});for(let n=0;n<parseInt(e);n++){let d=t.replacementOriginal;t.extraReplacements.forEach((e,t)=>{o[t].push({identifier:e.identifier,replacement:e.replacementOriginal})}),t.subSteps.forEach((l,p)=>{const u=a.identifier+l.identifier+n.toString()+p.toString();d=d.replace(l.identifier,u),t.extraReplacements.forEach((e,t)=>{const i=l.extraReplacements[t],r=o[t][n];r.wordToReplace=e.identifier+n.toString()+p.toString();const c=a.identifier+i.identifier+n.toString()+p.toString();r.replacement=r.replacement.replace(i.identifier,c),i.wordToReplace=c,i.identifier=c});let f=JSON.parse(JSON.stringify(l));this.cacheSteps.forEach(e=>{e.wordToReplace==u&&(f=JSON.parse(JSON.stringify(e)),f.cached=!0)}),f.identifier=u,f.wordToReplace=u,f.hasIndex&&(f.question=1===parseInt(e)?f.questionOriginal.replace("->(index)",""):f.questionOriginal.replace("->(index)",n+1)),this.steps.splice(s+1+p+n*t.subSteps.length+parseInt(e)*i*t.subSteps.length,0,f),"iRadioB"===f.type&&r.push(f),"iRadioC"===f.type&&(f.radios.forEach(e=>{e.subSteps.forEach(t=>{const i=u+t.identifier,o=new RegExp(t.identifier,"g");e.replacementOriginal=e.replacementOriginal.replace(o,i),t.wordToReplace=i,t.identifier=i})}),c.push(f))}),t.modifiedReplacements.push(d)}t.modifiedExtraReplacements.push(o)}),r.forEach(e=>{e.radios.forEach(t=>{t.checked&&this.onInputRadioBSelected(t.radioId,e.wordToReplace,!1,!0)})}),i&&(c.forEach(e=>{e.cached?e.radios.forEach(t=>{t.checked&&this.onInputRadioCSelected(t.radioId,e.wordToReplace,!1)}):this.onInputRadioCSelected(e.defaultRadioId,e.wordToReplace,!1)}),this.buildDocument(!0,!1,n))}cleanPreviouslyAddedSteps(e,t){for(;this.steps[e+1]&&this.steps[e+1].wordToReplace.includes(t);)this.steps.splice(e+1,1)}onInputRadioBSelected(e,t,i=!0,o=!1){const{step:n}=this.findStep(t,!1,"wordToReplace");n.isFocused=!o,n.radios.forEach(t=>{t.radioId===e?(n.replacement=t.replacementOriginal,t.checked=!0,n.extraReplacements&&n.extraReplacements.forEach((e,i)=>{e.replacement=t.extraReplacements[i].replacement})):t.checked=!1}),i&&this.buildDocument()}onInputRadioCSelected(e,t,i=!0,o=!1,n=!1){const r=[],c=[],a=[],s=[],d=(e,t,i)=>{this.cleanPreviouslyAddedSteps(t,e.wordToReplace);let o=i.replacementOriginal;i.extraReplacements.forEach(e=>{e.replacement=e.replacementOriginal}),i.subSteps.forEach((n,d)=>{n.wordToReplace=e.identifier+n.identifier;const l=new RegExp(n.identifier,"g");o=o.replace(l,n.wordToReplace),i.extraReplacements.forEach(e=>{e.replacement=e.replacement.replace(n.identifier,n.wordToReplace)}),"iCheckbox"===n.type&&n.checkboxes.forEach(e=>{e.checked=!1}),"iRadioC"===n.type&&(n.inheritFromRadioC=n.wordToReplace,n.radios.forEach(e=>{e.subSteps.forEach(t=>{const i=n.wordToReplace+t.identifier,o=new RegExp(t.identifier,"g");e.replacementOriginal=e.replacementOriginal.replace(o,i),t.wordToReplace=i,t.identifier=i,t.inherited=!0})}),s.push(n)),"iForEach"===n.type&&(n.content.forEach(e=>{const t=new RegExp(e.wordToReplace,"g");e.replacementOriginal=e.replacementOriginal.replace(t,n.wordToReplace),e.subSteps.forEach(e=>{e.wordToReplace=e.wordToReplace.replace(t,n.wordToReplace),e.identifier=e.identifier.replace(t,n.wordToReplace)}),e.wordToReplace=n.wordToReplace,e.identifier=n.wordToReplace}),r.push(n)),"iNumber"===n.type&&(n.rules.forEach(e=>{if("extraReplacementToCharacter"===e.rulename){const t="i"+Math.random().toString(36).substring(7)+e.identifier;e.wordToReplace=t;const i=new RegExp(e.identifier,"g");o=o.replace(i,t)}}),n.rules.length&&c.push(n)),"iRadioB"===n.type&&a.push(n),this.steps.splice(t+1+d,0,n)}),i.replacement=o,i.checked=!0};this.steps.forEach((i,n)=>{(i.identifier===t||i.inheritFromRadioC&&i.inheritFromRadioC===t)&&i.radios.forEach(t=>{t.radioId===e?d(i,n,t):t.checked=!1}),i.wordToReplace===t?(i.isFocused=!0,i.radioCfocused=o):i.isFocused=!1}),r.forEach(e=>{this.buildForEach(e.value,e.wordToReplace,!1,!0)}),s.forEach(e=>{e.radios.forEach(t=>{t.checked&&this.onInputRadioCSelected(t.radioId,e.wordToReplace,!1)})}),c.forEach(e=>{this.input(e.replacement,e.wordToReplace,!1)}),a.forEach(e=>{e.radios.forEach(t=>{t.checked&&this.onInputRadioBSelected(t.radioId,e.wordToReplace,!1,!0)})}),i&&this.buildDocument(!0,!1,n)}onInputCheckboxSelected(e,t,i,o=!0){this.steps.forEach((o,n)=>{if(o.wordToReplace===t){let t=o.replacementOriginal;o.checkboxes.forEach(r=>{if(r.wordToReplace=o.wordToReplace+r.identifier,t=t.replace(r.identifier,r.wordToReplace),r.identifier===e){const e=this.steps.length-n;for(let t=0;t<e;t++)this.steps[n+1+t]&&this.steps[n+1+t].wordToReplace.includes(r.identifier)&&this.steps.splice(n+1+t,1);if(i){let e=r.replacementOriginal;r.subSteps.forEach((t,i)=>{t.wordToReplace=r.wordToReplace+t.identifier,e=e.replace(t.identifier,t.wordToReplace),this.steps.splice(n+1+i,0,t)}),r.replacement=e}r.checked=i}}),o.replacement=t,o.rules&&o.rules.length&&o.rules.forEach(e=>{if("noneIsChecked"===e.condition){let t=!1;o.checkboxes.forEach(e=>{e.checked&&(t=!0)}),t?e.isFulfilled=!1:(o.replacement=e.replacement,e.isFulfilled=!0)}})}}),o&&this.buildDocument()}getStepsModel(){return this.steps}}return e.\u0275fac=function(t){return new(t||e)(a.Vb(O),a.Vb(c.e))},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac}),e})();function A(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Qb(1,"span",13),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}const D=function(e){return{borderBottom:e}};function Z(e,t){if(1&e){const e=a.Rb();a.Qb(0,"input",14,15),a.Zb("keyup",(function(t){return a.rc(e),a.dc().onInput(t)}))("click",(function(t){return a.rc(e),a.dc().onInput(t)})),a.Pb()}if(2&e){const e=a.dc();a.ic("value",e.step.replacement)("placeholder",e.step.placeholder?e.step.placeholder:"")("ngStyle",a.lc(3,D,e.inputInvalid?"3px solid red":""))}}function H(e,t){if(1&e){const e=a.Rb();a.Qb(0,"textarea",16,15),a.Zb("keyup",(function(t){return a.rc(e),a.dc().onInput(t)}))("click",(function(t){return a.rc(e),a.dc().onInput(t)})),a.Pb()}if(2&e){const e=a.dc();a.ic("value",e.step.replacement)("placeholder",e.step.placeholder?e.step.placeholder:"")("ngStyle",a.lc(3,D,e.inputInvalid?"3px solid red":""))}}function q(e,t){1&e&&(a.Qb(0,"span",17),a.zc(1," Obligatorio * "),a.Pb())}let j=(()=>{class e{constructor(e){this.stepModelService=e,this.emitIndication=new a.n}ngOnInit(){}showIndication(){this.emitIndication.emit()}onInput(e){this.stepModelService.input(e.srcElement.value,this.step.wordToReplace,!0,!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-text"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:13,vars:5,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],["type","text",3,"value","placeholder","ngStyle","keyup","click",4,"ngIf"],["cols","30","rows","6",3,"value","placeholder","ngStyle","keyup","click",4,"ngIf"],[1,"form-creator__fields-area__field__bottom"],["class","form-creator__fields-area__field__bottom__mandatory-label",4,"ngIf"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["type","text",3,"value","placeholder","ngStyle","keyup","click"],["input",""],["cols","30","rows","6",3,"value","placeholder","ngStyle","keyup","click"],[1,"form-creator__fields-area__field__bottom__mandatory-label"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,A,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.yc(9,Z,2,5,"input",8),a.yc(10,H,2,5,"textarea",9),a.Pb(),a.Qb(11,"div",10),a.yc(12,q,2,0,"span",11),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(1),a.ic("ngIf","textarea"!==t.step.subType),a.zb(1),a.ic("ngIf","textarea"===t.step.subType),a.zb(2),a.ic("ngIf",t.step.mandatory))},directives:[o.t,o.w],encapsulation:2}),e})();function W(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",13),a.Qb(1,"span",14),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}function J(e,t){1&e&&(a.Qb(0,"span",15),a.zc(1," Obligatorio * "),a.Pb())}const U=function(e){return{borderBottom:e}};let $=(()=>{class e{constructor(e){this.stepModelService=e,this.emitIndication=new a.n}ngOnInit(){}showIndication(){this.emitIndication.emit()}onInput(e,t){this.stepModelService.input(e,t,!0,!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-date"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:14,vars:7,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__date-container"],[1,"form-creator__fields-area__field__middle__question"],["type","date",3,"value","ngStyle","change"],["input",""],[1,"form-creator__fields-area__field__bottom"],["class","form-creator__fields-area__field__bottom__mandatory-label",4,"ngIf"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],[1,"form-creator__fields-area__field__bottom__mandatory-label"]],template:function(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,W,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"div",7),a.Qb(8,"span",8),a.zc(9),a.Pb(),a.Qb(10,"input",9,10),a.Zb("change",(function(){a.rc(e);const i=a.pc(11);return t.onInput(i.value,t.step.wordToReplace)})),a.Pb(),a.Pb(),a.Pb(),a.Qb(12,"div",11),a.yc(13,J,2,0,"span",12),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(4),a.Ac(t.step.question),a.zb(1),a.ic("value",t.step.replacement)("ngStyle",a.lc(5,U,t.inputInvalid?"3px solid red":"")),a.zb(3),a.ic("ngIf",t.step.mandatory))},directives:[o.t,o.w],encapsulation:2}),e})();const V=["input"];function G(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Qb(1,"span",13),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}function K(e,t){1&e&&(a.Qb(0,"span",14),a.zc(1," Obligatorio * "),a.Pb())}const X=function(e){return{borderBottom:e}};let Y=(()=>{class e{constructor(e,t){this.stepModelService=e,this.toastr=t,this.emitIndication=new a.n}ngOnInit(){}onInputNumberChanged(e){let t=e.srcElement.value;isNaN(t)?(this.toastr.error("N\xfamero no v\xe1lido","Debe ser un n\xfamero",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.input.nativeElement.style.borderBottom="3px solid red"):(this.input.nativeElement.style.borderBottom="",t.includes(",")&&(t=t.replace(",","")),t.includes(".")&&(t=t.replace(".","")),this.stepModelService.input(t,this.step.wordToReplace,!0,!0))}showIndication(){this.emitIndication.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(l.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-number"]],viewQuery:function(e,t){var i;1&e&&a.Dc(V,!0),2&e&&a.oc(i=a.ac())&&(t.input=i.first)},inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:13,vars:8,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],["type","text",3,"value","placeholder","ngStyle","keyup","click"],["input",""],[1,"form-creator__fields-area__field__bottom"],["class","form-creator__fields-area__field__bottom__mandatory-label",4,"ngIf"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],[1,"form-creator__fields-area__field__bottom__mandatory-label"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,G,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.Qb(9,"input",8,9),a.Zb("keyup",(function(e){return t.onInputNumberChanged(e)}))("click",(function(e){return t.onInputNumberChanged(e)})),a.Pb(),a.Pb(),a.Qb(11,"div",10),a.yc(12,K,2,0,"span",11),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(1),a.ic("value",t.step.replacement)("placeholder",t.step.placeholder?t.step.placeholder:"")("ngStyle",a.lc(6,X,t.inputInvalid?"3px solid red":"")),a.zb(3),a.ic("ngIf",t.step.mandatory))},directives:[o.t,o.w],encapsulation:2}),e})();function ee(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",11),a.Qb(1,"span",12),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}function te(e,t){if(1&e){const e=a.Rb();a.Qb(0,"p"),a.Qb(1,"label"),a.Qb(2,"input",13),a.Zb("change",(function(){a.rc(e);const i=t.$implicit,o=a.dc();return o.onInputSelected(i.radioId,o.step.wordToReplace)})),a.Pb(),a.Qb(3,"span"),a.zc(4),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=t.$implicit;a.zb(2),a.ic("checked",e.checked),a.zb(2),a.Ac(e.label)}}let ie=(()=>{class e{constructor(e,t){this.stepModelService=e,this.documentCreatorService=t,this.emitIndication=new a.n}ngOnInit(){}showIndication(){this.emitIndication.emit()}onInputSelected(e,t){this.stepModelService.onInputRadioBSelected(e,t)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(O))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-radio-b"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:12,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"form-creator__fields-area__field__middle__radio-input--fill-form","radio"],[4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["name","group1","type","radio","value","Valor de la pregunta numero 1",1,"with-gap",3,"checked","change"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,ee,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.Qb(9,"div",8),a.yc(10,te,5,2,"p",9),a.Pb(),a.Pb(),a.Mb(11,"div",10),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(2),a.ic("ngForOf",t.step.radios))},directives:[o.t,o.s],encapsulation:2}),e})();function oe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",11),a.Qb(1,"span",12),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}function ne(e,t){if(1&e){const e=a.Rb();a.Qb(0,"p"),a.Qb(1,"label"),a.Qb(2,"input",13),a.Zb("change",(function(){a.rc(e);const i=t.$implicit,o=a.dc();return o.onRadioCchanged(i.radioId,o.step.wordToReplace)})),a.Pb(),a.Qb(3,"span"),a.zc(4),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=t.$implicit;a.zb(2),a.ic("checked",e.checked),a.zb(2),a.Ac(e.label)}}let re=(()=>{class e{constructor(e,t){this.stepModelService=e,this.documentCreatorService=t,this.emitIndication=new a.n}ngOnInit(){}showIndication(){this.emitIndication.emit()}onRadioCchanged(e,t){this.stepModelService.refreshCache(),this.stepModelService.onInputRadioCSelected(e,t,!0,!0,!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(O))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-radio-c"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:12,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"form-creator__fields-area__field__middle__radio-input--fill-form","radio"],[4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["name","group1","type","radio","value","Valor de la pregunta numero 1",1,"with-gap",3,"checked","change"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,oe,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.Qb(9,"div",8),a.yc(10,ne,5,2,"p",9),a.Pb(),a.Pb(),a.Mb(11,"div",10),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(2),a.ic("ngForOf",t.step.radios))},directives:[o.t,o.s],encapsulation:2}),e})();function ce(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Qb(1,"span",13),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}let ae=(()=>{class e{constructor(e,t){this.stepModelService=e,this.documentCreatorService=t,this.emitIndication=new a.n}ngOnInit(){}showIndication(){this.emitIndication.emit()}onInput(e,t){this.stepModelService.refreshCache(),this.stepModelService.buildForEach(e,t,!0,!0,!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(O))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-for-each"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:16,vars:6,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"slider-range-container"],["type","range",1,"range-slider",3,"min","max","value","change"],["input",""],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"]],template:function(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,ce,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.Qb(9,"div",8),a.Qb(10,"input",9,10),a.Zb("change",(function(){a.rc(e);const i=a.pc(11);return t.onInput(i.value,t.step.wordToReplace)})),a.Pb(),a.Qb(12,"p"),a.Qb(13,"span"),a.zc(14),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Mb(15,"div",11),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=a.pc(11);a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(2),a.jc("min",t.step.min),a.jc("max",t.step.max),a.ic("value",t.step.value),a.zb(4),a.Ac(e.value)}},directives:[o.t],encapsulation:2}),e})();function se(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Qb(1,"span",13),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}function de(e,t){if(1&e&&(a.Qb(0,"option",14),a.zc(1),a.Pb()),2&e){const e=t.$implicit;a.jc("value",e.radioId),a.ic("selected",e.checked),a.zb(1),a.Bc(" ",e.label," ")}}let le=(()=>{class e{constructor(e,t){this.stepModelService=e,this.documentCreatorService=t,this.emitIndication=new a.n}ngOnInit(){}onInputSelectChanged(e){"iRadioC"===this.step.type?this.stepModelService.onInputRadioCSelected(e.target.value,this.step.wordToReplace):"iRadioB"===this.step.type&&this.stepModelService.onInputRadioBSelected(e.target.value,this.step.wordToReplace)}showIndication(){this.emitIndication.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(O))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-select"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:13,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"input-select"],[1,"browser-default",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],[3,"value","selected"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,se,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.Qb(9,"div",8),a.Qb(10,"select",9),a.Zb("change",(function(e){return t.onInputSelectChanged(e)})),a.yc(11,de,2,3,"option",10),a.Pb(),a.Pb(),a.Pb(),a.Mb(12,"div",11),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(3),a.ic("ngForOf",t.step.radios))},directives:[o.t,o.s,p.v,p.F],encapsulation:2}),e})();function pe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Qb(1,"span",13),a.Zb("click",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb(),a.Pb()}}function ue(e,t){if(1&e){const e=a.Rb();a.Qb(0,"label"),a.Qb(1,"input",14,15),a.Zb("change",(function(){a.rc(e);const i=t.$implicit,o=a.pc(2),n=a.dc();return n.onInputCheckboxSelected(i.identifier,n.step.wordToReplace,o.checked)})),a.Pb(),a.Qb(3,"span"),a.zc(4),a.Pb(),a.Pb()}if(2&e){const e=t.$implicit;a.zb(1),a.ic("checked",e.checked),a.zb(3),a.Bc("",e.label,".")}}let fe=(()=>{class e{constructor(e,t){this.stepModelService=e,this.documentCreatorService=t,this.emitIndication=new a.n}ngOnInit(){}showIndication(){this.emitIndication.emit()}onInputCheckboxSelected(e,t,i){this.stepModelService.onInputCheckboxSelected(e,t,i)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(O))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-i-checkbox"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:14,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"form-creator__fields-area__field__middle__checkbox-input"],[4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"form-creator__fields-area__field__bottom__mandatory-label"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["type","checkbox",1,"filled-in",3,"checked","change"],["input",""]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.yc(5,pe,2,0,"div",5),a.Pb(),a.Qb(6,"div",6),a.Qb(7,"span",7),a.zc(8),a.Pb(),a.Qb(9,"div",8),a.yc(10,ue,5,2,"label",9),a.Pb(),a.Pb(),a.Qb(11,"div",10),a.Qb(12,"span",11),a.zc(13," Obligatorio * "),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(5),a.ic("ngIf",t.step.indications&&t.step.indications.areIndications),a.zb(3),a.Ac(t.step.question),a.zb(2),a.ic("ngForOf",t.step.checkboxes))},directives:[o.t,o.s],encapsulation:2}),e})();const be=["modal"],me=["modalEnd"],_e=["modalDownload"],he=["modalIndication"],ge=["input"],ve=["progressBar"];function ye(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",43),a.Qb(1,"div",44),a.Qb(2,"span",45),a.Qb(3,"div",46),a.Mb(4,"img",47),a.Pb(),a.Qb(5,"span",48),a.zc(6,"Silvia Camejo Alarc\xf3n"),a.Pb(),a.Pb(),a.Qb(7,"span",49),a.Qb(8,"span"),a.zc(9,"Actualizado:"),a.Pb(),a.zc(10),a.Pb(),a.Pb(),a.Qb(11,"div",50),a.Qb(12,"div",51),a.Qb(13,"span",52),a.Zb("click",(function(){a.rc(e);const t=a.dc(),i=a.pc(27);return t.toogleModal(i)})),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=a.dc();a.zb(10),a.Bc(" ",e.form.updated," ")}}function Se(e,t){if(1&e&&(a.Qb(0,"div",53),a.Qb(1,"div",54),a.Qb(2,"span",null,55),a.zc(4),a.Pb(),a.Pb(),a.Pb()),2&e){const e=a.dc();a.zb(2),a.xc("width",e.progresBarPercentage),a.zb(2),a.Ac(e.progresBarPercentage)}}function Pe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",56),a.Qb(1,"div",57),a.Qb(2,"h3",58),a.zc(3),a.Pb(),a.Qb(4,"span",59),a.zc(5),a.Pb(),a.Qb(6,"button",60),a.Zb("click",(function(){a.rc(e);const t=a.dc(),i=a.pc(27);return t.toogleModal(i)})),a.zc(7," Rellenar formulario "),a.Pb(),a.Pb(),a.Pb()}if(2&e){const e=a.dc();a.zb(3),a.Bc(" ",e.steps[e.currentStep].title," "),a.zb(2),a.Bc(" ",e.steps[e.currentStep].description," ")}}function we(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-text",61),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])("inputInvalid",e.inputInvalid)}}function Ie(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-date",61),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])("inputInvalid",e.inputInvalid)}}function Qe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-number",61),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])("inputInvalid",e.inputInvalid)}}function Re(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-for-each",62),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])}}function ke(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-radio-b",62),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])}}function Ee(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-radio-c",62),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])}}function xe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-select",62),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])}}function ze(e,t){if(1&e){const e=a.Rb();a.Qb(0,"app-i-checkbox",62),a.Zb("emitIndication",(function(){return a.rc(e),a.dc().showIndication()})),a.Pb()}if(2&e){const e=a.dc();a.ic("step",e.steps[e.currentStep])}}function Ce(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",56),a.Qb(1,"div",63),a.Qb(2,"div",64),a.Qb(3,"div",65),a.Qb(4,"div",66),a.Mb(5,"span",67),a.Qb(6,"h1"),a.zc(7,"Finalizado"),a.Pb(),a.Qb(8,"button",68),a.Zb("click",(function(){return a.rc(e),a.dc().toogleCheckout()})),a.zc(9,"Descargar"),a.Pb(),a.Qb(10,"div",69),a.Mb(11,"span",70),a.Mb(12,"span",71),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}}function Te(e,t){1&e&&(a.Qb(0,"div",72),a.Qb(1,"div",73),a.Mb(2,"span",74),a.Qb(3,"span",75),a.zc(4,"1."),a.Pb(),a.Qb(5,"span",76),a.zc(6,"Elige un documento"),a.Pb(),a.Pb(),a.Qb(7,"div",73),a.Mb(8,"span",77),a.Qb(9,"span",75),a.zc(10,"2."),a.Pb(),a.Qb(11,"span",76),a.zc(12,"Rellena el formulario"),a.Pb(),a.Pb(),a.Qb(13,"div",73),a.Mb(14,"span",78),a.Qb(15,"span",75),a.zc(16,"3."),a.Pb(),a.Qb(17,"span",76),a.zc(18,"Gu\xe1rdalo e impr\xedmelo"),a.Pb(),a.Pb(),a.Pb())}function Me(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",81),a.Zb("click",(function(){return a.rc(e),a.dc(2).moveStep("next")})),a.Qb(1,"span",83),a.zc(2,"Siguiente"),a.Pb(),a.Mb(3,"span",86),a.Pb()}}function Fe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",79),a.Qb(1,"div",80),a.Qb(2,"div",81),a.Zb("click",(function(){return a.rc(e),a.dc().moveStep("previous")})),a.Mb(3,"span",82),a.Qb(4,"span",83),a.zc(5,"Anterior"),a.Pb(),a.Pb(),a.Qb(6,"div",84),a.Zb("click",(function(){return a.rc(e),a.dc().previewDocumentButton(!0)})),a.zc(7," Preview "),a.Qb(8,"span"),a.zc(9,"\u2b07"),a.Pb(),a.Pb(),a.yc(10,Me,4,0,"div",85),a.Pb(),a.Pb()}if(2&e){const e=a.dc();a.zb(10),a.ic("ngIf","end"!==(null==e.steps[e.currentStep]?null:e.steps[e.currentStep].type))}}let Be=(()=>{class e{constructor(e,t,i,o,n,r,a,s,d){this.stepModelService=e,this.commonsService=t,this.sharedService=i,this.documentCreatorService=o,this.formsService=n,this.toastr=r,this.checkoutService=a,this.route=s,this.metaService=d,this.form=new c.i,this.currentStep=0,this.progresBarPercentage="0%",this.steps=[],this.formAlreadyPaid=!1,this.indications={areIndications:!0,indicationsType:"outsideText",value:""},this.inputInvalid=!1}ngOnInit(){this.commonsService.isBrowser()&&(this.commonsService.toggleSpinner(),this.route.params.subscribe(e=>{this.route.queryParams.subscribe(t=>{t.transactionId?(this.formAlreadyPaid=!0,this.formsService.getPaidCertifiedForm(t.transactionId).subscribe(t=>{if(t.certifiedForm){const i=t.certifiedForm;this.form.fields=JSON.parse(i.fields),this.steps=this.form.fields,this.form.title=i.title,this.form.uri=i.uri,this.form.id=e.id,this.form.amount=i.amount,this.form.topLabelTitle=i.topLabelTitle,this.form.information=i.information,this.form.updated=i.updated,this.setInitiaState()}else t.transactionNotFound?this.commonsService.toastMessage("error","Transaction Id does not exist","Transaction id not found"):t.formExpired&&this.commonsService.toastMessage("error","The period of 30 days to change the document has expired","Transaction expired")})):window.sessionStorage&&window.sessionStorage[e.id]?(this.form=JSON.parse(window.sessionStorage[e.id]),this.steps=this.form.fields,this.formAlreadyPaid=this.form.alreadyPaid,this.setInitiaState()):this.formsService.getCertifiedForm(e.id).subscribe(t=>{this.steps=t.steps,this.form.fields=this.steps,this.form.title=t.title,this.form.uri=t.uri,this.form.id=e.id,this.form.amount=t.amount,this.form.image=t.image,this.form.topLabelTitle=t.topLabelTitle,this.form.information=t.information,this.form.updated=t.updated,this.setInitiaState()})})}))}ngAfterViewInit(){this.commonsService.resizeEditor(!1)}ngOnDestroy(){this.documentCreatorService.destroy(),window.removeEventListener("resize",this.commonsService.resizeEditor.bind(this)),this.commonsService.setFormCreatorPlayground(!0)}setInitiaState(){this.stepModelService.init(this.form.fields),this.sharedService.setForm(this.form),this.form.fields.forEach((e,t)=>{e.isCurrentStep&&(this.currentStep=t,this.updateProgressBarPercentage(),"end"===this.steps[this.currentStep].type&&this.steps[this.currentStep].checkoutProcess.isInited&&!this.formAlreadyPaid&&this.toogleModal(this.modalEnd.nativeElement))}),this.documentCreatorService.init(this.form.uri).then(e=>{this.commonsService.setFormCreatorPlayground(!1),this.commonsService.resizeEditor(!0),window.addEventListener("resize",this.commonsService.resizeEditor.bind(this)),this.documentCreatorService.resizeDocumentContainer(),this.stepModelService.buildDocument(!1),this.stepModelService.setInitialState(),this.documentCreatorService.resizeEvent(),this.commonsService.toggleSpinner()})}toogleModal(e){this.commonsService.toggleModal(e,!0)}moveStep(e){"next"===e?this.validateBeforeNextStep(this.steps[this.currentStep])&&(this.steps[this.currentStep].isCurrentStep=!1,this.steps[this.currentStep+1].isCurrentStep=!0,this.currentStep+=1):"previous"===e&&(this.steps[this.currentStep].isCurrentStep=!1,this.steps[this.currentStep-1].isCurrentStep=!0,this.currentStep-=1),this.updateProgressBarPercentage(),"end"===this.steps[this.currentStep].type&&this.prepareForCheckout()}validateBeforeNextStep(e){if(e.mandatory){if(""===e.replacement)return this.toastr.error("Form cannot be empty","Empty field",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.inputInvalid=!0,!1;this.inputInvalid=!1}return!0}updateProgressBarPercentage(){if(this.progressBar&&this.currentStep){const e=Math.round(this.currentStep/(this.steps.length-1)*100),t=parseInt(this.progresBarPercentage,10),i=e>t?e-t:t-e;for(let o=0;o<i+1;o++)setTimeout(()=>{const i=e>t?t+o:t-o;this.progressBar.nativeElement.style.width=i+"%",this.progresBarPercentage=i+"%"},10*o)}else this.progresBarPercentage=Math.round(this.currentStep/(this.steps.length-1)*100)+"%"}showIndication(){const e=this.steps[this.currentStep];e.indications.areIndications&&("outsideText"===e.indications.indicationsType||window.innerWidth<885?(this.indications=e.indications,this.toogleModal(this.modalIndication.nativeElement)):this.documentCreatorService.showIndicationInsideText(e.wordToReplace,e.indications.value))}prepareForCheckout(){this.form.fields=this.steps,this.sharedService.setForm(this.form)}startCheckout(){this.steps[this.currentStep].checkoutProcess.isInited=!0}onFormPaid(e){this.documentCreatorService.destroy(),window.removeEventListener("resize",this.commonsService.resizeEditor.bind(this)),this.formAlreadyPaid=!0,this.form.alreadyPaid=!0,this.form.uri=e.uri,this.form.fields=JSON.parse(e.fields),this.setInitiaState(),this.commonsService.toggleSpinner(),this.sendEmail(e.transactionId)}previewDocumentButton(e){this.commonsService.previewDocumentButton(e),this.documentCreatorService.resizeEvent()}onExitPayment(){this.toogleModal(this.modalEnd.nativeElement)}toogleCheckout(){this.formAlreadyPaid?this.toogleModal(this.modalDownload.nativeElement):(this.toogleModal(this.modalEnd.nativeElement),this.startCheckout())}downloadWord(){this.documentCreatorService.downloadWord(this.form.id,this.form.uri)}downloadPdf(){this.documentCreatorService.downloadPdf(this.form.id,this.form.uri)}sendEmail(e){setTimeout(()=>{this.documentCreatorService.saveUri().then(t=>{this.checkoutService.sendMail(e,t).subscribe(e=>{console.log(e)})})},1e3)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(N),a.Lb(c.e),a.Lb(B),a.Lb(O),a.Lb(c.k),a.Lb(l.b),a.Lb(c.c),a.Lb(r.a),a.Lb(c.l))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-form"]],viewQuery:function(e,t){var i;1&e&&(a.Dc(be,!0),a.wc(me,!0),a.Dc(_e,!0),a.Dc(he,!0),a.Dc(ge,!0),a.Dc(ve,!0)),2&e&&(a.oc(i=a.ac())&&(t.modal=i.first),a.oc(i=a.ac())&&(t.modalEnd=i.first),a.oc(i=a.ac())&&(t.modalDownload=i.first),a.oc(i=a.ac())&&(t.modalIndication=i.first),a.oc(i=a.ac())&&(t.input=i.first),a.oc(i=a.ac())&&(t.progressBar=i.first))},decls:63,vars:17,consts:[[1,"form-creator__container"],["id","fields-area",1,"form-creator__fields-area"],[1,"form-creator__fields-area__container"],[1,"form-creator__fields-area__top"],["class","form-creator__fields-area__top__container",4,"ngIf"],["class","progress-container",4,"ngIf"],[1,"form-creator__fields-area__middle"],["class","form-creator__fields-area__middle__container",4,"ngIf"],[3,"step","inputInvalid","emitIndication",4,"ngIf"],[3,"step","emitIndication",4,"ngIf"],["class","form-creator__fields-area__bottom form-creator__fields-area__bottom--initial-screen",4,"ngIf"],["class","form-creator__fields-area__bottom",4,"ngIf"],["id","text-area",1,"form-creator__text-area"],["id","wodoautomatikdocs",2,"width","100%","height","100%","margin","0px","padding","0px"],["id","editorContainer",2,"width","100%","height","100%","margin","0px","padding","0px"],["id","scrollToTop",1,"button-filled","button-filled--preview-document",2,"display","none",3,"click"],[2,"font-size","20px"],[1,"modal"],["modal",""],[1,"modal__content","modal__content--privacy"],[1,"modal__content__top","modal__content__top--privacy"],[1,"text-center"],["id","modal-middle-privacy",1,"modal__content__modal-middle","modal__content__modal-middle--privacy"],[1,"modal__content__modal-middle__container"],[3,"innerHTML"],[1,"modal__content__modal-bottom","modal__content__modal-bottom--privacy"],["id","modal-button",1,"button-filled",3,"click"],["modalEnd",""],[1,"modal__content","modal__content--privacy",3,"form","formPaid","exitModal","downloadWordOutput","downloadPdfOutput"],["modalDownload",""],[1,"modal__content",2,"padding","2rem"],[1,"modal__content__modal-middle","modal__content__modal-middle--change-password"],[1,"download-documents-modal"],[1,"icon","icon-file-word-solid","trigger",3,"click"],[1,"icon","icon-file-pdf-solid",3,"click"],[1,"modal__content__modal-bottom"],["modalIndication",""],[1,"modal__content","modal__content--question-indication"],[1,"modal__content__top","modal__content__top--indication"],[1,"modal__content__modal-middle","modal__content__modal-middle--question-indication"],[1,"modal__content__modal-middle__container",3,"innerHTML"],[1,"new-modal-content__footer","new-modal-content__footer--indicactions"],[1,"btn","next-btn",3,"click"],[1,"form-creator__fields-area__top__container"],[1,"form-creator__fields-area__top__author-date"],[1,"form-creator__fields-area__top__author-date__author"],[1,"form-creator__fields-area__top__author-date__author__image-container"],["src","/assets/images/silvia-avatar.jpeg","alt","avatar"],["routerLink","/static-pages/silvia-profile"],[1,"form-creator__fields-area__top__author-date__date"],[1,"form-creator__fields-area__top__before-start-button"],[1,"form-creator__fields-area__top__before-start-button__information-modal-icon","trigger"],[1,"icon","icon-info-solid",3,"click"],[1,"progress-container"],[1,"progress","progress-large"],["progressBar",""],[1,"form-creator__fields-area__middle__container"],[1,"form-creator__fields-area__middle__initial-screen"],[1,"form-creator__fields-area__middle__initial-screen__form-title"],[1,"form-creator__fields-area__middle__initial-screen__description"],[1,"button-filled","button-filled--start-form",3,"click"],[3,"step","inputInvalid","emitIndication"],[3,"step","emitIndication"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__end-step"],[1,"form-creator__fields-area__end-step__container"],[1,"form-creator__fields-area__end-step__check","icon","icon-check-circle-solid"],[1,"button-filled","button-filled--start-form","trigger",3,"click"],[1,"form-creator__fields-area__end-step__icons"],[1,"icon","icon-file-word-solid","trigger"],[1,"icon","icon-file-pdf-solid"],[1,"form-creator__fields-area__bottom","form-creator__fields-area__bottom--initial-screen"],[1,"form-creator__fields-area__bottom__step"],[1,"icon","icon-file-regular"],[1,"form-creator__fields-area__bottom__step__number"],[1,"form-creator__fields-area__bottom__step__description"],[1,"icon","icon-list-alt-regular"],[1,"icon","icon-print-solid"],[1,"form-creator__fields-area__bottom"],[1,"form-creator__fields-area__bottom__container"],[1,"form-creator__fields-area__bottom__arrow-button",3,"click"],[1,"icon","icon-chevron-left-solid"],[1,"form-creator__fields-area__bottom__arrow-button__label"],[1,"form-creator__fields-area__bottom__preview-button",3,"click"],["class","form-creator__fields-area__bottom__arrow-button",3,"click",4,"ngIf"],[1,"icon","icon-chevron-right-solid"]],template:function(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.yc(4,ye,14,1,"div",4),a.yc(5,Se,5,3,"div",5),a.Pb(),a.Qb(6,"div",6),a.yc(7,Pe,8,2,"div",7),a.yc(8,we,1,2,"app-i-text",8),a.yc(9,Ie,1,2,"app-i-date",8),a.yc(10,Qe,1,2,"app-i-number",8),a.yc(11,Re,1,1,"app-i-for-each",9),a.yc(12,ke,1,1,"app-i-radio-b",9),a.yc(13,Ee,1,1,"app-i-radio-c",9),a.yc(14,xe,1,1,"app-i-select",9),a.yc(15,ze,1,1,"app-i-checkbox",9),a.yc(16,Ce,13,0,"div",7),a.Pb(),a.yc(17,Te,19,0,"div",10),a.yc(18,Fe,11,1,"div",11),a.Pb(),a.Pb(),a.Qb(19,"div",12),a.Qb(20,"div",13),a.Mb(21,"div",14),a.Pb(),a.Qb(22,"button",15),a.Zb("click",(function(){return t.previewDocumentButton(!1)})),a.zc(23,"Form "),a.Qb(24,"span",16),a.zc(25,"\u2191"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(26,"div",17,18),a.Qb(28,"div",19),a.Qb(29,"div",20),a.Qb(30,"h2",21),a.zc(31,"Indicaciones antes de comenzar el formulario"),a.Pb(),a.Pb(),a.Qb(32,"div",22),a.Qb(33,"div",23),a.Mb(34,"div",24),a.Pb(),a.Pb(),a.Qb(35,"div",25),a.Qb(36,"button",26),a.Zb("click",(function(){a.rc(e);const i=a.pc(27);return t.toogleModal(i),t.moveStep("next")})),a.zc(37,"Rellenar"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(38,"div",17,27),a.Qb(40,"app-checkout",28),a.Zb("formPaid",(function(e){return t.onFormPaid(e)}))("exitModal",(function(){return t.onExitPayment()}))("downloadWordOutput",(function(){return t.downloadWord()}))("downloadPdfOutput",(function(){return t.downloadPdf()})),a.Pb(),a.Pb(),a.Qb(41,"div",17,29),a.Qb(43,"div",30),a.Qb(44,"div",31),a.Qb(45,"div",23),a.Qb(46,"div",32),a.Qb(47,"span",33),a.Zb("click",(function(){return t.downloadWord()})),a.Pb(),a.Qb(48,"span",34),a.Zb("click",(function(){return t.downloadPdf()})),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(49,"div",35),a.Qb(50,"button",26),a.Zb("click",(function(){a.rc(e);const i=a.pc(42);return t.toogleModal(i)})),a.zc(51,"Cancelar"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(52,"div",17,36),a.Qb(54,"div",37),a.Qb(55,"div",38),a.Qb(56,"h2"),a.zc(57,"Indicaciones"),a.Pb(),a.Pb(),a.Qb(58,"div",39),a.Mb(59,"div",40),a.Pb(),a.Qb(60,"div",41),a.Qb(61,"button",42),a.Zb("click",(function(){a.rc(e);const i=a.pc(53);return t.toogleModal(i)})),a.zc(62,"Entendido"),a.Pb(),a.Pb(),a.Pb(),a.Pb()}2&e&&(a.zb(4),a.ic("ngIf","start"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","start"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(2),a.ic("ngIf","start"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","iText"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","iDate"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","iNumber"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","iForEach"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","iRadioB"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)),a.zb(1),a.ic("ngIf","iRadioC"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)),a.zb(1),a.ic("ngIf","iRadioC"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)||"iRadioB"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)),a.zb(1),a.ic("ngIf","iCheckbox"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","end"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","start"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(1),a.ic("ngIf","start"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),a.zb(16),a.ic("innerHTML",t.form.information,a.sc),a.zb(6),a.ic("form",t.form),a.zb(19),a.ic("innerHTML",t.indications.value,a.sc))},directives:[o.t,T,r.e,j,$,Y,ae,ie,re,le,fe],encapsulation:2}),e})();const Le=["subMenu"],Oe=["loginModal"];function Ne(e,t){if(1&e&&(a.Qb(0,"li",8),a.zc(1),a.Pb()),2&e){const e=a.dc();a.zb(1),a.Bc(" ",e.form.topLabelTitle," ")}}const Ae=[{path:":id",component:(()=>{class e{constructor(e,t,i,o,n,r,a){this.commonsService=e,this.formsService=t,this.userService=i,this.sharedService=o,this.router=n,this.route=r,this.toastr=a,this.form=new c.i,this.originalForm=new c.i,this.currentStep=0,this.updatingForm=!1}ngOnInit(){this.commonsService.addTags("certifiedForms"),this.sharedService.currentForm.subscribe(e=>{this.commonsService.isObjectEmpty(e)||(this.form=e,this.currentStep=e.currentStep)}),this.userService.isAuthenticated.subscribe(e=>{this.isAuth=!!e}),this.commonsService.isBrowser()&&window.addEventListener("unload",this.saveInSessionStorage.bind(this))}ngOnDestroy(){this.saveInSessionStorage(),window.removeEventListener("unload",this.saveInSessionStorage)}topMenuNav(e){this.commonsService.subMenuNav(e,this.subMenu.nativeElement)}saveForm(){this.isAuth?(this.form.type="Certified",this.validateForm(),this.formsService.save(this.form).subscribe(e=>{this.toastr.success("Has been saved",e.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})},e=>{console.log(e),this.toastr.error("Un error ha ocurrido. Int\xe9ntalo de nuevo","Error",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})})):(window.sessionStorage&&(window.sessionStorage[this.form.id]=JSON.stringify(this.form)),this.router.navigate(["/auth/login"],{queryParams:{formPath:this.router.url.substring(this.router.url.lastIndexOf("/")+1)}}))}saveInSessionStorage(){window.sessionStorage&&(window.sessionStorage[this.form.id]=JSON.stringify(this.form))}toogleModal(e){this.commonsService.toggleModal(e,!0)}validateForm(){this.form.description="blabla",this.form.text="blaw"}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(c.e),a.Lb(c.k),a.Lb(c.t),a.Lb(B),a.Lb(r.d),a.Lb(r.a),a.Lb(l.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-certified-forms"]],viewQuery:function(e,t){var i;1&e&&(a.Dc(Le,!0),a.Dc(Oe,!0)),2&e&&(a.oc(i=a.ac())&&(t.subMenu=i.first),a.oc(i=a.ac())&&(t.loginModal=i.first))},decls:9,vars:2,consts:[[1,"sub-menu"],["subMenu",""],[1,"sub-menu__container","sub-menu__container--fill-form"],[1,"sub-menu__left-button","sub-menu__left-button--fill-form"],[1,"button-filled","button-filled--sub-menu-fill-form","icon","icon-save-solid",3,"hidden","click"],[1,"sub-menu__nav","sub-menu__nav--fill-form",2,"justify-content","center"],["class","sub-menu__nav__button sub-menu__nav__button--without-hover",4,"ngIf"],["id","form-creator",1,"form-creator"],[1,"sub-menu__nav__button","sub-menu__nav__button--without-hover"]],template:function(e,t){1&e&&(a.Qb(0,"div",0,1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"button",4),a.Zb("click",(function(){return t.saveForm()})),a.Pb(),a.Pb(),a.Qb(5,"ul",5),a.yc(6,Ne,2,1,"li",6),a.Pb(),a.Pb(),a.Pb(),a.Qb(7,"div",7),a.Mb(8,"app-form"),a.Pb()),2&e&&(a.zb(4),a.ic("hidden",!t.currentStep),a.zb(2),a.ic("ngIf",t.form))},directives:[o.t,Be],encapsulation:2}),e})(),children:[]}];let De=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[r.h.forChild(Ae)],r.h]}),e})(),Ze=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},providers:[B,O,N],imports:[[o.c,n.a,De]]}),e})()},mrSG:function(e,t,i){"use strict";function o(e,t,i,o){return new(i||(i=Promise))((function(n,r){function c(e){try{s(o.next(e))}catch(t){r(t)}}function a(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))}i.d(t,"a",(function(){return o}))}}]);