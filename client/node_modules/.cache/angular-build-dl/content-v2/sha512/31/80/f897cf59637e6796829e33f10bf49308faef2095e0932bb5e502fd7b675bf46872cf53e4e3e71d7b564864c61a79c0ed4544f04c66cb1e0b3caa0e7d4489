function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"D5/R":function(e,t,i){"use strict";i.r(t),i.d(t,"CertifiedFormsModule",(function(){return ot}));var n=i("ofXK"),o=i("M0ag"),r=i("tyNb"),a=i("ey9i"),c=i("fXoL"),s=i("mrSG"),d=i("AytR"),l=i("5eHb"),u=i("aNQE"),p=i("3Pt+"),f=i("TYhg"),_=["emailInput"],b=["conditions"],m=["cardField"];function h(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",15),c.Qb(1,"div",16),c.Qb(2,"div",17),c.Qb(3,"div",18),c.Qb(4,"div",19),c.Qb(5,"span",20),c.zc(6),c.Pb(),c.Qb(7,"span",21),c.zc(8," Descarga inmediata en formatos Word y PDF "),c.Pb(),c.Pb(),c.Qb(9,"div",22),c.zc(10),c.Pb(),c.Pb(),c.Qb(11,"div",23),c.Qb(12,"div",24),c.Qb(13,"label",25),c.Zb("click",(function(){return c.rc(i),c.dc().setHireLawyer()})),c.Mb(14,"input",26),c.Qb(15,"span"),c.zc(16,"Consulta con abogado (30 min)"),c.Pb(),c.Pb(),c.Qb(17,"div",27),c.Zb("click",(function(){return c.rc(i),c.dc().hide_lawyer_explanation=!1})),c.zc(18,"M\xe1s informaci\xf3n"),c.Pb(),c.Pb(),c.Qb(19,"div",28),c.Qb(20,"span"),c.zc(21),c.Pb(),c.Pb(),c.Pb(),c.Qb(22,"div",29),c.Qb(23,"div",30),c.Qb(24,"button",31),c.Zb("click",(function(){return c.rc(i),c.dc().hide_lawyer_explanation=!0})),c.Qb(25,"span",32),c.zc(26,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(27,"div",33),c.Qb(28,"p"),c.zc(29,"Dispondr\xe1 de uno de nuestros abogados durante 30 minutos por tel\xe9fono. Le podr\xe1 plantear dudas relativas a este contrato y a otros temas."),c.Pb(),c.Qb(30,"p"),c.zc(31,"En el caso de que el abogado necesite recabar informaci\xf3n para contestar mejor a sus preguntas, de esos 30 minutos se tomar\xe1 un tiempo para hacerlo y le llamar\xe1 para contestar a sus preguntas."),c.Pb(),c.Qb(32,"p"),c.zc(33,"El abogado le enviar\xe1 un correo electr\xf3nico en las pr\xf3ximas 24 horas al realizar el pago para concertar una cita telef\xf3nica cuando mejor le convenga y poder cuadrar horarios."),c.Pb(),c.Pb(),c.Pb(),c.Qb(34,"div",34),c.Qb(35,"span",35),c.zc(36,"Total:"),c.Pb(),c.Qb(37,"span",36),c.zc(38),c.Pb(),c.Pb(),c.Qb(39,"div",37),c.Qb(40,"span"),c.Mb(41,"img",38),c.Pb(),c.Qb(42,"span"),c.Qb(43,"a",39),c.Mb(44,"img",40),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.dc();c.zb(6),c.Bc(" ",n.form.title," "),c.zb(4),c.Bc(" ",n.form.amount," \u20ac "),c.zb(4),c.ic("checked",n.hire_lawyer),c.zb(7),c.Bc(" ",n.lawyer_price," \u20ac "),c.zb(1),c.ic("hidden",n.hide_lawyer_explanation),c.zb(16),c.Bc(" ",n.form.amount+(n.hire_lawyer?n.lawyer_price:0)," euros ")}}function v(e,t){if(1&e){var i=c.Rb();c.Qb(0,"label",49),c.zc(1," \xbfTienes cuenta? "),c.Qb(2,"a",54),c.Zb("click",(function(){return c.rc(i),c.dc(2).goToAuth()})),c.zc(3,"Inicia sesi\xf3n"),c.Pb(),c.Pb()}}function g(e,t){1&e&&c.Mb(0,"br")}function y(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",41),c.Qb(1,"div",42),c.Qb(2,"h1",43),c.zc(3,"Direcci\xf3n de correo para recibir el documento"),c.Pb(),c.Mb(4,"label",44),c.Qb(5,"input",45,46),c.Zb("ngModelChange",(function(e){return c.rc(i),c.dc().email=e})),c.Pb(),c.yc(7,v,4,0,"label",47),c.yc(8,g,1,0,"br",48),c.Qb(9,"div",49),c.Qb(10,"label",50),c.Qb(11,"input",51,52),c.Zb("ngModelChange",(function(e){return c.rc(i),c.dc().conditionsChecked=e})),c.Pb(),c.Qb(13,"span"),c.zc(14,"Acepto las condiciones generales de venta "),c.Qb(15,"a",53),c.zc(16,"(leer las CGV)"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.dc();c.zb(5),c.ic("ngModel",n.email),c.zb(2),c.ic("appShowAuthed",!1),c.zb(1),c.ic("appShowAuthed",!0),c.zb(3),c.ic("ngModel",n.conditionsChecked)}}function S(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",59),c.Qb(1,"label",60),c.Qb(2,"div",61),c.Mb(3,"img",62),c.Mb(4,"img",63),c.Pb(),c.Qb(5,"div",64),c.Qb(6,"input",65),c.Zb("change",(function(){return c.rc(i),c.dc(2).onPaymentMethodSelected("card")})),c.Pb(),c.zc(7," con tarjeta "),c.Pb(),c.Pb(),c.Qb(8,"label",66),c.Qb(9,"div",61),c.Mb(10,"img",67),c.Pb(),c.Qb(11,"div",64),c.Qb(12,"input",68),c.Zb("change",(function(){return c.rc(i),c.dc(2).onPaymentMethodSelected("paypal")})),c.Pb(),c.zc(13," con paypal "),c.Pb(),c.Pb(),c.Pb()}}function w(e,t){if(1&e){var i=c.Rb();c.Qb(0,"form",69),c.Qb(1,"div",70),c.Qb(2,"label",71),c.zc(3,"Nombre"),c.Pb(),c.Qb(4,"input",72),c.Zb("ngModelChange",(function(e){return c.rc(i),c.dc(2).cardholdersName=e})),c.Pb(),c.Qb(5,"div",73),c.Qb(6,"div"),c.Qb(7,"label",74),c.zc(8,"Fecha v\xe1lida"),c.Pb(),c.Mb(9,"div",75,76),c.Qb(11,"small",77),c.zc(12,"Fecha de expiraci\xf3n inv\xe1lida"),c.Pb(),c.Pb(),c.Qb(13,"div"),c.Qb(14,"label",78),c.zc(15,"CVV / CVC *"),c.Pb(),c.Mb(16,"div",79,80),c.Qb(18,"small",77),c.zc(19,"CVV Inv\xe1lido"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(20,"div",81),c.Qb(21,"label",82),c.zc(22,"N\xfamero de la tarjeta"),c.Pb(),c.Mb(23,"div",83,84),c.Qb(25,"small",77),c.zc(26,"N\xfamero inv\xe1lido"),c.Pb(),c.Qb(27,"span",85),c.zc(28,"* El c\xf3digo CVV o CVC es un grupo de 3 o 4 n\xfameros situado en el reverso de la tarjeta de cr\xe9dito."),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.dc(2);c.zb(4),c.ic("ngModel",n.cardholdersName)}}function P(e,t){1&e&&(c.Qb(0,"div",86),c.Mb(1,"div",87),c.Pb())}function k(e,t){if(1&e&&(c.Qb(0,"div",55),c.yc(1,S,14,0,"div",56),c.yc(2,w,29,1,"form",57),c.yc(3,P,2,0,"div",58),c.Pb()),2&e){var i=c.dc();c.zb(1),c.ic("ngIf",!1===i.loadingPayment),c.zb(1),c.ic("ngIf",!1===i.loadingPayment&&"card"===i.paymentMethod),c.zb(1),c.ic("ngIf","paypal"===i.paymentMethod)}}function I(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",88),c.Qb(1,"h2"),c.zc(2),c.Pb(),c.Qb(3,"div",34),c.Qb(4,"span",89),c.zc(5),c.Pb(),c.Qb(6,"span",90),c.zc(7),c.Pb(),c.Pb(),c.Qb(8,"p",91),c.zc(9,"Recibir\xe1s un mensaje a "),c.Qb(10,"strong"),c.zc(11),c.Pb(),c.zc(12," con tu factura as\xed como los documentos. Durante los pr\xf3ximos 15 d\xedas podr\xe1s modificar el formulario de nuevo sin tener que pagar y volver a descargarlo, una vez terminado el plazo caducar\xe1."),c.Pb(),c.Qb(13,"div",92),c.Qb(14,"h3"),c.zc(15,"Descarga ahora"),c.Pb(),c.Qb(16,"span",93),c.Zb("click",(function(){return c.rc(i),c.dc().downloadWord()})),c.Pb(),c.Qb(17,"span",94),c.Zb("click",(function(){return c.rc(i),c.dc().downloadPdf()})),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.dc();c.zb(2),c.Bc("Transacci\xf3n: ",n.transactionId,""),c.zb(3),c.Ac(n.form.title),c.zb(2),c.Bc("",n.form.amount+(n.hire_lawyer?n.lawyer_price:0)," \u20ac"),c.zb(4),c.Ac(n.email)}}var Q=function(e){return{opacity:e}};function R(e,t){if(1&e){var i=c.Rb();c.Qb(0,"button",95),c.Zb("click",(function(){return c.rc(i),c.dc().moveStep("previous")})),c.zc(1,"Anterior"),c.Pb()}if(2&e){var n=c.dc();c.xc("display","cart"===n.steps[n.currentStep].type?"none":"block"),c.ic("ngStyle",c.lc(4,Q,"cart"===n.steps[n.currentStep].type?0:1))("disabled","cart"===n.steps[n.currentStep].type)}}function C(e,t){if(1&e){var i=c.Rb();c.Qb(0,"button",96),c.Zb("click",(function(){return c.rc(i),c.dc().exitModal.emit()})),c.zc(1,"Anterior"),c.Pb()}}function x(e,t){if(1&e){var i=c.Rb();c.Qb(0,"button",96),c.Zb("click",(function(){return c.rc(i),c.dc().exitModal.emit()})),c.zc(1,"Anterior"),c.Pb()}}function E(e,t){if(1&e){var i=c.Rb();c.Qb(0,"button",97),c.Zb("click",(function(){return c.rc(i),c.dc().moveStep("next")})),c.zc(1,"Siguiente"),c.Pb()}if(2&e){var n=c.dc();c.ic("ngStyle",c.lc(2,Q,"finish"===n.steps[n.currentStep].type?0:1))("disabled","finish"===n.steps[n.currentStep].type)}}function z(e,t){if(1&e){var i=c.Rb();c.Qb(0,"button",98),c.Zb("click",(function(){return c.rc(i),c.dc().onSubmit()})),c.Qb(1,"strong",99),c.zc(2,"PAGAR"),c.Pb(),c.Pb()}}var T,M,L,F,B=function(e){return{"checkout-panel__body__progress-bar__step__active":e}},N=((T=function(){function e(t,i,n,o,r,a,s){_classCallCheck(this,e),this.userService=t,this.checkoutService=i,this.formService=n,this.commonsService=o,this.convertService=r,this.router=a,this.toastr=s,this.formPaid=new c.n,this.exitModal=new c.n,this.downloadPdfOutput=new c.n,this.downloadWordOutput=new c.n,this.currentStep=0,this.loadingPayment=!0,this.idsOfFields=["card-element","expirationDate","cvv"],this.paymentMethod="card",this.paypalButtonCreated=!1,this.hide_lawyer_explanation=!0,this.hire_lawyer=!1,this.lawyer_price=29,this.steps=[{type:"cart",stepNum:0},{type:"login",stepNum:1},{type:"payment",stepNum:2},{type:"finish",stepNum:3}]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.isAuthenticated.subscribe((function(t){e.email=t?e.userService.getCurrentUser().email:""})),this.form.fields[this.form.fields.length-1]&&(this.currentStep=this.form.fields[this.form.fields.length-1].checkoutProcess.phase,"payment"===this.steps[this.currentStep].type&&(this.currentStep=this.currentStep-1)),this.form.fields[0]&&this.form.fields[0].hire_lawyer&&(this.hire_lawyer=this.form.fields[0].hire_lawyer),this.commonsService.isBrowser()&&(this.stripe=Stripe(d.a.stripe_key))}},{key:"moveStep",value:function(e){"next"===e?this.validateBeforeNextStep()&&(this.currentStep+=1):"previous"===e&&(this.currentStep-=1),this.form.fields[this.form.fields.length-1].checkoutProcess.phase=this.currentStep,this.paymentProcess()}},{key:"validateBeforeNextStep",value:function(){if("login"===this.steps[this.currentStep].type){if(""===this.email)return this.emailInput.nativeElement.style.borderBottom="3px solid red",this.toastr.error("Email no puede estar vac\xedo","Email vac\xedo",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),!1;if(!this.conditions.nativeElement.checked)return this.toastr.error("Debe aceptar las condiciones de venta","Aceptar",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),!1}return!0}},{key:"goToAuth",value:function(){window.sessionStorage&&(window.sessionStorage[this.form.title]=JSON.stringify(this.form),this.router.navigate(["/auth/login"],{queryParams:{formPath:this.router.url.substring(this.router.url.lastIndexOf("/")+1)}}))}},{key:"onSubmit",value:function(){this.payWithCard()}},{key:"onPaymentMethodSelected",value:function(e){this.paymentMethod=e,"card"===this.paymentMethod?this.paymentProcess():"paypal"===this.paymentMethod&&this.createPaypalButton()}},{key:"setHireLawyer",value:function(){this.hire_lawyer=!this.hire_lawyer,this.form.fields[0].hire_lawyer=this.hire_lawyer}},{key:"paymentProcess",value:function(){var e=this;"payment"===this.steps[this.currentStep].type?(this.commonsService.toggleSpinner(),this.loadingPayment=!1,this.checkoutService.getToken(this.form.id,this.hire_lawyer).subscribe((function(t){e.commonsService.toggleSpinner(),e.clientSecret=t.clientSecret;var i=e.stripe.elements(),n={base:{fontSize:"16px",fontFamily:"Lato",fontWeight:"300",color:"rgba(46, 46, 46, 0.8)","::placeholder":{transition:"transition: 100ms linear",fontWeight:"300",fontFamily:"Lato",color:"#4ECDC4"},":focus":{borderColor:"#77db77",borderBottom:"3px solid #77db77"},"input:focus":{"border-color":"#77db77","border-bottom":"3px solid #77db77"}},invalid:{fontFamily:"Arial, sans-serif",color:"#fa755a",iconColor:"#fa755a"}};e.cardNumber=i.create("cardNumber",{style:n}),e.cardExpiry=i.create("cardExpiry",{style:n}),e.cardCvc=i.create("cardCvc",{style:n}),e.cardNumber.mount("#card-element"),e.cardExpiry.mount("#expirationDate"),e.cardCvc.mount("#cvv"),[e.cardNumber,e.cardExpiry,e.cardCvc].forEach((function(t,i){var n=document.getElementById(e.idsOfFields[i]);t.on("focus",(function(){n.classList.add("hosted-fields-stripe__focused")})),t.on("blur",(function(){n.classList.remove("hosted-fields-stripe__focused")})),t.on("change",(function(e){e.error?(n.classList.add("hosted-fields-stripe__invalid"),n.nextElementSibling.hidden=!1):(n.classList.remove("hosted-fields-stripe__invalid"),n.nextElementSibling.hidden=!0)}))}))}))):this.loadingPayment=!0}},{key:"payWithCard",value:function(){var e=this;this.commonsService.toggleSpinner(),this.stripe.confirmCardPayment(this.clientSecret,{payment_method:{card:this.cardNumber,billing_details:{name:this.cardholdersName}}}).then((function(t){e.commonsService.toggleSpinner(),t.error?e.toastr.error(t.error.message,"Error en el pago",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}):e.checkoutService.pay(JSON.stringify(e.form.fields),e.email,t.paymentIntent.id,e.form.id,e.paymentMethod,e.hire_lawyer).subscribe((function(t){t.transaction?(e.moveStep("next"),e.onPaymentCompleted(t.transaction.transactionId),e.toastr.success("Pago completado","Finalizado",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})):e.commonsService.toggleSpinner()}))}))}},{key:"onPaymentCompleted",value:function(e){var t=this;this.transactionId=e,this.formService.getPaidCertifiedForm(e).subscribe((function(i){i.certifiedForm.transactionId=e,t.formPaid.emit(i.certifiedForm)}))}},{key:"createPaypalButton",value:function(){var e=this;this.commonsService.toggleSpinner(),this.checkoutService.getPaypalOrder(this.form.id,this.hire_lawyer).subscribe((function(t){e.paypalButton(t.orderID)}),(function(t){e.commonsService.toastMessage("error","Estamos teniendo problemas con el servicio de pago con paypal temporalmente","Paypal"),e.commonsService.toggleSpinner()}))}},{key:"paypalButton",value:function(e){var t=this;paypal.Buttons({style:{layout:"horizontal",size:"large",shape:"pill",tagline:!0},createOrder:function(){return e},onApprove:function(e,i){return Object(s.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.commonsService.toggleSpinner(),e.next=3,i.order.capture();case 3:t=e.sent,this.checkoutService.pay(JSON.stringify(this.form.fields),this.email,t.id,this.form.id,this.paymentMethod,this.hire_lawyer).subscribe((function(e){e.transaction?(n.moveStep("next"),n.onPaymentCompleted(e.transaction.transactionId),n.toastr.success("Pago completado","Finalizado",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),n.commonsService.toggleSpinner()):n.commonsService.toggleSpinner()}));case 5:case"end":return e.stop()}}),e,this)})))},onError:function(e){console.log(e)}}).render(document.getElementById("paypal-button")),setTimeout((function(){t.commonsService.toggleSpinner()}),2e3)}},{key:"downloadWord",value:function(){this.downloadWordOutput.emit()}},{key:"downloadPdf",value:function(){this.downloadPdfOutput.emit()}}]),e}()).\u0275fac=function(e){return new(e||T)(c.Lb(a.w),c.Lb(a.c),c.Lb(a.k),c.Lb(a.e),c.Lb(a.g),c.Lb(r.d),c.Lb(l.b))},T.\u0275cmp=c.Fb({type:T,selectors:[["app-checkout"]],viewQuery:function(e,t){var i;1&e&&(c.Dc(_,!0),c.Dc(b,!0),c.Dc(m,!0)),2&e&&(c.oc(i=c.ac())&&(t.emailInput=i.first),c.oc(i=c.ac())&&(t.conditions=i.first),c.oc(i=c.ac())&&(t.cardField=i.first))},inputs:{form:"form"},outputs:{formPaid:"formPaid",exitModal:"exitModal",downloadPdfOutput:"downloadPdfOutput",downloadWordOutput:"downloadWordOutput"},decls:18,vars:18,consts:[[1,"modal__content__top","modal__content__top--privacy"],[1,"checkout-panel__body__progress-bar"],[1,"checkout-panel__body__progress-bar__step","checkout-panel__body__progress-bar__step__active"],[1,"checkout-panel__body__progress-bar__step",3,"ngClass"],["id","modal-middle-privacy",1,"modal__content__modal-middle","modal__content__modal-middle--privacy",2,"border-bottom","none"],[1,"modal__content__modal-middle__container"],["class","checkout-panel__body__invoice",4,"ngIf"],["class","checkout-panel__body__email",4,"ngIf"],["class","payment-container",4,"ngIf"],["class","checkout-panel__body__success",4,"ngIf"],[1,"modal__content__modal-bottom","modal__content__modal-bottom--privacy","checkout-panel__footer"],["class","btn back-btn",3,"ngStyle","display","disabled","click",4,"ngIf"],["class","btn back-btn",3,"click",4,"ngIf"],["class","btn next-btn",3,"ngStyle","disabled","click",4,"ngIf"],["class","btn next-btn secondaryC-background-color",3,"click",4,"ngIf"],[1,"checkout-panel__body__invoice"],[1,"checkout-panel__body__invoice__container"],[1,"checkout-panel__body__invoice__text"],[1,"checkout-panel__body__invoice__text__doc"],[1,"checkout-panel__body__invoice__text__doc__title"],[1,"checkout-panel__body__invoice__text__doc__title__contract"],[1,"checkout-panel__body__invoice__text__doc__title__more"],[1,"checkout-panel__body__invoice__text__doc__price"],[1,"checkout-panel__body__invoice__text__lawyer"],[1,"checkout-panel__body__invoice__text__lawyer__description"],["for","hire",3,"click"],["type","checkbox","name","hire_lawyer","id","hire_lawyer",1,"filled-in",3,"checked"],[1,"checkout-panel__body__invoice__text__lawyer__more",3,"click"],[1,"checkout-panel__body__invoice__text__lawyer__precio"],[1,"checkout-panel__body__invoice__text__more-info-lawyer","fade-in",3,"hidden"],[1,"checkout-panel__body__invoice__text__more-info-lawyer__close"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"checkout-panel__body__invoice__text__more-info-lawyer__content"],[1,"checkout-panel__body__invoice__text__total"],[1,"checkout-panel__body__invoice__text__total__right"],[1,"checkout-panel__body__invoice__text__total__left"],[1,"checkout-panel__body__invoice__text__more-info"],["src","/assets/images/ssl-secure-en.png","alt","secure payment"],["href","https://stripe.com/"],["src","/assets/images/stripe-logo.png"],[1,"checkout-panel__body__email"],[1,"checkout-panel__body__email__container"],[1,"checkout-panel__body__email__container__title"],["for","email"],["type","email","name","email","id","name","placeholder","Email",3,"ngModel","ngModelChange"],["emailInput",""],["class","checkout-panel__body__email__container__message",4,"appShowAuthed"],[4,"appShowAuthed"],[1,"checkout-panel__body__email__container__message"],["for","conditions"],["type","checkbox","name","conditions","id","conditions",1,"filled-in",3,"ngModel","ngModelChange"],["conditions",""],["routerLink","/static/cgv",1,"trigger"],["href","javascript:void(0)",3,"click"],[1,"payment-container"],["class","checkout-panel__body__payment-method",4,"ngIf"],["class","checkout-panel__body__input-fields","id","payment-form",4,"ngIf"],["style","height: 200px; margin-left: auto;margin-right:auto; display: flex;align-items: center;",4,"ngIf"],[1,"checkout-panel__body__payment-method"],["for","card",1,"checkout-panel__body__payment-method__method","card"],[1,"checkout-panel__body__payment-method__method__card-logos"],["src","https://designmodo.com/demo/checkout-panel/img/visa_logo.png"],["src","https://designmodo.com/demo/checkout-panel/img/mastercard_logo.png"],[1,"checkout-panel__body__payment-method__method__radio-input"],["id","card","type","radio","name","payment","value","card","checked","",3,"change"],["for","paypal",1,"checkout-panel__body__payment-method__method","paypal"],["src","https://designmodo.com/demo/checkout-panel/img/paypal_logo.png"],["id","paypal","type","radio","name","payment","value","paypal",3,"change"],["id","payment-form",1,"checkout-panel__body__input-fields"],[1,"checkout-panel__body__input-fields__column-1"],["for","cardholder-name","name","cardholderName",1,"hosted-field--label"],["type","text","id","cardholder","placeholder","P. ej: Juan P\xe9rez \xc1lvarez","name","cardholderName",1,"name-custom-input",3,"ngModel","ngModelChange"],[1,"checkout-panel__body__input-fields__small-inputs"],["for","expirationDate"],["id","expirationDate",1,"hosted-fields-stripe"],["dateField",""],["hidden","",1,"secondary-color"],["for","cvv"],["id","cvv","name","cvv",1,"hosted-fields-stripe"],["cvv",""],[1,"checkout-panel__body__input-fields__column-2"],["for","number"],["id","card-element",1,"hosted-fields-stripe"],["cardField",""],[1,"info"],[2,"height","200px","margin-left","auto","margin-right","auto","display","flex","align-items","center"],["id","paypal-button",2,"width","300px"],[1,"checkout-panel__body__success"],[1,"checkout-panel__body__invoice__text__total__right","total-success"],[1,"checkout-panel__body__invoice__text__total__left","total-success"],[1,"checkout-panel__body__success__message"],[1,"checkout-panel__body__success__download"],[1,"icon","icon-file-word-solid","trigger",3,"click"],[1,"icon","icon-file-pdf-solid",3,"click"],[1,"btn","back-btn",3,"ngStyle","disabled","click"],[1,"btn","back-btn",3,"click"],[1,"btn","next-btn",3,"ngStyle","disabled","click"],[1,"btn","next-btn","secondaryC-background-color",3,"click"],[2,"text-shadow","1px 1px 4px #000000"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Mb(2,"div",2),c.Mb(3,"div",3),c.Mb(4,"div",3),c.Mb(5,"div",3),c.Pb(),c.Pb(),c.Qb(6,"div",4),c.Qb(7,"div",5),c.yc(8,h,45,6,"div",6),c.yc(9,y,17,4,"div",7),c.yc(10,k,4,3,"div",8),c.yc(11,I,18,4,"div",9),c.Pb(),c.Pb(),c.Qb(12,"div",10),c.yc(13,R,2,6,"button",11),c.yc(14,C,2,0,"button",12),c.yc(15,x,2,0,"button",12),c.yc(16,E,2,4,"button",13),c.yc(17,z,3,0,"button",14),c.Pb()),2&e&&(c.zb(3),c.ic("ngClass",c.lc(12,B,t.steps[t.currentStep].stepNum>0)),c.zb(1),c.ic("ngClass",c.lc(14,B,t.steps[t.currentStep].stepNum>1)),c.zb(1),c.ic("ngClass",c.lc(16,B,t.steps[t.currentStep].stepNum>2)),c.zb(3),c.ic("ngIf","cart"===t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","login"===t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","payment"===t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","finish"===t.steps[t.currentStep].type),c.zb(2),c.ic("ngIf","finish"!==t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","cart"===t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","finish"===t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","payment"!==t.steps[t.currentStep].type),c.zb(1),c.ic("ngIf","payment"===t.steps[t.currentStep].type&&"card"===t.paymentMethod))},directives:[n.q,n.t,u.a,p.c,p.q,p.t,f.a,p.a,r.g,p.G,p.r,p.s,n.w],encapsulation:2}),T),O=i("2Vo4"),A=i("/uUt"),D=((M=function(){function e(){_classCallCheck(this,e),this.currentFormSubject=new O.a({}),this.currentForm=this.currentFormSubject.asObservable().pipe(Object(A.a)())}return _createClass(e,[{key:"setForm",value:function(e){this.currentFormSubject.next(Object.assign({},e))}},{key:"getCurrentForm",value:function(){return this.currentFormSubject.value}}]),e}()).\u0275fac=function(e){return new(e||M)},M.\u0275prov=c.Hb({token:M,factory:M.\u0275fac}),M),Z=i("KlD3"),H=((F=function(){function e(t,i){_classCallCheck(this,e),this.commonsService=t,this.convertService=i,this.scrollToelement=!1}return _createClass(e,[{key:"init",value:function(e){var t=this;return this.createEditorFromURI("fillForm","editorContainer",e),new Promise((function(e,i){var n=setInterval((function(){window.editor&&window.editor.getEditorSession()&&document.getElementsByTagName("office:text").length&&(t.originalDocumentBodyClone=document.getElementsByTagName("office:text")[0].cloneNode(!0),clearInterval(n),e("Document ready"))}),20)}))}},{key:"destroy",value:function(){this.commonsService.isBrowser()&&(Z.a(),window.removeEventListener("resize",this.resizeEvent))}},{key:"createEditorFromURI",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editorContainer",i=arguments.length>2?arguments[2]:void 0,n=atob(i.split(",")[1]),o=i.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(n.length),a=new Uint8Array(r),c=0;c<n.length;c++)a[c]=n.charCodeAt(c);var s=new Blob([r],{type:o}),d=URL.createObjectURL(s);window.DOCUMENTOURL=d,Z.c(e,t)}},{key:"getEditorSession",value:function(){return Z.f()}},{key:"saveUri",value:function(){var e=new FileReader;return new Promise((function(t,i){Z.e().getDocumentAsByteArray((function(i,n){if(i)alert(i);else{var o=new Blob([n.buffer],{type:"application/vnd.oasis.opendocument.text"});e.readAsDataURL(o),e.onloadend=function(){t(e.result)}}}))}))}},{key:"resizeDocumentContainer",value:function(){this.resizeEvent=function(){setTimeout((function(){document.getElementById("webodfeditor-editor1").style.height="100%",document.getElementById("webodfeditor-editor1").style.width="100%",Z.d()}),100)},window.addEventListener("resize",this.resizeEvent),Z.d()}},{key:"buildDocument",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.currentDocumentBodyClone=this.originalDocumentBodyClone.cloneNode(!0),i?(this.currentDocumentBodyClone=this.documentBodyCloneJustForReplacements.cloneNode(!0),this.currentDocumentBodyClone.querySelectorAll(".highlight-disapear").forEach((function(e){e.classList.remove("highlight-disapear"),e.classList.remove("focused")}))):this.structuralChanges(e),this.replacements(e),document.getElementsByTagName("office:text")[0].parentElement.replaceChild(this.currentDocumentBodyClone.cloneNode(!0),document.getElementsByTagName("office:text")[0]),this.getEditorSession().getOdfCanvas().refreshSize(),t&&this.scrollToElementWithClass("focused")}},{key:"scrollToElementWithClass",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=document.querySelector("."+e);if(t){var i=document.getElementById("webodfeditor-canvascontainer1"),n=i.clientHeight/2,o=t.getBoundingClientRect().top;i.scrollTo({top:i.scrollTop+o-n,behavior:"smooth"})}}},{key:"dateToSpanishFormat",value:function(e){var t=new Date(e),i="";return e&&(i=t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})),i}},{key:"showIndicationInsideText",value:function(e,t){var i=document.querySelector("[data-identifier=".concat(e,"]")),n=document.createElement("div");n.innerHTML='<div class="indicator-content not-selectable">\n                        <button id="close-indication">&#10006;</button>\n                        <span class="not-selectable" style="margin:auto; width:100%">'.concat(t,"\n                        </span>\n                    </div>"),n.style.top=i.getBoundingClientRect().top.toString(),n.style.left=i.getBoundingClientRect().left.toString(),n.classList.add("indicator"),n.classList.add("smooth-intro"),n.classList.add("not-selectable"),i.appendChild(n),window.addEventListener("click",(function e(t){window.innerWidth>885?t.target.classList.contains("icon-info-circle-solid")||t.target.classList.contains("indication")?document.querySelectorAll(".indicator").length>=2&&(n.parentNode.removeChild(n),window.removeEventListener("click",e)):(n.parentNode.removeChild(n),window.removeEventListener("click",e)):"scrollToTop"!==t.target.id&&"close-indication"!==t.target.id||(n.parentNode.removeChild(n),window.removeEventListener("click",e))})),this.scrollToElementWithClass("indicator",n.offsetHeight)}},{key:"structuralChanges",value:function(e){var t=this;e.forEach((function(e){"iRadioC"===e.type?t.buildForRadioC(e):"iCheckbox"===e.type?t.buildForCheckbox(e):"iForEach"===e.type&&t.buildForEach(e)})),this.documentBodyCloneJustForReplacements=this.currentDocumentBodyClone.cloneNode(!0)}},{key:"buildForEach",value:function(e){var t=this;e.content.forEach((function(i){var n=t.findword(i.wordToReplace);if(n.textContent===i.wordToReplace)i.modifiedReplacements.slice().reverse().forEach((function(o,r){var a,c=new RegExp(e.wordToReplace,"g");if(r!==i.modifiedReplacements.length-1){var s=n.cloneNode(!0);n.parentNode.insertBefore(s,n.nextSibling),e.forEachFocused&&function(){var e=document.createElement("span");for(e.classList.add("highlight-disapear","focused"),s.childNodes.forEach((function(t){e.appendChild(t)}));s.firstChild;)s.removeChild(s.firstChild);s.appendChild(e)}(),a=s}else a=n;(a=t.findExactContainingElement(e.wordToReplace,a)).innerHTML=a.innerHTML.replace(c,o)})),i.modifiedExtraReplacements.slice().reverse().forEach((function(e,i){e.forEach((function(e){var i=t.findword(e[0].identifier);e.slice().reverse().forEach((function(n,o){var r,a=new RegExp(n.identifier,"g");if(o!==e.length-1){var c=i.cloneNode(!0);i.parentNode.insertBefore(c,i.nextSibling),r=t.findExactContainingElement(n.identifier,c)}else r=t.findExactContainingElement(n.identifier,i);r.innerHTML=r.innerHTML.replace(a,n.replacement)}))}))}));else if(n.textContent.includes(i.wordToReplace)&&n.childElementCount<=1){var o=i.modifiedReplacements.slice().reverse(),r=new RegExp(e.wordToReplace,"g"),a=n.textContent,c=a.slice(0,a.indexOf(i.wordToReplace)),s=a.slice(a.indexOf(i.wordToReplace),a.length).replace(r,"");o.forEach((function(e,t){s=e+s})),n.innerHTML="<span>".concat(c+s,"</span>")}})),e.forEachFocused=!1}},{key:"buildForRadioC",value:function(e){var t,i=this,n=this.findword(e.wordToReplace),o=new RegExp(e.wordToReplace,"g");for(e.radios.forEach((function(n){n.checked&&(t=e.isFocused||e.radioCfocused?'<span class="highlight-disapear focused">'.concat(n.replacement,"</span>"):n.replacement,e.extraReplacements.forEach((function(e,t){var o,r=new RegExp(e.wordToReplace,"g"),a=i.findword(e.wordToReplace),c=i.findExactContainingElement(e.wordToReplace,a);n.extraReplacements.forEach((function(t){t.insideId===e.insideId&&(o=t.replacement)})),c.innerHTML=c.innerHTML.replace(r,o)})))})),n=this.findExactContainingElement(e.wordToReplace,n);null!==n.firstElementChild&&!this.allElementsAreBr(n);)n=n.firstElementChild;n.innerHTML=n.innerHTML.replace(o,t),e.radioCfocused=!1}},{key:"allElementsAreBr",value:function(e){for(var t,i=!0,n=e.children;t<n.length;t++)"BR"!==n[t].tagName&&(i=!1);return n.length||(i=!1),i}},{key:"buildForCheckbox",value:function(e){var t=this.findword(e.wordToReplace),i=e.replacement;e.checkboxes.forEach((function(t){if(e.replacement.includes(t.wordToReplace))if(t.checked){var n=new RegExp(t.wordToReplace,"g");i=i.replace(n,t.replacement)}else{var o=new RegExp(t.wordToReplace,"g");i=i.replace(o,"")}})),t.innerHTML===e.wordToReplace&&(t.innerHTML=i)}},{key:"replacements",value:function(e){var t=this;e.forEach((function(e){if("iText"===e.type||"iDate"===e.type||"iNumber"===e.type){var i=t.findAllwords(e.wordToReplace),n=new RegExp(e.wordToReplace,"g");i.forEach((function(i){var o=i,r=e.replacement;o.innerHTML!==e.wordToReplace&&(o=t.findExactContainingElement(e.wordToReplace,o)),"iDate"===e.type&&(r=t.dateToSpanishFormat(e.replacement)),e.isEmpty&&(""!==e.replacement?(e.isEmpty.prepend&&(r.slice(0,e.isEmpty.prepend.length)===e.isEmpty.prepend&&(r=r.slice(e.isEmpty.prepend.length,r.length)),r=e.isEmpty.prepend+r),e.isEmpty.append&&(r.slice(-e.isEmpty.append.length)===e.isEmpty.append&&(r=r.slice(0,-e.isEmpty.prepend.length)),r+=e.isEmpty.append)):e.isEmpty.defaultValue&&(r=e.isEmpty.defaultValue)),o&&(o.innerHTML=o.innerHTML.replace(n,'<span class="'.concat(e.isFocused?"highlight focused":"",'" data-identifier="').concat(e.wordToReplace,'">').concat(r,"</span>")))}))}else if("iRadioB"===e.type){var o=t.findAllwords(e.wordToReplace),r=new RegExp(e.wordToReplace,"g");o.forEach((function(i){e.radios.forEach((function(n){if(n.checked){n.replacement;var o=i;o.innerHTML!==e.wordToReplace&&(o=t.findExactContainingElement(e.wordToReplace,o)),o&&(o.innerHTML=o.innerHTML.replace(r,'<span class=" '.concat(e.isFocused?"highlight focused":"",'" data-identifier="').concat(e.wordToReplace,'">').concat(e.replacement,"</span>")))}}))}))}e.extraReplacements&&e.extraReplacements.length&&e.extraReplacements.forEach((function(e){var i=t.findAllwords(e.wordToReplace),n=new RegExp(e.wordToReplace,"g");i.forEach((function(i){var o=i,r=e.replacement;o.innerHTML!==e.wordToReplace&&(o=t.findExactContainingElement(e.wordToReplace,o)),o&&(o.innerHTML=o.innerHTML.replace(n,'<span class="'.concat(e.isFocused?"highlight focused":"",'" data-identifier="').concat(e.wordToReplace,'">').concat(r,"</span>")))}))}))}))}},{key:"findword",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentDocumentBodyClone,i=t.childNodes,n=0;n<i.length;n++)if(!this.elementIsExcluded(i[n])&&(i[n].innerHTML.includes(e)||i[n].textContent.includes(e)))return i[n]}},{key:"findAllwords",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentDocumentBodyClone,i=[],n=t.childNodes,o=0;o<n.length;o++)this.elementIsExcluded(n[o])||n[o].innerHTML.includes(e)&&i.push(n[o]);return i}},{key:"findExactContainingElement",value:function(e,t){for(var i=t;i.childNodes&&i.childNodes.length>0&&i.innerHTML.includes(e);)i.childNodes.forEach((function(t){"#text"!==t.nodeName?t.innerHTML.includes(e)&&(i=t):t.textContent.includes(e)&&(i=t)}));return"#text"===i.nodeName&&(i=i.parentNode),i=this.fixSomeCases(e,i)}},{key:"fixSomeCases",value:function(e,t){var i=t;return e===t.textContent&&"text:p"===i.tagName&&2===i.childElementCount&&"text:span"===i.firstElementChild.tagName&&"text:span"===i.firstElementChild.nextElementSibling.tagName&&(i.firstElementChild.innerHTML="<span>".concat(e,"</span>"),i.firstElementChild.nextElementSibling.innerHTML=""),t}},{key:"elementIsExcluded",value:function(e){return["office:text","text:sequence-decls","text:sequence-decl","draw:frame","draw:image","office:annotation","office:annotation-end","dc:creator","dc:date"].includes(e.nodeName)}},{key:"downloadWord",value:function(e,t){var i=this;this.commonsService.toggleSpinner(),this.saveUri().then((function(t){i.convertService.toWord(e,t).subscribe((function(e){for(var t=atob(e.word.split(",")[1]),n=e.word.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),r=new Uint8Array(o),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);var c=new Blob([o],{type:n}),s=URL.createObjectURL(c);console.log(s);var d=document.createElement("a");d.href=s,d.download="word.doc",d.click(),i.commonsService.toggleSpinner()}))}))}},{key:"downloadPdf",value:function(e,t){var i=this;this.commonsService.toggleSpinner(),this.saveUri().then((function(t){i.convertService.toPdf(e,t).subscribe((function(e){for(var t=atob(e.pdf.split(",")[1]),n=e.pdf.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),r=new Uint8Array(o),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);var c=new Blob([o],{type:n}),s=URL.createObjectURL(c);console.log(s);var d=document.createElement("a");d.href=s,d.download="document.pdf",d.click(),i.commonsService.toggleSpinner()}))}))}}]),e}()).\u0275fac=function(e){return new(e||F)(c.Vb(a.e),c.Vb(a.g))},F.\u0275prov=c.Hb({token:F,factory:F.\u0275fac}),F),q=((L=function(){function e(t,i){_classCallCheck(this,e),this.documentCreatorService=t,this.commonsService=i}return _createClass(e,[{key:"init",value:function(e){this.steps=e,this.cacheSteps=JSON.parse(JSON.stringify(this.steps))}},{key:"refreshCache",value:function(){this.cacheSteps=JSON.parse(JSON.stringify(this.steps))}},{key:"setInitialState",value:function(){var e=this;if(!this.steps[0].inited)for(var t=0;t<5;t++)e.steps.forEach((function(t){switch((t=JSON.parse(JSON.stringify(t))).type){case"start":t.inited=!0;break;case"iText":case"iNumber":case"iDate":e.input(t.replacement,t.wordToReplace,!1);break;case"iForEach":e.buildForEach(t.value,t.wordToReplace,!1);break;case"iRadioB":t.radios.forEach((function(i){i.checked&&e.onInputRadioBSelected(i.radioId,t.wordToReplace,!1,!0)}));break;case"iRadioC":var i=!0;t.radios.forEach((function(n){n.checked&&(i=!1,e.onInputRadioCSelected(n.radioId,t.wordToReplace,!1))})),i&&e.onInputRadioCSelected(t.defaultRadioId,t.wordToReplace,!1)}}));this.buildDocument(!1)}},{key:"buildDocument",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&this.checkCache(),this.documentCreatorService.buildDocument(this.steps,e,t)}},{key:"checkCache",value:function(){var e=this;this.steps.forEach((function(t){e.checkIfIsOfType(["iText","iNumber","iDate","iRadioB"],t)&&e.cacheSteps.forEach((function(i){t.wordToReplace===i.wordToReplace&&("iRadioB"===t.type?i.radios.forEach((function(i){i.checked&&e.onInputRadioBSelected(i.radioId,t.wordToReplace,!1,!0)})):t.replacement=i.replacement)}))}))}},{key:"checkIfIsOfType",value:function(e,t){return e.forEach((function(e){if(t.type===e)return!0})),!1}},{key:"input",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.findStep(t,!0,"wordToReplace"),r=o.step,a=o.index;r.replacement=e,r.isFocused=!0,"iNumber"===r.type&&this.rulesForInumber(r,a),i&&this.buildDocument(!0,n)}},{key:"findStep",value:function(e,t,i){var n,o;return this.steps.forEach((function(r,a){r[i]===e?(n=r,o=a):t&&(r.isFocused=!1)})),{step:n,index:o}}},{key:"rulesForInumber",value:function(e,t){var i=this;e.rules&&e.rules.length&&e.rules.forEach((function(t){"extraReplacementToCharacter"===t.rulename&&e.extraReplacements&&i.extraReplacementToCharacter(e,t),"extraReplacementAletras"===t.rulename&&e.extraReplacements&&i.extraReplacementAletras(e,t)}))}},{key:"extraReplacementToCharacter",value:function(e,t){e.extraReplacements.forEach((function(i,n){i.wordToReplace===t.wordToReplace&&e.extraReplacements.splice(n,1)})),e.extraReplacements.push({wordToReplace:t.wordToReplace,replacement:this.commonsService.precioALetras(e.replacement,{plural:"euros",singular:"euro",centPlural:"centavos",centSingular:"centavo"})})}},{key:"extraReplacementAletras",value:function(e,t){e.extraReplacements.forEach((function(i,n){i.wordToReplace===t.wordToReplace&&e.extraReplacements.splice(n,1)})),e.extraReplacements.push({wordToReplace:t.wordToReplace,replacement:this.commonsService.numeroALetras(e.replacement)})}},{key:"buildForEach",value:function(e,t){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[],c=[],s=this.findStep(t,!1,"wordToReplace"),d=s.step,l=s.index;d.forEachFocused=o,d.value=e,this.cleanPreviouslyAddedSteps(l,d.identifier),d.content.forEach((function(t,n){t.modifiedReplacements=[],t.modifiedExtraReplacements=[];var o=[];t.extraReplacements.forEach((function(){o.push([])}));for(var r=function(r){var s=t.replacementOriginal;t.extraReplacements.forEach((function(e,t){o[t].push({identifier:e.identifier,replacement:e.replacementOriginal})})),t.subSteps.forEach((function(u,p){var f=d.identifier+u.identifier+r.toString()+p.toString();s=s.replace(u.identifier,f),t.extraReplacements.forEach((function(e,t){var i=u.extraReplacements[t],n=o[t][r];n.wordToReplace=e.identifier+r.toString()+p.toString();var a=d.identifier+i.identifier+r.toString()+p.toString();n.replacement=n.replacement.replace(i.identifier,a),i.wordToReplace=a,i.identifier=a}));var _=JSON.parse(JSON.stringify(u));i.cacheSteps.forEach((function(e){e.wordToReplace==f&&((_=JSON.parse(JSON.stringify(e))).cached=!0)})),_.identifier=f,_.wordToReplace=f,_.hasIndex&&(_.question=1===parseInt(e)?_.questionOriginal.replace("->(index)",""):_.questionOriginal.replace("->(index)",r+1)),i.steps.splice(l+1+p+r*t.subSteps.length+parseInt(e)*n*t.subSteps.length,0,_),"iRadioB"===_.type&&a.push(_),"iRadioC"===_.type&&(_.radios.forEach((function(e){e.subSteps.forEach((function(t){var i=f+t.identifier,n=new RegExp(t.identifier,"g");e.replacementOriginal=e.replacementOriginal.replace(n,i),t.wordToReplace=i,t.identifier=i}))})),c.push(_))})),t.modifiedReplacements.push(s)},s=0;s<parseInt(e);s++)r(s);t.modifiedExtraReplacements.push(o)})),a.forEach((function(e){e.radios.forEach((function(t){t.checked&&i.onInputRadioBSelected(t.radioId,e.wordToReplace,!1,!0)}))})),n&&(c.forEach((function(e){e.cached?e.radios.forEach((function(t){t.checked&&i.onInputRadioCSelected(t.radioId,e.wordToReplace,!1)})):i.onInputRadioCSelected(e.defaultRadioId,e.wordToReplace,!1)})),this.buildDocument(!0,!1,r))}},{key:"cleanPreviouslyAddedSteps",value:function(e,t){for(;this.steps[e+1]&&this.steps[e+1].wordToReplace.includes(t);)this.steps.splice(e+1,1)}},{key:"onInputRadioBSelected",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.findStep(t,!1,"wordToReplace"),r=o.step;r.isFocused=!n,r.radios.forEach((function(t){t.radioId===e?(r.replacement=t.replacementOriginal,t.checked=!0,r.extraReplacements&&r.extraReplacements.forEach((function(e,i){e.replacement=t.extraReplacements[i].replacement}))):t.checked=!1})),i&&this.buildDocument()}},{key:"onInputRadioCSelected",value:function(e,t){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[],c=[],s=[],d=[],l=function(e,t,n){i.cleanPreviouslyAddedSteps(t,e.wordToReplace);var o=n.replacementOriginal;n.extraReplacements.forEach((function(e){e.replacement=e.replacementOriginal})),n.subSteps.forEach((function(r,l){r.wordToReplace=e.identifier+r.identifier;var u=new RegExp(r.identifier,"g");o=o.replace(u,r.wordToReplace),n.extraReplacements.forEach((function(e){e.replacement=e.replacement.replace(r.identifier,r.wordToReplace)})),"iCheckbox"===r.type&&r.checkboxes.forEach((function(e){e.checked=!1})),"iRadioC"===r.type&&(r.inheritFromRadioC=r.wordToReplace,r.radios.forEach((function(e){e.subSteps.forEach((function(t){var i=r.wordToReplace+t.identifier,n=new RegExp(t.identifier,"g");e.replacementOriginal=e.replacementOriginal.replace(n,i),e.extraReplacements.forEach((function(t){e.fixContratoTrabjo&&(t.replacementOriginal=t.replacementOriginal.replace(n,i))})),t.wordToReplace=i,t.identifier=i,t.inherited=!0}))})),d.push(r)),"iForEach"===r.type&&(r.content.forEach((function(e){var t=new RegExp(e.wordToReplace,"g");e.replacementOriginal=e.replacementOriginal.replace(t,r.wordToReplace),e.subSteps.forEach((function(e){e.wordToReplace=e.wordToReplace.replace(t,r.wordToReplace),e.identifier=e.identifier.replace(t,r.wordToReplace)})),e.wordToReplace=r.wordToReplace,e.identifier=r.wordToReplace})),a.push(r)),"iNumber"===r.type&&(r.rules.forEach((function(e){if("extraReplacementToCharacter"===e.rulename){var t="i"+Math.random().toString(36).substring(7)+e.identifier;e.wordToReplace=t;var i=new RegExp(e.identifier,"g");o=o.replace(i,t)}})),r.rules.length&&c.push(r)),"iRadioB"===r.type&&s.push(r),i.steps.splice(t+1+l,0,r)})),n.replacement=o,n.checked=!0};this.steps.forEach((function(i,n){(i.identifier===t||i.inheritFromRadioC&&i.inheritFromRadioC===t)&&i.radios.forEach((function(t){t.radioId===e?l(i,n,t):t.checked=!1})),i.wordToReplace===t?(i.isFocused=!0,i.radioCfocused=o):i.isFocused=!1})),a.forEach((function(e){i.buildForEach(e.value,e.wordToReplace,!1,!0)})),d.forEach((function(e){e.radios.forEach((function(t){t.checked&&i.onInputRadioCSelected(t.radioId,e.wordToReplace,!1)}))})),c.forEach((function(e){i.input(e.replacement,e.wordToReplace,!1)})),s.forEach((function(e){e.radios.forEach((function(t){t.checked&&i.onInputRadioBSelected(t.radioId,e.wordToReplace,!1,!0)}))})),n&&this.buildDocument(!0,!1,r)}},{key:"onInputCheckboxSelected",value:function(e,t,i){var n=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.steps.forEach((function(o,r){if(o.wordToReplace===t){var a=o.replacementOriginal;o.checkboxes.forEach((function(t){if(t.wordToReplace=o.wordToReplace+t.identifier,a=a.replace(t.identifier,t.wordToReplace),t.identifier===e){for(var c=n.steps.length-r,s=0;s<c;s++)n.steps[r+1+s]&&n.steps[r+1+s].wordToReplace.includes(t.identifier)&&n.steps.splice(r+1+s,1);if(i){var d=t.replacementOriginal;t.subSteps.forEach((function(e,i){e.wordToReplace=t.wordToReplace+e.identifier,d=d.replace(e.identifier,e.wordToReplace),n.steps.splice(r+1+i,0,e)})),t.replacement=d}t.checked=i}})),o.replacement=a,o.rules&&o.rules.length&&o.rules.forEach((function(e){if("noneIsChecked"===e.condition){var t=!1;o.checkboxes.forEach((function(e){e.checked&&(t=!0)})),t?e.isFulfilled=!1:(o.replacement=e.replacement,e.isFulfilled=!0)}}))}})),o&&this.buildDocument()}},{key:"getStepsModel",value:function(){return this.steps}}]),e}()).\u0275fac=function(e){return new(e||L)(c.Vb(H),c.Vb(a.e))},L.\u0275prov=c.Hb({token:L,factory:L.\u0275fac}),L);function j(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",12),c.Qb(1,"span",13),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}var J=function(e){return{borderBottom:e}};function W(e,t){if(1&e){var i=c.Rb();c.Qb(0,"input",14,15),c.Zb("keyup",(function(e){return c.rc(i),c.dc().onInput(e)}))("click",(function(e){return c.rc(i),c.dc().onInput(e)})),c.Pb()}if(2&e){var n=c.dc();c.ic("value",n.step.replacement)("placeholder",n.step.placeholder?n.step.placeholder:"")("ngStyle",c.lc(3,J,n.inputInvalid?"3px solid red":""))}}function U(e,t){if(1&e){var i=c.Rb();c.Qb(0,"textarea",16,15),c.Zb("keyup",(function(e){return c.rc(i),c.dc().onInput(e)}))("click",(function(e){return c.rc(i),c.dc().onInput(e)})),c.Pb()}if(2&e){var n=c.dc();c.ic("value",n.step.replacement)("placeholder",n.step.placeholder?n.step.placeholder:"")("ngStyle",c.lc(3,J,n.inputInvalid?"3px solid red":""))}}function V(e,t){1&e&&(c.Qb(0,"span",17),c.zc(1," Obligatorio * "),c.Pb())}var $,G=(($=function(){function e(t){_classCallCheck(this,e),this.stepModelService=t,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showIndication",value:function(){this.emitIndication.emit()}},{key:"onInput",value:function(e){this.stepModelService.input(e.srcElement.value,this.step.wordToReplace,!0,!0)}}]),e}()).\u0275fac=function(e){return new(e||$)(c.Lb(q))},$.\u0275cmp=c.Fb({type:$,selectors:[["app-i-text"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:13,vars:5,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],["type","text",3,"value","placeholder","ngStyle","keyup","click",4,"ngIf"],["cols","30","rows","6",3,"value","placeholder","ngStyle","keyup","click",4,"ngIf"],[1,"form-creator__fields-area__field__bottom"],["class","form-creator__fields-area__field__bottom__mandatory-label",4,"ngIf"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["type","text",3,"value","placeholder","ngStyle","keyup","click"],["input",""],["cols","30","rows","6",3,"value","placeholder","ngStyle","keyup","click"],[1,"form-creator__fields-area__field__bottom__mandatory-label"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,j,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.yc(9,W,2,5,"input",8),c.yc(10,U,2,5,"textarea",9),c.Pb(),c.Qb(11,"div",10),c.yc(12,V,2,0,"span",11),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(1),c.ic("ngIf","textarea"!==t.step.subType),c.zb(1),c.ic("ngIf","textarea"===t.step.subType),c.zb(2),c.ic("ngIf",t.step.mandatory))},directives:[n.t,n.w],encapsulation:2}),$);function K(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",13),c.Qb(1,"span",14),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}function X(e,t){1&e&&(c.Qb(0,"span",15),c.zc(1," Obligatorio * "),c.Pb())}var Y,ee=function(e){return{borderBottom:e}},te=((Y=function(){function e(t){_classCallCheck(this,e),this.stepModelService=t,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showIndication",value:function(){this.emitIndication.emit()}},{key:"onInput",value:function(e,t){this.stepModelService.input(e,t,!0,!0)}}]),e}()).\u0275fac=function(e){return new(e||Y)(c.Lb(q))},Y.\u0275cmp=c.Fb({type:Y,selectors:[["app-i-date"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:14,vars:7,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__date-container"],[1,"form-creator__fields-area__field__middle__question"],["type","date",3,"value","ngStyle","change"],["input",""],[1,"form-creator__fields-area__field__bottom"],["class","form-creator__fields-area__field__bottom__mandatory-label",4,"ngIf"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],[1,"form-creator__fields-area__field__bottom__mandatory-label"]],template:function(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,K,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"div",7),c.Qb(8,"span",8),c.zc(9),c.Pb(),c.Qb(10,"input",9,10),c.Zb("change",(function(){c.rc(i);var e=c.pc(11);return t.onInput(e.value,t.step.wordToReplace)})),c.Pb(),c.Pb(),c.Pb(),c.Qb(12,"div",11),c.yc(13,X,2,0,"span",12),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(4),c.Ac(t.step.question),c.zb(1),c.ic("value",t.step.replacement)("ngStyle",c.lc(5,ee,t.inputInvalid?"3px solid red":"")),c.zb(3),c.ic("ngIf",t.step.mandatory))},directives:[n.t,n.w],encapsulation:2}),Y),ie=["input"];function ne(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",12),c.Qb(1,"span",13),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}function oe(e,t){1&e&&(c.Qb(0,"span",14),c.zc(1," Obligatorio * "),c.Pb())}var re,ae=function(e){return{borderBottom:e}},ce=((re=function(){function e(t,i){_classCallCheck(this,e),this.stepModelService=t,this.toastr=i,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onInputNumberChanged",value:function(e){var t=e.srcElement.value;isNaN(t)?(this.toastr.error("N\xfamero no v\xe1lido","Debe ser un n\xfamero",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.input.nativeElement.style.borderBottom="3px solid red"):(this.input.nativeElement.style.borderBottom="",t.includes(",")&&(t=t.replace(",","")),t.includes(".")&&(t=t.replace(".","")),this.stepModelService.input(t,this.step.wordToReplace,!0,!0))}},{key:"showIndication",value:function(){this.emitIndication.emit()}}]),e}()).\u0275fac=function(e){return new(e||re)(c.Lb(q),c.Lb(l.b))},re.\u0275cmp=c.Fb({type:re,selectors:[["app-i-number"]],viewQuery:function(e,t){var i;1&e&&c.Dc(ie,!0),2&e&&c.oc(i=c.ac())&&(t.input=i.first)},inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:13,vars:8,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],["type","text",3,"value","placeholder","ngStyle","keyup","click"],["input",""],[1,"form-creator__fields-area__field__bottom"],["class","form-creator__fields-area__field__bottom__mandatory-label",4,"ngIf"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],[1,"form-creator__fields-area__field__bottom__mandatory-label"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,ne,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.Qb(9,"input",8,9),c.Zb("keyup",(function(e){return t.onInputNumberChanged(e)}))("click",(function(e){return t.onInputNumberChanged(e)})),c.Pb(),c.Pb(),c.Qb(11,"div",10),c.yc(12,oe,2,0,"span",11),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(1),c.ic("value",t.step.replacement)("placeholder",t.step.placeholder?t.step.placeholder:"")("ngStyle",c.lc(6,ae,t.inputInvalid?"3px solid red":"")),c.zb(3),c.ic("ngIf",t.step.mandatory))},directives:[n.t,n.w],encapsulation:2}),re);function se(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",11),c.Qb(1,"span",12),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}function de(e,t){if(1&e){var i=c.Rb();c.Qb(0,"p"),c.Qb(1,"label"),c.Qb(2,"input",13),c.Zb("change",(function(){c.rc(i);var e=t.$implicit,n=c.dc();return n.onInputSelected(e.radioId,n.step.wordToReplace)})),c.Pb(),c.Qb(3,"span"),c.zc(4),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=t.$implicit;c.zb(2),c.ic("checked",n.checked),c.zb(2),c.Ac(n.label)}}var le,ue=((le=function(){function e(t,i){_classCallCheck(this,e),this.stepModelService=t,this.documentCreatorService=i,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showIndication",value:function(){this.emitIndication.emit()}},{key:"onInputSelected",value:function(e,t){this.stepModelService.onInputRadioBSelected(e,t)}}]),e}()).\u0275fac=function(e){return new(e||le)(c.Lb(q),c.Lb(H))},le.\u0275cmp=c.Fb({type:le,selectors:[["app-i-radio-b"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:12,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"form-creator__fields-area__field__middle__radio-input--fill-form","radio"],[4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["name","group1","type","radio","value","Valor de la pregunta numero 1",1,"with-gap",3,"checked","change"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,se,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.Qb(9,"div",8),c.yc(10,de,5,2,"p",9),c.Pb(),c.Pb(),c.Mb(11,"div",10),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(2),c.ic("ngForOf",t.step.radios))},directives:[n.t,n.s],encapsulation:2}),le);function pe(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",11),c.Qb(1,"span",12),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}function fe(e,t){if(1&e){var i=c.Rb();c.Qb(0,"p"),c.Qb(1,"label"),c.Qb(2,"input",13),c.Zb("change",(function(){c.rc(i);var e=t.$implicit,n=c.dc();return n.onRadioCchanged(e.radioId,n.step.wordToReplace)})),c.Pb(),c.Qb(3,"span"),c.zc(4),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=t.$implicit;c.zb(2),c.ic("checked",n.checked),c.zb(2),c.Ac(n.label)}}var _e,be=((_e=function(){function e(t,i){_classCallCheck(this,e),this.stepModelService=t,this.documentCreatorService=i,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showIndication",value:function(){this.emitIndication.emit()}},{key:"onRadioCchanged",value:function(e,t){this.stepModelService.refreshCache(),this.stepModelService.onInputRadioCSelected(e,t,!0,!0,!0)}}]),e}()).\u0275fac=function(e){return new(e||_e)(c.Lb(q),c.Lb(H))},_e.\u0275cmp=c.Fb({type:_e,selectors:[["app-i-radio-c"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:12,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"form-creator__fields-area__field__middle__radio-input--fill-form","radio"],[4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["name","group1","type","radio","value","Valor de la pregunta numero 1",1,"with-gap",3,"checked","change"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,pe,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.Qb(9,"div",8),c.yc(10,fe,5,2,"p",9),c.Pb(),c.Pb(),c.Mb(11,"div",10),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(2),c.ic("ngForOf",t.step.radios))},directives:[n.t,n.s],encapsulation:2}),_e);function me(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",12),c.Qb(1,"span",13),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}var he,ve=((he=function(){function e(t,i){_classCallCheck(this,e),this.stepModelService=t,this.documentCreatorService=i,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showIndication",value:function(){this.emitIndication.emit()}},{key:"onInput",value:function(e,t){this.stepModelService.refreshCache(),this.stepModelService.buildForEach(e,t,!0,!0,!0)}}]),e}()).\u0275fac=function(e){return new(e||he)(c.Lb(q),c.Lb(H))},he.\u0275cmp=c.Fb({type:he,selectors:[["app-i-for-each"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:16,vars:6,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"slider-range-container"],["type","range",1,"range-slider",3,"min","max","value","change"],["input",""],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"]],template:function(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,me,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.Qb(9,"div",8),c.Qb(10,"input",9,10),c.Zb("change",(function(){c.rc(i);var e=c.pc(11);return t.onInput(e.value,t.step.wordToReplace)})),c.Pb(),c.Qb(12,"p"),c.Qb(13,"span"),c.zc(14),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Mb(15,"div",11),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.pc(11);c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(2),c.jc("min",t.step.min),c.jc("max",t.step.max),c.ic("value",t.step.value),c.zb(4),c.Ac(n.value)}},directives:[n.t],encapsulation:2}),he);function ge(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",12),c.Qb(1,"span",13),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}function ye(e,t){if(1&e&&(c.Qb(0,"option",14),c.zc(1),c.Pb()),2&e){var i=t.$implicit;c.jc("value",i.radioId),c.ic("selected",i.checked),c.zb(1),c.Bc(" ",i.label," ")}}var Se,we=((Se=function(){function e(t,i){_classCallCheck(this,e),this.stepModelService=t,this.documentCreatorService=i,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onInputSelectChanged",value:function(e){"iRadioC"===this.step.type?this.stepModelService.onInputRadioCSelected(e.target.value,this.step.wordToReplace):"iRadioB"===this.step.type&&this.stepModelService.onInputRadioBSelected(e.target.value,this.step.wordToReplace)}},{key:"showIndication",value:function(){this.emitIndication.emit()}}]),e}()).\u0275fac=function(e){return new(e||Se)(c.Lb(q),c.Lb(H))},Se.\u0275cmp=c.Fb({type:Se,selectors:[["app-i-select"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:13,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"input-select"],[1,"browser-default",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],[3,"value","selected"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,ge,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.Qb(9,"div",8),c.Qb(10,"select",9),c.Zb("change",(function(e){return t.onInputSelectChanged(e)})),c.yc(11,ye,2,3,"option",10),c.Pb(),c.Pb(),c.Pb(),c.Mb(12,"div",11),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(3),c.ic("ngForOf",t.step.radios))},directives:[n.t,n.s,p.v,p.F],encapsulation:2}),Se);function Pe(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",12),c.Qb(1,"span",13),c.Zb("click",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb(),c.Pb()}}function ke(e,t){if(1&e){var i=c.Rb();c.Qb(0,"label"),c.Qb(1,"input",14,15),c.Zb("change",(function(){c.rc(i);var e=t.$implicit,n=c.pc(2),o=c.dc();return o.onInputCheckboxSelected(e.identifier,o.step.wordToReplace,n.checked)})),c.Pb(),c.Qb(3,"span"),c.zc(4),c.Pb(),c.Pb()}if(2&e){var n=t.$implicit;c.zb(1),c.ic("checked",n.checked),c.zb(3),c.Bc("",n.label,".")}}var Ie,Qe=((Ie=function(){function e(t,i){_classCallCheck(this,e),this.stepModelService=t,this.documentCreatorService=i,this.emitIndication=new c.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showIndication",value:function(){this.emitIndication.emit()}},{key:"onInputCheckboxSelected",value:function(e,t,i){this.stepModelService.onInputCheckboxSelected(e,t,i)}}]),e}()).\u0275fac=function(e){return new(e||Ie)(c.Lb(q),c.Lb(H))},Ie.\u0275cmp=c.Fb({type:Ie,selectors:[["app-i-checkbox"]],inputs:{step:"step",inputInvalid:"inputInvalid"},outputs:{emitIndication:"emitIndication"},decls:14,vars:3,consts:[[1,"form-creator__fields-area__middle__container","fade-in"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__field__field-area","form-creator__fields-area__field__field-area--input-text"],[1,"form-creator__fields-area__field__top","form-creator__fields-area__field__top--fill-form"],["class","indication",4,"ngIf"],[1,"form-creator__fields-area__field__middle"],[1,"form-creator__fields-area__field__middle__question"],[1,"form-creator__fields-area__field__middle__checkbox-input"],[4,"ngFor","ngForOf"],[1,"form-creator__fields-area__field__bottom"],[1,"form-creator__fields-area__field__bottom__mandatory-label"],[1,"indication"],[1,"icon","icon-info-circle-solid","trigger",3,"click"],["type","checkbox",1,"filled-in",3,"checked","change"],["input",""]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.yc(5,Pe,2,0,"div",5),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"span",7),c.zc(8),c.Pb(),c.Qb(9,"div",8),c.yc(10,ke,5,2,"label",9),c.Pb(),c.Pb(),c.Qb(11,"div",10),c.Qb(12,"span",11),c.zc(13," Obligatorio * "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(5),c.ic("ngIf",t.step.indications&&t.step.indications.areIndications),c.zb(3),c.Ac(t.step.question),c.zb(2),c.ic("ngForOf",t.step.checkboxes))},directives:[n.t,n.s],encapsulation:2}),Ie),Re=["modal"],Ce=["modalEnd"],xe=["modalDownload"],Ee=["modalIndication"],ze=["input"],Te=["progressBar"];function Me(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",43),c.Qb(1,"div",44),c.Qb(2,"span",45),c.Qb(3,"div",46),c.Mb(4,"img",47),c.Pb(),c.Qb(5,"span",48),c.zc(6,"Silvia Camejo Alarc\xf3n"),c.Pb(),c.Pb(),c.Qb(7,"span",49),c.Qb(8,"span"),c.zc(9,"Actualizado:"),c.Pb(),c.zc(10),c.Pb(),c.Pb(),c.Qb(11,"div",50),c.Qb(12,"div",51),c.Qb(13,"span",52),c.Zb("click",(function(){c.rc(i);var e=c.dc(),t=c.pc(27);return e.toogleModal(t)})),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.dc();c.zb(10),c.Bc(" ",n.form.updated," ")}}function Le(e,t){if(1&e&&(c.Qb(0,"div",53),c.Qb(1,"div",54),c.Qb(2,"span",null,55),c.zc(4),c.Pb(),c.Pb(),c.Pb()),2&e){var i=c.dc();c.zb(2),c.xc("width",i.progresBarPercentage),c.zb(2),c.Ac(i.progresBarPercentage)}}function Fe(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",56),c.Qb(1,"div",57),c.Qb(2,"h3",58),c.zc(3),c.Pb(),c.Qb(4,"span",59),c.zc(5),c.Pb(),c.Qb(6,"button",60),c.Zb("click",(function(){c.rc(i);var e=c.dc(),t=c.pc(27);return e.toogleModal(t)})),c.zc(7," Rellenar formulario "),c.Pb(),c.Pb(),c.Pb()}if(2&e){var n=c.dc();c.zb(3),c.Bc(" ",n.steps[n.currentStep].title," "),c.zb(2),c.Bc(" ",n.steps[n.currentStep].description," ")}}function Be(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-text",61),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])("inputInvalid",n.inputInvalid)}}function Ne(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-date",61),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])("inputInvalid",n.inputInvalid)}}function Oe(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-number",61),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])("inputInvalid",n.inputInvalid)}}function Ae(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-for-each",62),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])}}function De(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-radio-b",62),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])}}function Ze(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-radio-c",62),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])}}function He(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-select",62),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])}}function qe(e,t){if(1&e){var i=c.Rb();c.Qb(0,"app-i-checkbox",62),c.Zb("emitIndication",(function(){return c.rc(i),c.dc().showIndication()})),c.Pb()}if(2&e){var n=c.dc();c.ic("step",n.steps[n.currentStep])}}function je(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",56),c.Qb(1,"div",63),c.Qb(2,"div",64),c.Qb(3,"div",65),c.Qb(4,"div",66),c.Mb(5,"span",67),c.Qb(6,"h1"),c.zc(7,"Finalizado"),c.Pb(),c.Qb(8,"button",68),c.Zb("click",(function(){return c.rc(i),c.dc().toogleCheckout()})),c.zc(9,"Descargar"),c.Pb(),c.Qb(10,"div",69),c.Mb(11,"span",70),c.Mb(12,"span",71),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}}function Je(e,t){1&e&&(c.Qb(0,"div",72),c.Qb(1,"div",73),c.Mb(2,"span",74),c.Qb(3,"span",75),c.zc(4,"1."),c.Pb(),c.Qb(5,"span",76),c.zc(6,"Elige un documento"),c.Pb(),c.Pb(),c.Qb(7,"div",73),c.Mb(8,"span",77),c.Qb(9,"span",75),c.zc(10,"2."),c.Pb(),c.Qb(11,"span",76),c.zc(12,"Rellena el formulario"),c.Pb(),c.Pb(),c.Qb(13,"div",73),c.Mb(14,"span",78),c.Qb(15,"span",75),c.zc(16,"3."),c.Pb(),c.Qb(17,"span",76),c.zc(18,"Gu\xe1rdalo e impr\xedmelo"),c.Pb(),c.Pb(),c.Pb())}function We(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",81),c.Zb("click",(function(){return c.rc(i),c.dc(2).moveStep("next")})),c.Qb(1,"span",83),c.zc(2,"Siguiente"),c.Pb(),c.Mb(3,"span",86),c.Pb()}}function Ue(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",79),c.Qb(1,"div",80),c.Qb(2,"div",81),c.Zb("click",(function(){return c.rc(i),c.dc().moveStep("previous")})),c.Mb(3,"span",82),c.Qb(4,"span",83),c.zc(5,"Anterior"),c.Pb(),c.Pb(),c.Qb(6,"div",84),c.Zb("click",(function(){return c.rc(i),c.dc().previewDocumentButton(!0)})),c.zc(7," Preview "),c.Qb(8,"span"),c.zc(9,"\u2b07"),c.Pb(),c.Pb(),c.yc(10,We,4,0,"div",85),c.Pb(),c.Pb()}if(2&e){var n=c.dc();c.zb(10),c.ic("ngIf","end"!==(null==n.steps[n.currentStep]?null:n.steps[n.currentStep].type))}}var Ve,$e=((Ve=function(){function e(t,i,n,o,r,c,s,d,l,u){_classCallCheck(this,e),this.stepModelService=t,this.commonsService=i,this.sharedService=n,this.documentCreatorService=o,this.formsService=r,this.toastr=c,this.checkoutService=s,this.route=d,this.metaService=l,this.slackService=u,this.form=new a.i,this.currentStep=0,this.progresBarPercentage="0%",this.steps=[],this.formAlreadyPaid=!1,this.indications={areIndications:!0,indicationsType:"outsideText",value:""},this.inputInvalid=!1,this.isNew=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.commonsService.isBrowser()&&(this.commonsService.toggleSpinner(),this.route.params.subscribe((function(t){e.route.queryParams.subscribe((function(i){i.transactionId?(e.formAlreadyPaid=!0,e.isNew=!1,e.formsService.getPaidCertifiedForm(i.transactionId).subscribe((function(i){if(i.certifiedForm){var n=i.certifiedForm;e.form.fields=JSON.parse(n.fields),e.steps=e.form.fields,e.form.title=n.title,e.form.uri=n.uri,e.form.id=t.id,e.form.amount=n.amount,e.form.topLabelTitle=n.topLabelTitle,e.form.information=n.information,e.form.updated=n.updated,e.setInitiaState()}else i.transactionNotFound?e.commonsService.toastMessage("error","Transaction Id does not exist","Transaction id not found"):i.formExpired&&e.commonsService.toastMessage("error","The period of 30 days to change the document has expired","Transaction expired")}))):window.sessionStorage&&window.sessionStorage[t.id]?(e.form=JSON.parse(window.sessionStorage[t.id]),e.steps=e.form.fields,e.formAlreadyPaid=e.form.alreadyPaid,e.isNew=!1,e.setInitiaState()):e.formsService.getCertifiedForm(t.id).subscribe((function(i){e.steps=i.steps,e.form.fields=e.steps,e.form.title=i.title,e.form.uri=i.uri,e.form.id=t.id,e.form.amount=i.amount,e.form.image=i.image,e.form.topLabelTitle=i.topLabelTitle,e.form.information=i.information,e.form.updated=i.updated,e.setInitiaState()}))}))})))}},{key:"ngAfterViewInit",value:function(){this.commonsService.resizeEditor(!1)}},{key:"ngOnDestroy",value:function(){this.documentCreatorService.destroy(),window.removeEventListener("resize",this.commonsService.resizeEditor.bind(this)),this.commonsService.setFormCreatorPlayground(!0)}},{key:"setInitiaState",value:function(){var e=this;this.stepModelService.init(this.form.fields),this.sharedService.setForm(this.form),this.form.fields.forEach((function(t,i){t.isCurrentStep&&(e.currentStep=i,e.updateProgressBarPercentage(),"end"===e.steps[e.currentStep].type&&e.steps[e.currentStep].checkoutProcess.isInited&&!e.formAlreadyPaid&&e.toogleModal(e.modalEnd.nativeElement))})),this.documentCreatorService.init(this.form.uri).then((function(t){e.commonsService.setFormCreatorPlayground(!1),e.commonsService.resizeEditor(!0),window.addEventListener("resize",e.commonsService.resizeEditor.bind(e)),e.documentCreatorService.resizeDocumentContainer(),e.stepModelService.buildDocument(!1),e.isNew&&e.stepModelService.setInitialState(),e.documentCreatorService.resizeEvent(),e.commonsService.toggleSpinner()})),this.skipInitialStep()}},{key:"skipInitialStep",value:function(){var e=this.commonsService.getPreviousUrl();e&&e.includes("/static/modelos")&&"start"===this.steps[this.currentStep].type&&this.moveStep("next")}},{key:"toogleModal",value:function(e){this.commonsService.toggleModal(e,!0)}},{key:"moveStep",value:function(e){"next"===e?this.validateBeforeNextStep(this.steps[this.currentStep])&&(this.steps[this.currentStep].isCurrentStep=!1,this.steps[this.currentStep+1].isCurrentStep=!0,this.currentStep+=1):"previous"===e&&(this.steps[this.currentStep].isCurrentStep=!1,this.steps[this.currentStep-1].isCurrentStep=!0,this.currentStep-=1),this.updateProgressBarPercentage(),"end"===this.steps[this.currentStep].type&&this.prepareForCheckout()}},{key:"validateBeforeNextStep",value:function(e){if(e.mandatory){if(""===e.replacement)return this.toastr.error("Este campo no puede estar vac\xedo","Campo obligatorio",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.inputInvalid=!0,!1;this.inputInvalid=!1}return!0}},{key:"updateProgressBarPercentage",value:function(){var e=this;this.progressBar&&this.currentStep?function(){for(var t=Math.round(e.currentStep/(e.steps.length-1)*100),i=parseInt(e.progresBarPercentage,10),n=t>i?t-i:i-t,o=function(n){setTimeout((function(){var o=t>i?i+n:i-n;e.progressBar.nativeElement.style.width=o+"%",e.progresBarPercentage=o+"%"}),10*n)},r=0;r<n+1;r++)o(r)}():this.progresBarPercentage=Math.round(this.currentStep/(this.steps.length-1)*100)+"%"}},{key:"showIndication",value:function(){var e=this.steps[this.currentStep];e.indications.areIndications&&("outsideText"===e.indications.indicationsType||window.innerWidth<885?(this.indications=e.indications,this.toogleModal(this.modalIndication.nativeElement)):this.documentCreatorService.showIndicationInsideText(e.wordToReplace,e.indications.value))}},{key:"prepareForCheckout",value:function(){this.form.fields=this.steps,this.sharedService.setForm(this.form)}},{key:"startCheckout",value:function(){this.steps[this.currentStep].checkoutProcess.isInited=!0,this.slackService.initedCheckout(this.steps[0].title,this.steps)}},{key:"onFormPaid",value:function(e){this.documentCreatorService.destroy(),window.removeEventListener("resize",this.commonsService.resizeEditor.bind(this)),this.formAlreadyPaid=!0,this.form.alreadyPaid=!0,this.form.uri=e.uri,this.form.fields=JSON.parse(e.fields),this.isNew=!1,this.setInitiaState(),this.commonsService.toggleSpinner(),this.sendEmail(e.transactionId)}},{key:"previewDocumentButton",value:function(e){this.commonsService.previewDocumentButton(e),this.documentCreatorService.resizeEvent()}},{key:"onExitPayment",value:function(){this.toogleModal(this.modalEnd.nativeElement)}},{key:"toogleCheckout",value:function(){this.formAlreadyPaid?this.toogleModal(this.modalDownload.nativeElement):(this.toogleModal(this.modalEnd.nativeElement),this.startCheckout())}},{key:"downloadWord",value:function(){this.documentCreatorService.downloadWord(this.form.id,this.form.uri)}},{key:"downloadPdf",value:function(){this.documentCreatorService.downloadPdf(this.form.id,this.form.uri)}},{key:"sendEmail",value:function(e){var t=this;setTimeout((function(){t.documentCreatorService.saveUri().then((function(i){t.checkoutService.sendMail(e,i).subscribe((function(e){console.log(e)}))}))}),1e3)}}]),e}()).\u0275fac=function(e){return new(e||Ve)(c.Lb(q),c.Lb(a.e),c.Lb(D),c.Lb(H),c.Lb(a.k),c.Lb(l.b),c.Lb(a.c),c.Lb(r.a),c.Lb(a.m),c.Lb(a.r))},Ve.\u0275cmp=c.Fb({type:Ve,selectors:[["app-form"]],viewQuery:function(e,t){var i;1&e&&(c.Dc(Re,!0),c.wc(Ce,!0),c.Dc(xe,!0),c.Dc(Ee,!0),c.Dc(ze,!0),c.Dc(Te,!0)),2&e&&(c.oc(i=c.ac())&&(t.modal=i.first),c.oc(i=c.ac())&&(t.modalEnd=i.first),c.oc(i=c.ac())&&(t.modalDownload=i.first),c.oc(i=c.ac())&&(t.modalIndication=i.first),c.oc(i=c.ac())&&(t.input=i.first),c.oc(i=c.ac())&&(t.progressBar=i.first))},decls:63,vars:17,consts:[[1,"form-creator__container"],["id","fields-area",1,"form-creator__fields-area"],[1,"form-creator__fields-area__container"],[1,"form-creator__fields-area__top"],["class","form-creator__fields-area__top__container",4,"ngIf"],["class","progress-container",4,"ngIf"],[1,"form-creator__fields-area__middle"],["class","form-creator__fields-area__middle__container",4,"ngIf"],[3,"step","inputInvalid","emitIndication",4,"ngIf"],[3,"step","emitIndication",4,"ngIf"],["class","form-creator__fields-area__bottom form-creator__fields-area__bottom--initial-screen",4,"ngIf"],["class","form-creator__fields-area__bottom",4,"ngIf"],["id","text-area",1,"form-creator__text-area"],["id","wodoautomatikdocs",2,"width","100%","height","100%","margin","0px","padding","0px"],["id","editorContainer",2,"width","100%","height","100%","margin","0px","padding","0px"],["id","scrollToTop",1,"button-filled","button-filled--preview-document",2,"display","none",3,"click"],[2,"font-size","20px"],[1,"modal"],["modal",""],[1,"modal__content","modal__content--privacy"],[1,"modal__content__top","modal__content__top--privacy"],[1,"text-center"],["id","modal-middle-privacy",1,"modal__content__modal-middle","modal__content__modal-middle--privacy"],[1,"modal__content__modal-middle__container"],[3,"innerHTML"],[1,"modal__content__modal-bottom","modal__content__modal-bottom--privacy"],["id","modal-button",1,"button-filled",3,"click"],["modalEnd",""],[1,"modal__content","modal__content--privacy",3,"form","formPaid","exitModal","downloadWordOutput","downloadPdfOutput"],["modalDownload",""],[1,"modal__content",2,"padding","2rem"],[1,"modal__content__modal-middle","modal__content__modal-middle--change-password"],[1,"download-documents-modal"],[1,"icon","icon-file-word-solid","trigger",3,"click"],[1,"icon","icon-file-pdf-solid",3,"click"],[1,"modal__content__modal-bottom"],["modalIndication",""],[1,"modal__content","modal__content--question-indication"],[1,"modal__content__top","modal__content__top--indication"],[1,"modal__content__modal-middle","modal__content__modal-middle--question-indication"],[1,"modal__content__modal-middle__container",3,"innerHTML"],[1,"new-modal-content__footer","new-modal-content__footer--indicactions"],[1,"btn","next-btn",3,"click"],[1,"form-creator__fields-area__top__container"],[1,"form-creator__fields-area__top__author-date"],[1,"form-creator__fields-area__top__author-date__author"],[1,"form-creator__fields-area__top__author-date__author__image-container"],["src","/assets/images/silvia-avatar.jpeg","alt","avatar"],["routerLink","/static/silvia-profile"],[1,"form-creator__fields-area__top__author-date__date"],[1,"form-creator__fields-area__top__before-start-button"],[1,"form-creator__fields-area__top__before-start-button__information-modal-icon","trigger"],[1,"icon","icon-info-solid",3,"click"],[1,"progress-container"],[1,"progress","progress-large"],["progressBar",""],[1,"form-creator__fields-area__middle__container"],[1,"form-creator__fields-area__middle__initial-screen"],[1,"form-creator__fields-area__middle__initial-screen__form-title"],[1,"form-creator__fields-area__middle__initial-screen__description"],[1,"button-filled","button-filled--start-form",3,"click"],[3,"step","inputInvalid","emitIndication"],[3,"step","emitIndication"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__end-step"],[1,"form-creator__fields-area__end-step__container"],[1,"form-creator__fields-area__end-step__check","icon","icon-check-circle-solid"],[1,"button-filled","button-filled--start-form","trigger",3,"click"],[1,"form-creator__fields-area__end-step__icons"],[1,"icon","icon-file-word-solid","trigger"],[1,"icon","icon-file-pdf-solid"],[1,"form-creator__fields-area__bottom","form-creator__fields-area__bottom--initial-screen"],[1,"form-creator__fields-area__bottom__step"],[1,"icon","icon-file-regular"],[1,"form-creator__fields-area__bottom__step__number"],[1,"form-creator__fields-area__bottom__step__description"],[1,"icon","icon-list-alt-regular"],[1,"icon","icon-print-solid"],[1,"form-creator__fields-area__bottom"],[1,"form-creator__fields-area__bottom__container"],[1,"form-creator__fields-area__bottom__arrow-button",3,"click"],[1,"icon","icon-chevron-left-solid"],[1,"form-creator__fields-area__bottom__arrow-button__label"],[1,"form-creator__fields-area__bottom__preview-button",3,"click"],["class","form-creator__fields-area__bottom__arrow-button",3,"click",4,"ngIf"],[1,"icon","icon-chevron-right-solid"]],template:function(e,t){if(1&e){var i=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.yc(4,Me,14,1,"div",4),c.yc(5,Le,5,3,"div",5),c.Pb(),c.Qb(6,"div",6),c.yc(7,Fe,8,2,"div",7),c.yc(8,Be,1,2,"app-i-text",8),c.yc(9,Ne,1,2,"app-i-date",8),c.yc(10,Oe,1,2,"app-i-number",8),c.yc(11,Ae,1,1,"app-i-for-each",9),c.yc(12,De,1,1,"app-i-radio-b",9),c.yc(13,Ze,1,1,"app-i-radio-c",9),c.yc(14,He,1,1,"app-i-select",9),c.yc(15,qe,1,1,"app-i-checkbox",9),c.yc(16,je,13,0,"div",7),c.Pb(),c.yc(17,Je,19,0,"div",10),c.yc(18,Ue,11,1,"div",11),c.Pb(),c.Pb(),c.Qb(19,"div",12),c.Qb(20,"div",13),c.Mb(21,"div",14),c.Pb(),c.Qb(22,"button",15),c.Zb("click",(function(){return t.previewDocumentButton(!1)})),c.zc(23,"Form "),c.Qb(24,"span",16),c.zc(25,"\u2191"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(26,"div",17,18),c.Qb(28,"div",19),c.Qb(29,"div",20),c.Qb(30,"h2",21),c.zc(31,"Indicaciones antes de comenzar el formulario"),c.Pb(),c.Pb(),c.Qb(32,"div",22),c.Qb(33,"div",23),c.Mb(34,"div",24),c.Pb(),c.Pb(),c.Qb(35,"div",25),c.Qb(36,"button",26),c.Zb("click",(function(){c.rc(i);var e=c.pc(27);return t.toogleModal(e),t.moveStep("next")})),c.zc(37,"Rellenar"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(38,"div",17,27),c.Qb(40,"app-checkout",28),c.Zb("formPaid",(function(e){return t.onFormPaid(e)}))("exitModal",(function(){return t.onExitPayment()}))("downloadWordOutput",(function(){return t.downloadWord()}))("downloadPdfOutput",(function(){return t.downloadPdf()})),c.Pb(),c.Pb(),c.Qb(41,"div",17,29),c.Qb(43,"div",30),c.Qb(44,"div",31),c.Qb(45,"div",23),c.Qb(46,"div",32),c.Qb(47,"span",33),c.Zb("click",(function(){return t.downloadWord()})),c.Pb(),c.Qb(48,"span",34),c.Zb("click",(function(){return t.downloadPdf()})),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(49,"div",35),c.Qb(50,"button",26),c.Zb("click",(function(){c.rc(i);var e=c.pc(42);return t.toogleModal(e)})),c.zc(51,"Cancelar"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(52,"div",17,36),c.Qb(54,"div",37),c.Qb(55,"div",38),c.Qb(56,"h2"),c.zc(57,"Indicaciones"),c.Pb(),c.Pb(),c.Qb(58,"div",39),c.Mb(59,"div",40),c.Pb(),c.Qb(60,"div",41),c.Qb(61,"button",42),c.Zb("click",(function(){c.rc(i);var e=c.pc(53);return t.toogleModal(e)})),c.zc(62,"Entendido"),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&e&&(c.zb(4),c.ic("ngIf","start"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","start"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(2),c.ic("ngIf","start"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","iText"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","iDate"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","iNumber"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","iForEach"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","iRadioB"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)),c.zb(1),c.ic("ngIf","iRadioC"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)),c.zb(1),c.ic("ngIf","iRadioC"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)||"iRadioB"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)&&"select"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].subType)),c.zb(1),c.ic("ngIf","iCheckbox"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","end"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","start"===(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(1),c.ic("ngIf","start"!==(null==t.steps[t.currentStep]?null:t.steps[t.currentStep].type)),c.zb(16),c.ic("innerHTML",t.form.information,c.sc),c.zb(6),c.ic("form",t.form),c.zb(19),c.ic("innerHTML",t.indications.value,c.sc))},directives:[n.t,N,r.e,G,te,ce,ve,ue,be,we,Qe],encapsulation:2}),Ve),Ge=["subMenu"],Ke=["loginModal"];function Xe(e,t){if(1&e&&(c.Qb(0,"li",8),c.zc(1),c.Pb()),2&e){var i=c.dc();c.zb(1),c.Bc(" ",i.form.topLabelTitle," ")}}var Ye,et,tt,it=[{path:":id",component:(Ye=function(){function e(t,i,n,o,r,c,s){_classCallCheck(this,e),this.commonsService=t,this.formsService=i,this.userService=n,this.sharedService=o,this.router=r,this.route=c,this.toastr=s,this.form=new a.i,this.originalForm=new a.i,this.currentStep=0,this.updatingForm=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.commonsService.addTags("certifiedForms"),this.sharedService.currentForm.subscribe((function(t){e.commonsService.isObjectEmpty(t)||(e.form=t,e.currentStep=t.currentStep)})),this.userService.isAuthenticated.subscribe((function(t){e.isAuth=!!t})),this.commonsService.isBrowser()&&window.addEventListener("unload",this.saveInSessionStorage.bind(this))}},{key:"ngOnDestroy",value:function(){this.saveInSessionStorage(),window.removeEventListener("unload",this.saveInSessionStorage)}},{key:"topMenuNav",value:function(e){this.commonsService.subMenuNav(e,this.subMenu.nativeElement)}},{key:"saveForm",value:function(){var e=this;this.isAuth?(this.form.type="Certified",this.validateForm(),this.formsService.save(this.form).subscribe((function(t){e.toastr.success("Has been saved",t.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})}),(function(t){console.log(t),e.toastr.error("Un error ha ocurrido. Int\xe9ntalo de nuevo","Error",{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})}))):(window.sessionStorage&&(window.sessionStorage[this.form.id]=JSON.stringify(this.form)),this.router.navigate(["/auth/login"],{queryParams:{formPath:this.router.url.substring(this.router.url.lastIndexOf("/")+1)}}))}},{key:"saveInSessionStorage",value:function(){window.sessionStorage&&(window.sessionStorage[this.form.id]=JSON.stringify(this.form))}},{key:"toogleModal",value:function(e){this.commonsService.toggleModal(e,!0)}},{key:"validateForm",value:function(){this.form.description="blabla",this.form.text="blaw"}}]),e}(),Ye.\u0275fac=function(e){return new(e||Ye)(c.Lb(a.e),c.Lb(a.k),c.Lb(a.w),c.Lb(D),c.Lb(r.d),c.Lb(r.a),c.Lb(l.b))},Ye.\u0275cmp=c.Fb({type:Ye,selectors:[["app-certified-forms"]],viewQuery:function(e,t){var i;1&e&&(c.Dc(Ge,!0),c.Dc(Ke,!0)),2&e&&(c.oc(i=c.ac())&&(t.subMenu=i.first),c.oc(i=c.ac())&&(t.loginModal=i.first))},decls:9,vars:2,consts:[[1,"sub-menu"],["subMenu",""],[1,"sub-menu__container","sub-menu__container--fill-form"],[1,"sub-menu__left-button","sub-menu__left-button--fill-form"],[1,"button-filled","button-filled--sub-menu-fill-form","icon","icon-save-solid",3,"hidden","click"],[1,"sub-menu__nav","sub-menu__nav--fill-form",2,"justify-content","center"],["class","sub-menu__nav__button sub-menu__nav__button--without-hover",4,"ngIf"],["id","form-creator",1,"form-creator"],[1,"sub-menu__nav__button","sub-menu__nav__button--without-hover"]],template:function(e,t){1&e&&(c.Qb(0,"div",0,1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"button",4),c.Zb("click",(function(){return t.saveForm()})),c.Pb(),c.Pb(),c.Qb(5,"ul",5),c.yc(6,Xe,2,1,"li",6),c.Pb(),c.Pb(),c.Pb(),c.Qb(7,"div",7),c.Mb(8,"app-form"),c.Pb()),2&e&&(c.zb(4),c.ic("hidden",!t.currentStep),c.zb(2),c.ic("ngIf",t.form))},directives:[n.t,$e],encapsulation:2}),Ye),children:[]}],nt=((tt=function e(){_classCallCheck(this,e)}).\u0275mod=c.Jb({type:tt}),tt.\u0275inj=c.Ib({factory:function(e){return new(e||tt)},imports:[[r.h.forChild(it)],r.h]}),tt),ot=((et=function e(){_classCallCheck(this,e)}).\u0275mod=c.Jb({type:et}),et.\u0275inj=c.Ib({factory:function(e){return new(e||et)},providers:[D,H,q],imports:[[n.c,o.a,nt]]}),et)},mrSG:function(e,t,i){"use strict";function n(e,t,i,n){return new(i||(i=Promise))((function(o,r){function a(e){try{s(n.next(e))}catch(t){r(t)}}function c(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))}i.d(t,"a",(function(){return n}))}}]);