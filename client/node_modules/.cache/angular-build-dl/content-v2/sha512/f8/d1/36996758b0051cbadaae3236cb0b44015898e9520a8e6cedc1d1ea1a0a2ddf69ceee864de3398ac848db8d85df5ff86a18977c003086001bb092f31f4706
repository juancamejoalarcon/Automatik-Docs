function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{OCXw:function(e,t,i){"use strict";i.r(t),i.d(t,"FillFormModule",(function(){return se}));var o=i("ofXK"),r=i("M0ag"),n=i("tyNb"),c=i("ey9i"),a=i("fXoL"),s=i("5eHb"),l=i("eZC8"),d=i("19fH"),f=i("boqk"),u=i("2kAz"),m=i("fbZM"),b=["formAreaDiv"],_=["automatikDocDiv"],p=["linkFormButton"],v=["progressBar"],g=["modal"],h=["modalDownload"],y=["subMenu"],P=function(e){return{disabled:e}};function S(e,t){if(1&e){var i=a.Rb();a.Qb(0,"button",52),a.Zb("click",(function(){return a.rc(i),a.dc().deleteForm()})),a.Pb()}if(2&e){var o=a.dc();a.ic("ngClass",a.lc(1,P,o.isDeleting))}}function Q(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",62),a.Qb(1,"span",63),a.Zb("click",(function(){a.rc(i);var e=a.dc(2),t=a.pc(40);return e.toogleModal(t)})),a.Pb(),a.Pb()}}var k=function(e){return["/profile",e]};function z(e,t){if(1&e&&(a.Qb(0,"div",53),a.Qb(1,"div",54),a.Qb(2,"span",55),a.Qb(3,"div",56),a.Mb(4,"img",57),a.Pb(),a.Qb(5,"span",58),a.zc(6),a.Pb(),a.Pb(),a.Qb(7,"span",59),a.Qb(8,"span"),a.zc(9,"Actualizado:"),a.Pb(),a.zc(10),a.ec(11,"date"),a.Pb(),a.Pb(),a.Qb(12,"div",60),a.yc(13,Q,2,0,"div",61),a.Pb(),a.Pb()),2&e){var i=a.dc();a.zb(4),a.jc("src",i.form.author.image?i.form.author.image:"assets/images/avatar.jpeg",a.tc),a.zb(1),a.ic("routerLink",a.lc(8,k,i.form.author.username)),a.zb(1),a.Bc(" ",i.form.author.username," "),a.zb(4),a.Bc(" ",a.fc(11,5,i.originalForm.updatedAt,"dd/MM/yyyy")," "),a.zb(3),a.ic("ngIf",""!==i.form.indications&&void 0!==i.form.indications)}}function w(e,t){if(1&e&&(a.Qb(0,"div",64),a.Qb(1,"div",65),a.Qb(2,"span",null,66),a.zc(4),a.Pb(),a.Pb(),a.Pb()),2&e){var i=a.dc();a.zb(2),a.xc("width",i.progresBarPercentage),a.zb(2),a.Ac(i.progresBarPercentage)}}function I(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",67),a.Qb(1,"div",68),a.Qb(2,"h2",69),a.zc(3),a.Pb(),a.Qb(4,"span",70),a.zc(5),a.Pb(),a.Qb(6,"button",71),a.Zb("click",(function(){a.rc(i);var e=a.dc(),t=a.pc(40);return e.toogleModal(t)})),a.zc(7," Rellenar formulario "),a.Pb(),a.Pb(),a.Pb()}if(2&e){var o=a.dc();a.zb(3),a.Bc(" ",o.form.title," "),a.zb(2),a.Bc(" ",o.form.description," ")}}function C(e,t){if(1&e&&a.Mb(0,"app-input-text",73),2&e){var i=a.dc().$implicit;a.ic("field",i)}}function M(e,t){if(1&e&&a.Mb(0,"app-input-radio-a",73),2&e){var i=a.dc().$implicit;a.ic("field",i)}}function D(e,t){if(1&e&&a.Mb(0,"app-input-radio-b",73),2&e){var i=a.dc().$implicit;a.ic("field",i)}}function T(e,t){if(1&e&&(a.Qb(0,"div"),a.yc(1,C,1,1,"app-input-text",72),a.yc(2,M,1,1,"app-input-radio-a",72),a.yc(3,D,1,1,"app-input-radio-b",72),a.Pb()),2&e){var i=t.$implicit;a.zb(1),a.ic("ngIf","iText"==i.type),a.zb(1),a.ic("ngIf","iRadioA"==i.type),a.zb(1),a.ic("ngIf","iRadioB"==i.type)}}function B(e,t){1&e&&a.Mb(0,"span",85)}function x(e,t){1&e&&a.Mb(0,"span",86)}function F(e,t){1&e&&a.Mb(0,"span",87)}function L(e,t){1&e&&a.Mb(0,"span",88)}function E(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",67),a.Qb(1,"div",74),a.Qb(2,"div",75),a.Qb(3,"div",76),a.Qb(4,"div",77),a.Mb(5,"span",78),a.Qb(6,"h1"),a.zc(7,"Finalizado"),a.Pb(),a.Qb(8,"button",79),a.Zb("click",(function(){a.rc(i);var e=a.dc(),t=a.pc(51);return e.toogleModal(t)})),a.zc(9,"Descargar"),a.Pb(),a.Qb(10,"div",80),a.yc(11,B,1,0,"span",81),a.yc(12,x,1,0,"span",82),a.yc(13,F,1,0,"span",83),a.yc(14,L,1,0,"span",84),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&e){var o=a.dc();a.zb(11),a.ic("ngIf","office"===o.form.documentType),a.zb(1),a.ic("ngIf","office"===o.form.documentType),a.zb(1),a.ic("ngIf","plain"===o.form.documentType),a.zb(1),a.ic("ngIf","plain"===o.form.documentType)}}function R(e,t){1&e&&(a.Qb(0,"div",89),a.Qb(1,"div",90),a.Mb(2,"span",91),a.Qb(3,"span",92),a.zc(4,"1."),a.Pb(),a.Qb(5,"span",93),a.zc(6,"Elige un documento"),a.Pb(),a.Pb(),a.Qb(7,"div",90),a.Mb(8,"span",94),a.Qb(9,"span",92),a.zc(10,"2."),a.Pb(),a.Qb(11,"span",93),a.zc(12,"Rellena el formulario"),a.Pb(),a.Pb(),a.Qb(13,"div",90),a.Mb(14,"span",95),a.Qb(15,"span",92),a.zc(16,"3."),a.Pb(),a.Qb(17,"span",93),a.zc(18,"Gu\xe1rdalo e impr\xedmelo"),a.Pb(),a.Pb(),a.Pb())}function A(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",100),a.Zb("click",(function(){a.rc(i);var e=a.dc(2);return e.setCurrentStep(e.currentStep-1)})),a.Mb(1,"span",101),a.Qb(2,"span",102),a.zc(3,"Anterior"),a.Pb(),a.Pb()}}function Z(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",100),a.Zb("click",(function(){return a.rc(i),a.dc(2).nextStepAfterValidate()})),a.Qb(1,"span",102),a.zc(2,"Siguiente"),a.Pb(),a.Mb(3,"span",103),a.Pb()}}function H(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",96),a.Qb(1,"div",97),a.yc(2,A,4,0,"div",98),a.Qb(3,"div",99),a.Zb("click",(function(){return a.rc(i),a.dc().previewDocumentButton(!0)})),a.zc(4," Preview "),a.Qb(5,"span"),a.zc(6,"\u2b07"),a.Pb(),a.Pb(),a.yc(7,Z,4,0,"div",98),a.Pb(),a.Pb()}if(2&e){var o=a.dc();a.zb(2),a.ic("ngIf",o.form.fields.length>=2&&0!==o.currentStep),a.zb(5),a.ic("ngIf",o.form.fields.length>=2&&o.currentStep!==o.form.fields.length+1)}}function j(e,t){if(1&e&&(a.Qb(0,"div",104,105),a.zc(2),a.Pb()),2&e){var i=a.dc();a.zb(2),a.Bc(" ",i.generatedText," ")}}function q(e,t){1&e&&(a.Qb(0,"div",106),a.Mb(1,"div",107),a.Pb())}function O(e,t){if(1&e&&a.Mb(0,"app-comments",110),2&e){var i=a.dc(2);a.ic("form",i.originalForm)}}function U(e,t){if(1&e&&(a.Qb(0,"div",108),a.yc(1,O,1,1,"app-comments",109),a.Pb()),2&e){var i=a.dc();a.zb(1),a.ic("ngIf",""!==i.originalForm.title)}}function V(e,t){1&e&&(a.Qb(0,"h2"),a.zc(1,"Los comentarios han sido desactivados para este formulario"),a.Pb())}function J(e,t){if(1&e){var i=a.Rb();a.Qb(0,"span",111),a.Zb("click",(function(){return a.rc(i),a.dc().downloadWord()})),a.Pb()}}function N(e,t){if(1&e){var i=a.Rb();a.Qb(0,"span",112),a.Zb("click",(function(){return a.rc(i),a.dc().downloadPdf()})),a.Pb()}}function W(e,t){if(1&e){var i=a.Rb();a.Qb(0,"span",113),a.Zb("click",(function(){return a.rc(i),a.dc().downloadTxt()})),a.Pb()}}function $(e,t){if(1&e){var i=a.Rb();a.Qb(0,"span",114),a.Zb("click",(function(){return a.rc(i),a.dc().downloadHtml()})),a.Pb()}}var X,G,K,Y,ee=function(e){return{display:e}},te=function(e){return{"form-creator__text-area--quill-text":e}},ie=((X=function(){function e(t,i,o,r,n,a,s,l,d,f){_classCallCheck(this,e),this.formsService=t,this.userService=i,this.commonsService=o,this.route=r,this.router=n,this.toastr=a,this.odfCreatorService=s,this.plainTextCreatorService=l,this.stateService=d,this.stepModelService=f,this.fields=[],this.isDeleting=!1,this.form=new c.h,this.originalForm=new c.h,this.errors={},this.isSubmitting=!1,this.updatingForm=!1,this.documentType="office",this.currentStep=0,this.progresBarPercentage="0%"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.commonsService.isBrowser()&&(this.route.data.subscribe((function(t){var i=t.form;e.form=i,e.fields=i.fields,e.generatedText=i.text,"Created"===i.type?(e.form.originalSlug=i.slug,e.updatingForm=!1):e.updatingForm=!0,e.updateProgressBarPercentage(),e.setInitialState(),e.setDocument(),e.setDivHeight()})),this.formsService.get(this.form.originalSlug).subscribe((function(t){e.originalForm=t})))}},{key:"ngAfterViewInit",value:function(){"plain"===this.form.documentType&&this.stepModelService.setInitialState()}},{key:"ngOnDestroy",value:function(){this.commonsService.isBrowser()&&("office"===this.form.documentType&&this.odfCreatorService.closeAndDestroyEditor(),this.documentService.destroyResizeDocumentContainer(),this.commonsService.setFormCreatorPlayground(!0),window.removeEventListener("resize",this.commonsService.resizeEditor))}},{key:"setInitialState",value:function(){this.stateService.setState("fill-form"),this.stateService.setDocumentType(this.form.documentType),this.documentType=this.form.documentType}},{key:"submitForm",value:function(){var e=this;this.isSubmitting=!0,this.form.type="Filled",this.formsService.save(this.form).subscribe((function(t){e.toastr.success("Ha sido creado",t.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),e.router.navigateByUrl("/fill-form/edit/"+t.slug)}),(function(t){e.errors=t,e.isSubmitting=!1}))}},{key:"deleteForm",value:function(){var e=this;this.isDeleting=!0,this.formsService.destroy(this.form.slug).subscribe((function(t){e.toastr.success("Has been deleted",e.form.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),e.router.navigateByUrl("/")}))}},{key:"setDivHeight",value:function(){setTimeout((function(){if(window.innerWidth>885&&null!==document.querySelector("#form-creator")){var e=window.innerHeight-(document.getElementsByTagName("nav")[0].clientHeight+document.querySelector(".sub-menu").clientHeight)+"px";document.querySelector("#form-creator").style.height=e}}),100)}},{key:"toogleModal",value:function(e){this.commonsService.toggleModal(e,!1)}},{key:"setDocument",value:function(){var e=this;this.commonsService.toggleSpinner(),"office"===this.form.documentType?(this.setDivHeight(),this.documentService=this.odfCreatorService,this.documentService.init("fillForm",this.form.text,"editorContainer").then((function(t){e.commonsService.setFormCreatorPlayground(!1),e.commonsService.resizeEditor(!0),window.addEventListener("resize",e.commonsService.resizeEditor),e.documentService.resizeDocumentContainer(),e.commonsService.toggleSpinner(),e.documentService.setDragAndDropForSetUp(),e.stepModelService.init(e.form.fields,e.documentType),e.stepModelService.setInitialState()}))):(this.documentService=this.plainTextCreatorService,this.documentService.init("editor-container","editor-preview"),this.documentService.setQuillText(this.form.text),this.commonsService.setFormCreatorPlayground(!1),this.commonsService.resizeEditor(!0),window.addEventListener("resize",this.commonsService.resizeEditor),this.documentService.resizeDocumentContainer(),this.setDivHeight(),this.stepModelService.init(this.form.fields,this.documentType),this.commonsService.toggleSpinner())}},{key:"topMenuNav",value:function(e){this.commonsService.subMenuNav(e,this.subMenu.nativeElement)}},{key:"setCurrentStep",value:function(e){var t=this;this.currentStep=e,this.formAreaDiv.nativeElement.querySelectorAll(".form-creator__fields-area__field").forEach((function(e,i){e.style.display=t.currentStep===i+1?"block":"none"})),this.updateProgressBarPercentage()}},{key:"nextStepAfterValidate",value:function(){var e=this.form.fields[this.currentStep-1];e.mandatory?"iText"===e.type&&(""===e.replacement?this.commonsService.toastMessage("error","Validation error","This field is mandatory"):this.setCurrentStep(this.currentStep+1)):this.setCurrentStep(this.currentStep+1)}},{key:"updateProgressBarPercentage",value:function(){var e=this;this.progressBar&&this.currentStep?function(){for(var t=Math.round(e.currentStep/(e.form.fields.length+1)*100),i=parseInt(e.progresBarPercentage,10),o=t>i?t-i:i-t,r=function(o){setTimeout((function(){var r=t>i?i+o:i-o;e.progressBar.nativeElement.style.width=r+"%",e.progresBarPercentage=r+"%"}),10*o)},n=0;n<o+1;n++)r(n)}():this.progresBarPercentage=Math.round(this.currentStep/(this.form.fields.length+1)*100)+"%"}},{key:"previewDocumentButton",value:function(e){this.commonsService.previewDocumentButton(e),"office"===this.form.documentType&&this.documentService.resizeEvent()}},{key:"downloadWord",value:function(){this.documentService.downloadWord(this.form.slug,this.form.uri)}},{key:"downloadPdf",value:function(){this.documentService.downloadPdf(this.form.slug,this.form.uri)}},{key:"downloadHtml",value:function(){var e=new Blob([this.automatikDocDiv.nativeElement.outerHTML],{type:"text/plain"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="".concat(this.form.slug,".html"),i.click()}},{key:"downloadTxt",value:function(){var e=new Blob([this.automatikDocDiv.nativeElement.textContent],{type:"text/plain"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="".concat(this.form.slug,".txt"),i.click()}}]),e}()).\u0275fac=function(e){return new(e||X)(a.Lb(c.j),a.Lb(c.r),a.Lb(c.d),a.Lb(n.a),a.Lb(n.d),a.Lb(s.b),a.Lb(c.k),a.Lb(c.l),a.Lb(c.o),a.Lb(c.p))},X.\u0275cmp=a.Fb({type:X,selectors:[["app-fill-form"]],viewQuery:function(e,t){var i;1&e&&(a.Dc(b,!0),a.Dc(_,!0),a.Dc(p,!0),a.Dc(v,!0),a.Dc(g,!0),a.Dc(h,!0),a.Dc(y,!0)),2&e&&(a.oc(i=a.ac())&&(t.formAreaDiv=i.first),a.oc(i=a.ac())&&(t.automatikDocDiv=i.first),a.oc(i=a.ac())&&(t.linkFormButton=i.first),a.oc(i=a.ac())&&(t.progressBar=i.first),a.oc(i=a.ac())&&(t.modal=i.first),a.oc(i=a.ac())&&(t.modalDownload=i.first),a.oc(i=a.ac())&&(t.subMenu=i.first))},decls:63,vars:25,consts:[[1,"sub-menu"],[1,"sub-menu__container","sub-menu__container--fill-form"],["subMenu",""],[1,"sub-menu__left-button","sub-menu__left-button--fill-form"],[1,"button-filled","button-filled--sub-menu-fill-form","icon","icon-save-solid",3,"disabled","click"],["class","button-filled button-filled--sub-menu-fill-form icon icon-trash-alt-regular",3,"ngClass","click",4,"ngIf"],[1,"sub-menu__nav","sub-menu__nav--fill-form",3,"click"],["data-toogle","form-creator",1,"sub-menu__nav__button","sub-menu__nav__button--current"],["data-toogle","comments",1,"sub-menu__nav__button"],[1,"sub-menu__likes-views",3,"form"],["id","form-creator",1,"form-creator"],["formCreatorDiv",""],[1,"form-creator__container"],["id","fields-area",1,"form-creator__fields-area"],[1,"form-creator__fields-area__container"],["formAreaDiv",""],[1,"form-creator__fields-area__top"],["class","form-creator__fields-area__top__container",4,"ngIf"],["class","progress-container",4,"ngIf"],[1,"form-creator__fields-area__middle"],["class","form-creator__fields-area__middle__container",4,"ngIf"],[1,"form-creator__fields-area__middle__container",3,"ngStyle"],[4,"ngFor","ngForOf"],["class","form-creator__fields-area__bottom form-creator__fields-area__bottom--initial-screen",4,"ngIf"],["class","form-creator__fields-area__bottom",4,"ngIf"],["id","text-area",1,"form-creator__text-area",3,"ngClass"],["class","form-creator__text-area__quill-text-result ql-container ql-snow","id","editor-preview","style","height: auto;",4,"ngIf"],["id","wodoautomatikdocs","style","width:100%; height:100%; margin:0px; padding:0px",4,"ngIf"],["id","scrollToTop",1,"button-filled","button-filled--preview-document",2,"display","none",3,"click"],[2,"font-size","20px"],["id","comments",2,"display","none"],["class","comments",4,"ngIf"],[1,"comments","comments__disabled"],[4,"ngIf"],[1,"modal"],["modal",""],[1,"modal__content","modal__content--privacy"],[1,"modal__content__top","modal__content__top--privacy"],["id","modal-middle-privacy",1,"modal__content__modal-middle","modal__content__modal-middle--privacy"],[1,"modal__content__modal-middle__container",3,"innerHTML"],[1,"modal__content__modal-bottom","modal__content__modal-bottom--privacy"],["id","modal-button",1,"button-filled",3,"click"],["modalDownload",""],[1,"modal__content",2,"padding","2rem"],[1,"modal__content__modal-middle","modal__content__modal-middle--change-password"],[1,"modal__content__modal-middle__container"],[1,"download-documents-modal"],["class","icon icon-file-word-solid",3,"click",4,"ngIf"],["class","icon icon-file-pdf-solid",3,"click",4,"ngIf"],["class","icon icon-file-download-solid",3,"click",4,"ngIf"],["class","icon icon-file-code-solid",3,"click",4,"ngIf"],[1,"modal__content__modal-bottom"],[1,"button-filled","button-filled--sub-menu-fill-form","icon","icon-trash-alt-regular",3,"ngClass","click"],[1,"form-creator__fields-area__top__container"],[1,"form-creator__fields-area__top__author-date"],[1,"form-creator__fields-area__top__author-date__author"],[1,"form-creator__fields-area__top__author-date__author__image-container"],["alt","avatar",3,"src"],[3,"routerLink"],[1,"form-creator__fields-area__top__author-date__date"],[1,"form-creator__fields-area__top__before-start-button"],["class","form-creator__fields-area__top__before-start-button__information-modal-icon trigger",4,"ngIf"],[1,"form-creator__fields-area__top__before-start-button__information-modal-icon","trigger"],[1,"icon","icon-info-solid",3,"click"],[1,"progress-container"],[1,"progress","progress-large"],["progressBar",""],[1,"form-creator__fields-area__middle__container"],[1,"form-creator__fields-area__middle__initial-screen"],[1,"form-creator__fields-area__middle__initial-screen__form-title"],[1,"form-creator__fields-area__middle__initial-screen__description"],[1,"button-filled","button-filled--start-form",3,"click"],[3,"field",4,"ngIf"],[3,"field"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__end-step"],[1,"form-creator__fields-area__end-step__container"],[1,"form-creator__fields-area__end-step__check","icon","icon-check-circle-solid"],[1,"button-filled","button-filled--start-form","trigger",3,"click"],[1,"form-creator__fields-area__end-step__icons"],["class","icon icon-file-word-solid trigger",4,"ngIf"],["class","icon icon-file-pdf-solid",4,"ngIf"],["class","icon icon-file-download-solid",4,"ngIf"],["class","icon icon-file-code-solid",4,"ngIf"],[1,"icon","icon-file-word-solid","trigger"],[1,"icon","icon-file-pdf-solid"],[1,"icon","icon-file-download-solid"],[1,"icon","icon-file-code-solid"],[1,"form-creator__fields-area__bottom","form-creator__fields-area__bottom--initial-screen"],[1,"form-creator__fields-area__bottom__step"],[1,"icon","icon-file-regular"],[1,"form-creator__fields-area__bottom__step__number"],[1,"form-creator__fields-area__bottom__step__description"],[1,"icon","icon-list-alt-regular"],[1,"icon","icon-print-solid"],[1,"form-creator__fields-area__bottom"],[1,"form-creator__fields-area__bottom__container"],["class","form-creator__fields-area__bottom__arrow-button",3,"click",4,"ngIf"],[1,"form-creator__fields-area__bottom__preview-button",3,"click"],[1,"form-creator__fields-area__bottom__arrow-button",3,"click"],[1,"icon","icon-chevron-left-solid"],[1,"form-creator__fields-area__bottom__arrow-button__label"],[1,"icon","icon-chevron-right-solid"],["id","editor-preview",1,"form-creator__text-area__quill-text-result","ql-container","ql-snow",2,"height","auto"],["automatikDocDiv",""],["id","wodoautomatikdocs",2,"width","100%","height","100%","margin","0px","padding","0px"],["id","editorContainer",2,"width","100%","height","100%","margin","0px","padding","0px"],[1,"comments"],["class","comments__container",3,"form",4,"ngIf"],[1,"comments__container",3,"form"],[1,"icon","icon-file-word-solid",3,"click"],[1,"icon","icon-file-pdf-solid",3,"click"],[1,"icon","icon-file-download-solid",3,"click"],[1,"icon","icon-file-code-solid",3,"click"]],template:function(e,t){if(1&e){var i=a.Rb();a.Qb(0,"div",0),a.Qb(1,"div",1,2),a.Qb(3,"div",3),a.Qb(4,"button",4),a.Zb("click",(function(){return t.submitForm()})),a.Pb(),a.yc(5,S,1,3,"button",5),a.Pb(),a.Qb(6,"ul",6),a.Zb("click",(function(e){return t.topMenuNav(e)})),a.Qb(7,"li",7),a.zc(8," Formulario "),a.Pb(),a.Qb(9,"li",8),a.zc(10," Comentarios "),a.Pb(),a.Pb(),a.Mb(11,"app-likes-button",9),a.Pb(),a.Pb(),a.Qb(12,"div",10,11),a.Qb(14,"div",12),a.Qb(15,"div",13),a.Qb(16,"div",14,15),a.Qb(18,"div",16),a.yc(19,z,14,10,"div",17),a.yc(20,w,5,3,"div",18),a.Pb(),a.Qb(21,"div",19),a.yc(22,I,8,2,"div",20),a.Qb(23,"div",21),a.yc(24,T,4,3,"div",22),a.yc(25,E,15,4,"div",20),a.Pb(),a.Pb(),a.yc(26,R,19,0,"div",23),a.yc(27,H,8,2,"div",24),a.Pb(),a.Pb(),a.Qb(28,"div",25),a.yc(29,j,3,1,"div",26),a.yc(30,q,2,0,"div",27),a.Qb(31,"button",28),a.Zb("click",(function(){return t.previewDocumentButton(!1)})),a.zc(32,"Form "),a.Qb(33,"span",29),a.zc(34,"\u2191"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(35,"div",30),a.yc(36,U,2,1,"div",31),a.Qb(37,"div",32),a.yc(38,V,2,0,"h2",33),a.Pb(),a.Pb(),a.Qb(39,"div",34,35),a.Qb(41,"div",36),a.Qb(42,"div",37),a.Qb(43,"h2"),a.zc(44,"Indicaciones antes de comenzar el formulario"),a.Pb(),a.Pb(),a.Qb(45,"div",38),a.Mb(46,"div",39),a.Pb(),a.Qb(47,"div",40),a.Qb(48,"button",41),a.Zb("click",(function(){a.rc(i);var e=a.pc(40);return t.toogleModal(e),t.setCurrentStep(t.currentStep+1)})),a.zc(49,"Rellenar"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(50,"div",34,42),a.Qb(52,"div",43),a.Qb(53,"div",44),a.Qb(54,"div",45),a.Qb(55,"div",46),a.yc(56,J,1,0,"span",47),a.yc(57,N,1,0,"span",48),a.yc(58,W,1,0,"span",49),a.yc(59,$,1,0,"span",50),a.Pb(),a.Pb(),a.Pb(),a.Qb(60,"div",51),a.Qb(61,"button",41),a.Zb("click",(function(){a.rc(i);var e=a.pc(51);return t.toogleModal(e)})),a.zc(62,"Cancelar"),a.Pb(),a.Pb(),a.Pb(),a.Pb()}2&e&&(a.zb(4),a.ic("disabled",t.isSubmitting),a.zb(1),a.ic("ngIf",t.updatingForm),a.zb(6),a.ic("form",t.originalForm),a.zb(8),a.ic("ngIf",0===t.currentStep),a.zb(1),a.ic("ngIf",0!==t.currentStep),a.zb(2),a.ic("ngIf",0===t.currentStep),a.zb(1),a.ic("ngStyle",a.lc(21,ee,0!==t.currentStep?"block":"none")),a.zb(1),a.ic("ngForOf",t.fields),a.zb(1),a.ic("ngIf",t.currentStep===t.form.fields.length+1),a.zb(1),a.ic("ngIf",0===t.currentStep),a.zb(1),a.ic("ngIf",0!==t.currentStep),a.zb(1),a.ic("ngClass",a.lc(23,te,"plain"===t.form.documentType)),a.zb(1),a.ic("ngIf","plain"===t.form.documentType),a.zb(1),a.ic("ngIf","office"===t.form.documentType),a.zb(6),a.ic("ngIf",t.originalForm.commentsEnabled),a.zb(2),a.ic("ngIf",!t.originalForm.commentsEnabled),a.zb(8),a.ic("innerHTML",t.form.indications,a.sc),a.zb(10),a.ic("ngIf","office"===t.form.documentType),a.zb(1),a.ic("ngIf","office"===t.form.documentType),a.zb(1),a.ic("ngIf","plain"===t.form.documentType),a.zb(1),a.ic("ngIf","plain"===t.form.documentType))},directives:[o.t,l.a,o.w,o.s,o.q,n.e,d.a,f.a,u.a,m.a],pipes:[o.f],encapsulation:2}),X),oe=i("lJxs"),re=i("JIr8"),ne=((G=function(){function e(t,i,o){_classCallCheck(this,e),this.formService=t,this.router=i,this.userService=o}return _createClass(e,[{key:"resolve",value:function(e,t){var i=this;return e.url.toString().includes("edit")?this.formService.get(e.params.slug).pipe(Object(oe.a)((function(t){if(i.userService.getCurrentUser().username===t.filledBy.username)return e.data={form:t},t;i.router.navigateByUrl("/")})),Object(re.a)((function(e){return i.router.navigateByUrl("/")}))):this.formService.getWithView(e.params.slug).pipe(Object(oe.a)((function(e){return e})),Object(re.a)((function(e){return i.router.navigateByUrl("/")})))}}]),e}()).\u0275fac=function(e){return new(e||G)(a.Vb(c.j),a.Vb(n.d),a.Vb(c.r))},G.\u0275prov=a.Hb({token:G,factory:G.\u0275fac}),G),ce=[{path:":slug",component:ie,resolve:{form:ne}},{path:"edit",component:ie,canActivate:[c.a]},{path:"edit/:slug",component:ie,canActivate:[c.a],resolve:{form:ne}}],ae=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=a.Jb({type:Y}),Y.\u0275inj=a.Ib({factory:function(e){return new(e||Y)},imports:[[n.h.forChild(ce)],n.h]}),Y),se=((K=function e(){_classCallCheck(this,e)}).\u0275mod=a.Jb({type:K}),K.\u0275inj=a.Ib({factory:function(e){return new(e||K)},providers:[ne],imports:[[o.c,r.a,ae]]}),K)}}]);