(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{OCXw:function(e,t,i){"use strict";i.r(t),i.d(t,"FillFormModule",(function(){return re}));var o=i("ofXK"),r=i("M0ag"),n=i("tyNb"),c=i("ey9i"),s=i("fXoL"),a=i("5eHb"),l=i("eZC8"),d=i("19fH"),f=i("boqk"),m=i("2kAz"),b=i("fbZM");const u=["formAreaDiv"],_=["automatikDocDiv"],p=["linkFormButton"],g=["progressBar"],h=["modal"],v=["modalDownload"],y=["subMenu"],P=function(e){return{disabled:e}};function S(e,t){if(1&e){const e=s.Rb();s.Qb(0,"button",52),s.Zb("click",(function(){return s.rc(e),s.dc().deleteForm()})),s.Pb()}if(2&e){const e=s.dc();s.ic("ngClass",s.lc(1,P,e.isDeleting))}}function Q(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",62),s.Qb(1,"span",63),s.Zb("click",(function(){s.rc(e);const t=s.dc(2),i=s.pc(40);return t.toogleModal(i)})),s.Pb(),s.Pb()}}const z=function(e){return["/profile",e]};function w(e,t){if(1&e&&(s.Qb(0,"div",53),s.Qb(1,"div",54),s.Qb(2,"span",55),s.Qb(3,"div",56),s.Mb(4,"img",57),s.Pb(),s.Qb(5,"span",58),s.zc(6),s.Pb(),s.Pb(),s.Qb(7,"span",59),s.Qb(8,"span"),s.zc(9,"Actualizado:"),s.Pb(),s.zc(10),s.ec(11,"date"),s.Pb(),s.Pb(),s.Qb(12,"div",60),s.yc(13,Q,2,0,"div",61),s.Pb(),s.Pb()),2&e){const e=s.dc();s.zb(4),s.jc("src",null!=e.form.author&&e.form.author.image?null==e.form.author?null:e.form.author.image:"assets/images/avatar.jpeg",s.tc),s.zb(1),s.ic("routerLink",s.lc(8,z,e.form.author.username)),s.zb(1),s.Bc(" ",e.form.author.username," "),s.zb(4),s.Bc(" ",s.fc(11,5,e.originalForm.updatedAt,"dd/MM/yyyy")," "),s.zb(3),s.ic("ngIf",""!==e.form.indications&&void 0!==e.form.indications)}}function k(e,t){if(1&e&&(s.Qb(0,"div",64),s.Qb(1,"div",65),s.Qb(2,"span",null,66),s.zc(4),s.Pb(),s.Pb(),s.Pb()),2&e){const e=s.dc();s.zb(2),s.xc("width",e.progresBarPercentage),s.zb(2),s.Ac(e.progresBarPercentage)}}function I(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",67),s.Qb(1,"div",68),s.Qb(2,"h2",69),s.zc(3),s.Pb(),s.Qb(4,"span",70),s.zc(5),s.Pb(),s.Qb(6,"button",71),s.Zb("click",(function(){s.rc(e);const t=s.dc(),i=s.pc(40);return t.toogleModal(i)})),s.zc(7," Rellenar formulario "),s.Pb(),s.Pb(),s.Pb()}if(2&e){const e=s.dc();s.zb(3),s.Bc(" ",e.form.title," "),s.zb(2),s.Bc(" ",e.form.description," ")}}function M(e,t){if(1&e&&s.Mb(0,"app-input-text",73),2&e){const e=s.dc().$implicit;s.ic("field",e)}}function D(e,t){if(1&e&&s.Mb(0,"app-input-radio-a",73),2&e){const e=s.dc().$implicit;s.ic("field",e)}}function T(e,t){if(1&e&&s.Mb(0,"app-input-radio-b",73),2&e){const e=s.dc().$implicit;s.ic("field",e)}}function B(e,t){if(1&e&&(s.Qb(0,"div"),s.yc(1,M,1,1,"app-input-text",72),s.yc(2,D,1,1,"app-input-radio-a",72),s.yc(3,T,1,1,"app-input-radio-b",72),s.Pb()),2&e){const e=t.$implicit;s.zb(1),s.ic("ngIf","iText"==e.type),s.zb(1),s.ic("ngIf","iRadioA"==e.type),s.zb(1),s.ic("ngIf","iRadioB"==e.type)}}function x(e,t){1&e&&s.Mb(0,"span",85)}function C(e,t){1&e&&s.Mb(0,"span",86)}function F(e,t){1&e&&s.Mb(0,"span",87)}function L(e,t){1&e&&s.Mb(0,"span",88)}function E(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",67),s.Qb(1,"div",74),s.Qb(2,"div",75),s.Qb(3,"div",76),s.Qb(4,"div",77),s.Mb(5,"span",78),s.Qb(6,"h1"),s.zc(7,"Finalizado"),s.Pb(),s.Qb(8,"button",79),s.Zb("click",(function(){s.rc(e);const t=s.dc(),i=s.pc(51);return t.toogleModal(i)})),s.zc(9,"Descargar"),s.Pb(),s.Qb(10,"div",80),s.yc(11,x,1,0,"span",81),s.yc(12,C,1,0,"span",82),s.yc(13,F,1,0,"span",83),s.yc(14,L,1,0,"span",84),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()}if(2&e){const e=s.dc();s.zb(11),s.ic("ngIf","office"===e.form.documentType),s.zb(1),s.ic("ngIf","office"===e.form.documentType),s.zb(1),s.ic("ngIf","plain"===e.form.documentType),s.zb(1),s.ic("ngIf","plain"===e.form.documentType)}}function R(e,t){1&e&&(s.Qb(0,"div",89),s.Qb(1,"div",90),s.Mb(2,"span",91),s.Qb(3,"span",92),s.zc(4,"1."),s.Pb(),s.Qb(5,"span",93),s.zc(6,"Elige un documento"),s.Pb(),s.Pb(),s.Qb(7,"div",90),s.Mb(8,"span",94),s.Qb(9,"span",92),s.zc(10,"2."),s.Pb(),s.Qb(11,"span",93),s.zc(12,"Rellena el formulario"),s.Pb(),s.Pb(),s.Qb(13,"div",90),s.Mb(14,"span",95),s.Qb(15,"span",92),s.zc(16,"3."),s.Pb(),s.Qb(17,"span",93),s.zc(18,"Gu\xe1rdalo e impr\xedmelo"),s.Pb(),s.Pb(),s.Pb())}function A(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",100),s.Zb("click",(function(){s.rc(e);const t=s.dc(2);return t.setCurrentStep(t.currentStep-1)})),s.Mb(1,"span",101),s.Qb(2,"span",102),s.zc(3,"Anterior"),s.Pb(),s.Pb()}}function H(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",100),s.Zb("click",(function(){return s.rc(e),s.dc(2).nextStepAfterValidate()})),s.Qb(1,"span",102),s.zc(2,"Siguiente"),s.Pb(),s.Mb(3,"span",103),s.Pb()}}function Z(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",96),s.Qb(1,"div",97),s.yc(2,A,4,0,"div",98),s.Qb(3,"div",99),s.Zb("click",(function(){return s.rc(e),s.dc().previewDocumentButton(!0)})),s.zc(4," Preview "),s.Qb(5,"span"),s.zc(6,"\u2b07"),s.Pb(),s.Pb(),s.yc(7,H,4,0,"div",98),s.Pb(),s.Pb()}if(2&e){const e=s.dc();s.zb(2),s.ic("ngIf",e.form.fields.length>=2&&0!==e.currentStep),s.zb(5),s.ic("ngIf",e.form.fields.length>=2&&e.currentStep!==e.form.fields.length+1)}}function q(e,t){if(1&e&&(s.Qb(0,"div",104,105),s.zc(2),s.Pb()),2&e){const e=s.dc();s.zb(2),s.Bc(" ",e.generatedText," ")}}function O(e,t){1&e&&(s.Qb(0,"div",106),s.Mb(1,"div",107),s.Pb())}function U(e,t){if(1&e&&s.Mb(0,"app-comments",110),2&e){const e=s.dc(2);s.ic("form",e.originalForm)}}function j(e,t){if(1&e&&(s.Qb(0,"div",108),s.yc(1,U,1,1,"app-comments",109),s.Pb()),2&e){const e=s.dc();s.zb(1),s.ic("ngIf",""!==e.originalForm.title)}}function V(e,t){1&e&&(s.Qb(0,"h2"),s.zc(1,"Los comentarios han sido desactivados para este formulario"),s.Pb())}function J(e,t){if(1&e){const e=s.Rb();s.Qb(0,"span",111),s.Zb("click",(function(){return s.rc(e),s.dc().downloadWord()})),s.Pb()}}function $(e,t){if(1&e){const e=s.Rb();s.Qb(0,"span",112),s.Zb("click",(function(){return s.rc(e),s.dc().downloadPdf()})),s.Pb()}}function N(e,t){if(1&e){const e=s.Rb();s.Qb(0,"span",113),s.Zb("click",(function(){return s.rc(e),s.dc().downloadTxt()})),s.Pb()}}function W(e,t){if(1&e){const e=s.Rb();s.Qb(0,"span",114),s.Zb("click",(function(){return s.rc(e),s.dc().downloadHtml()})),s.Pb()}}const X=function(e){return{display:e}},G=function(e){return{"form-creator__text-area--quill-text":e}};let K=(()=>{class e{constructor(e,t,i,o,r,n,s,a,l,d){this.formsService=e,this.userService=t,this.commonsService=i,this.route=o,this.router=r,this.toastr=n,this.odfCreatorService=s,this.plainTextCreatorService=a,this.stateService=l,this.stepModelService=d,this.fields=[],this.isDeleting=!1,this.form=new c.i,this.originalForm=new c.i,this.errors={},this.isSubmitting=!1,this.updatingForm=!1,this.documentType="office",this.currentStep=0,this.progresBarPercentage="0%"}ngOnInit(){this.commonsService.isBrowser()&&(this.route.data.subscribe(e=>{const t=e.form;this.form=t,this.fields=t.fields,this.generatedText=t.text,"Created"===t.type?(this.form.originalSlug=t.slug,this.updatingForm=!1):this.updatingForm=!0,this.updateProgressBarPercentage(),this.setInitialState(),this.setDocument(),this.setDivHeight()}),this.formsService.get(this.form.originalSlug).subscribe(e=>{this.originalForm=e}))}ngAfterViewInit(){"plain"===this.form.documentType&&this.stepModelService.setInitialState()}ngOnDestroy(){this.commonsService.isBrowser()&&("office"===this.form.documentType&&this.odfCreatorService.closeAndDestroyEditor(),this.documentService.destroyResizeDocumentContainer(),this.commonsService.setFormCreatorPlayground(!0),window.removeEventListener("resize",this.commonsService.resizeEditor))}setInitialState(){this.stateService.setState("fill-form"),this.stateService.setDocumentType(this.form.documentType),this.documentType=this.form.documentType}submitForm(){this.isSubmitting=!0,this.form.type="Filled",this.formsService.save(this.form).subscribe(e=>{this.toastr.success("Ha sido creado",e.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.router.navigateByUrl("/fill-form/edit/"+e.slug),setTimeout(()=>{this.commonsService.setFormCreatorPlayground(!1),this.setDivHeight(),this.stepModelService.setInitialState()},400)},e=>{this.errors=e,this.isSubmitting=!1})}deleteForm(){this.isDeleting=!0,this.formsService.destroy(this.form.slug).subscribe(e=>{this.toastr.success("Has been deleted",this.form.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.router.navigateByUrl("/")})}setDivHeight(){setTimeout(()=>{if(window.innerWidth>885&&null!==document.querySelector("#form-creator")){const e=window.innerHeight-(document.getElementsByTagName("nav")[0].clientHeight+document.querySelector(".sub-menu").clientHeight)+"px";document.querySelector("#form-creator").style.height=e}},100)}toogleModal(e){this.commonsService.toggleModal(e,!1)}setDocument(){this.commonsService.toggleSpinner(),"office"===this.form.documentType?(this.setDivHeight(),this.documentService=this.odfCreatorService,this.documentService.init("fillForm",this.form.text,"editorContainer").then(e=>{this.commonsService.setFormCreatorPlayground(!1),this.commonsService.resizeEditor(!0),window.addEventListener("resize",this.commonsService.resizeEditor),this.documentService.resizeDocumentContainer(),this.commonsService.toggleSpinner(),this.documentService.setDragAndDropForSetUp(),this.stepModelService.init(this.form.fields,this.documentType),this.stepModelService.setInitialState()})):(this.documentService=this.plainTextCreatorService,this.documentService.init("editor-container","editor-preview"),this.documentService.setQuillText(this.form.text),this.commonsService.setFormCreatorPlayground(!1),this.commonsService.resizeEditor(!0),window.addEventListener("resize",this.commonsService.resizeEditor),this.documentService.resizeDocumentContainer(),this.setDivHeight(),this.stepModelService.init(this.form.fields,this.documentType),this.commonsService.toggleSpinner())}topMenuNav(e){this.commonsService.subMenuNav(e,this.subMenu.nativeElement)}setCurrentStep(e){this.currentStep=e,this.formAreaDiv.nativeElement.querySelectorAll(".form-creator__fields-area__field").forEach((e,t)=>{e.style.display=this.currentStep===t+1?"block":"none"}),this.updateProgressBarPercentage()}nextStepAfterValidate(){const e=this.form.fields[this.currentStep-1];e.mandatory?"iText"===e.type&&(""===e.replacement?this.commonsService.toastMessage("error","Validation error","This field is mandatory"):this.setCurrentStep(this.currentStep+1)):this.setCurrentStep(this.currentStep+1)}updateProgressBarPercentage(){if(this.progressBar&&this.currentStep){const e=Math.round(this.currentStep/(this.form.fields.length+1)*100),t=parseInt(this.progresBarPercentage,10),i=e>t?e-t:t-e;for(let o=0;o<i+1;o++)setTimeout(()=>{const i=e>t?t+o:t-o;this.progressBar.nativeElement.style.width=i+"%",this.progresBarPercentage=i+"%"},10*o)}else this.progresBarPercentage=Math.round(this.currentStep/(this.form.fields.length+1)*100)+"%"}previewDocumentButton(e){this.commonsService.previewDocumentButton(e),"office"===this.form.documentType&&this.documentService.resizeEvent()}downloadWord(){this.documentService.downloadWord(this.form.slug,this.form.uri)}downloadPdf(){this.documentService.downloadPdf(this.form.slug,this.form.uri)}downloadHtml(){const e=new Blob([this.automatikDocDiv.nativeElement.outerHTML],{type:"text/plain"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`${this.form.slug}.html`,i.click()}downloadTxt(){const e=new Blob([this.automatikDocDiv.nativeElement.textContent],{type:"text/plain"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`${this.form.slug}.txt`,i.click()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(c.k),s.Lb(c.u),s.Lb(c.e),s.Lb(n.a),s.Lb(n.d),s.Lb(a.b),s.Lb(c.n),s.Lb(c.o),s.Lb(c.r),s.Lb(c.s))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-fill-form"]],viewQuery:function(e,t){var i;1&e&&(s.Dc(u,!0),s.Dc(_,!0),s.Dc(p,!0),s.Dc(g,!0),s.Dc(h,!0),s.Dc(v,!0),s.Dc(y,!0)),2&e&&(s.oc(i=s.ac())&&(t.formAreaDiv=i.first),s.oc(i=s.ac())&&(t.automatikDocDiv=i.first),s.oc(i=s.ac())&&(t.linkFormButton=i.first),s.oc(i=s.ac())&&(t.progressBar=i.first),s.oc(i=s.ac())&&(t.modal=i.first),s.oc(i=s.ac())&&(t.modalDownload=i.first),s.oc(i=s.ac())&&(t.subMenu=i.first))},decls:63,vars:25,consts:[[1,"sub-menu"],[1,"sub-menu__container","sub-menu__container--fill-form"],["subMenu",""],[1,"sub-menu__left-button","sub-menu__left-button--fill-form"],[1,"button-filled","button-filled--sub-menu-fill-form","icon","icon-save-solid",3,"disabled","click"],["class","button-filled button-filled--sub-menu-fill-form icon icon-trash-alt-regular",3,"ngClass","click",4,"ngIf"],[1,"sub-menu__nav","sub-menu__nav--fill-form",3,"click"],["data-toogle","form-creator",1,"sub-menu__nav__button","sub-menu__nav__button--current"],["data-toogle","comments",1,"sub-menu__nav__button"],[1,"sub-menu__likes-views",3,"form"],["id","form-creator",1,"form-creator"],["formCreatorDiv",""],[1,"form-creator__container"],["id","fields-area",1,"form-creator__fields-area"],[1,"form-creator__fields-area__container"],["formAreaDiv",""],[1,"form-creator__fields-area__top"],["class","form-creator__fields-area__top__container",4,"ngIf"],["class","progress-container",4,"ngIf"],[1,"form-creator__fields-area__middle"],["class","form-creator__fields-area__middle__container",4,"ngIf"],[1,"form-creator__fields-area__middle__container",3,"ngStyle"],[4,"ngFor","ngForOf"],["class","form-creator__fields-area__bottom form-creator__fields-area__bottom--initial-screen",4,"ngIf"],["class","form-creator__fields-area__bottom",4,"ngIf"],["id","text-area",1,"form-creator__text-area",3,"ngClass"],["class","form-creator__text-area__quill-text-result ql-container ql-snow","id","editor-preview","style","height: auto;",4,"ngIf"],["id","wodoautomatikdocs","style","width:100%; height:100%; margin:0px; padding:0px",4,"ngIf"],["id","scrollToTop",1,"button-filled","button-filled--preview-document",2,"display","none",3,"click"],[2,"font-size","20px"],["id","comments",2,"display","none"],["class","comments",4,"ngIf"],[1,"comments","comments__disabled"],[4,"ngIf"],[1,"modal"],["modal",""],[1,"modal__content","modal__content--privacy"],[1,"modal__content__top","modal__content__top--privacy"],["id","modal-middle-privacy",1,"modal__content__modal-middle","modal__content__modal-middle--privacy"],[1,"modal__content__modal-middle__container",3,"innerHTML"],[1,"modal__content__modal-bottom","modal__content__modal-bottom--privacy"],["id","modal-button",1,"button-filled",3,"click"],["modalDownload",""],[1,"modal__content",2,"padding","2rem"],[1,"modal__content__modal-middle","modal__content__modal-middle--change-password"],[1,"modal__content__modal-middle__container"],[1,"download-documents-modal"],["class","icon icon-file-word-solid",3,"click",4,"ngIf"],["class","icon icon-file-pdf-solid",3,"click",4,"ngIf"],["class","icon icon-file-download-solid",3,"click",4,"ngIf"],["class","icon icon-file-code-solid",3,"click",4,"ngIf"],[1,"modal__content__modal-bottom"],[1,"button-filled","button-filled--sub-menu-fill-form","icon","icon-trash-alt-regular",3,"ngClass","click"],[1,"form-creator__fields-area__top__container"],[1,"form-creator__fields-area__top__author-date"],[1,"form-creator__fields-area__top__author-date__author"],[1,"form-creator__fields-area__top__author-date__author__image-container"],["alt","avatar",3,"src"],[3,"routerLink"],[1,"form-creator__fields-area__top__author-date__date"],[1,"form-creator__fields-area__top__before-start-button"],["class","form-creator__fields-area__top__before-start-button__information-modal-icon trigger",4,"ngIf"],[1,"form-creator__fields-area__top__before-start-button__information-modal-icon","trigger"],[1,"icon","icon-info-solid",3,"click"],[1,"progress-container"],[1,"progress","progress-large"],["progressBar",""],[1,"form-creator__fields-area__middle__container"],[1,"form-creator__fields-area__middle__initial-screen"],[1,"form-creator__fields-area__middle__initial-screen__form-title"],[1,"form-creator__fields-area__middle__initial-screen__description"],[1,"button-filled","button-filled--start-form",3,"click"],[3,"field",4,"ngIf"],[3,"field"],[1,"form-creator__fields-area__field"],[1,"form-creator__fields-area__field__container"],[1,"form-creator__fields-area__end-step"],[1,"form-creator__fields-area__end-step__container"],[1,"form-creator__fields-area__end-step__check","icon","icon-check-circle-solid"],[1,"button-filled","button-filled--start-form","trigger",3,"click"],[1,"form-creator__fields-area__end-step__icons"],["class","icon icon-file-word-solid trigger",4,"ngIf"],["class","icon icon-file-pdf-solid",4,"ngIf"],["class","icon icon-file-download-solid",4,"ngIf"],["class","icon icon-file-code-solid",4,"ngIf"],[1,"icon","icon-file-word-solid","trigger"],[1,"icon","icon-file-pdf-solid"],[1,"icon","icon-file-download-solid"],[1,"icon","icon-file-code-solid"],[1,"form-creator__fields-area__bottom","form-creator__fields-area__bottom--initial-screen"],[1,"form-creator__fields-area__bottom__step"],[1,"icon","icon-file-regular"],[1,"form-creator__fields-area__bottom__step__number"],[1,"form-creator__fields-area__bottom__step__description"],[1,"icon","icon-list-alt-regular"],[1,"icon","icon-print-solid"],[1,"form-creator__fields-area__bottom"],[1,"form-creator__fields-area__bottom__container"],["class","form-creator__fields-area__bottom__arrow-button",3,"click",4,"ngIf"],[1,"form-creator__fields-area__bottom__preview-button",3,"click"],[1,"form-creator__fields-area__bottom__arrow-button",3,"click"],[1,"icon","icon-chevron-left-solid"],[1,"form-creator__fields-area__bottom__arrow-button__label"],[1,"icon","icon-chevron-right-solid"],["id","editor-preview",1,"form-creator__text-area__quill-text-result","ql-container","ql-snow",2,"height","auto"],["automatikDocDiv",""],["id","wodoautomatikdocs",2,"width","100%","height","100%","margin","0px","padding","0px"],["id","editorContainer",2,"width","100%","height","100%","margin","0px","padding","0px"],[1,"comments"],["class","comments__container",3,"form",4,"ngIf"],[1,"comments__container",3,"form"],[1,"icon","icon-file-word-solid",3,"click"],[1,"icon","icon-file-pdf-solid",3,"click"],[1,"icon","icon-file-download-solid",3,"click"],[1,"icon","icon-file-code-solid",3,"click"]],template:function(e,t){if(1&e){const e=s.Rb();s.Qb(0,"div",0),s.Qb(1,"div",1,2),s.Qb(3,"div",3),s.Qb(4,"button",4),s.Zb("click",(function(){return t.submitForm()})),s.Pb(),s.yc(5,S,1,3,"button",5),s.Pb(),s.Qb(6,"ul",6),s.Zb("click",(function(e){return t.topMenuNav(e)})),s.Qb(7,"li",7),s.zc(8," Formulario "),s.Pb(),s.Qb(9,"li",8),s.zc(10," Comentarios "),s.Pb(),s.Pb(),s.Mb(11,"app-likes-button",9),s.Pb(),s.Pb(),s.Qb(12,"div",10,11),s.Qb(14,"div",12),s.Qb(15,"div",13),s.Qb(16,"div",14,15),s.Qb(18,"div",16),s.yc(19,w,14,10,"div",17),s.yc(20,k,5,3,"div",18),s.Pb(),s.Qb(21,"div",19),s.yc(22,I,8,2,"div",20),s.Qb(23,"div",21),s.yc(24,B,4,3,"div",22),s.yc(25,E,15,4,"div",20),s.Pb(),s.Pb(),s.yc(26,R,19,0,"div",23),s.yc(27,Z,8,2,"div",24),s.Pb(),s.Pb(),s.Qb(28,"div",25),s.yc(29,q,3,1,"div",26),s.yc(30,O,2,0,"div",27),s.Qb(31,"button",28),s.Zb("click",(function(){return t.previewDocumentButton(!1)})),s.zc(32,"Form "),s.Qb(33,"span",29),s.zc(34,"\u2191"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(35,"div",30),s.yc(36,j,2,1,"div",31),s.Qb(37,"div",32),s.yc(38,V,2,0,"h2",33),s.Pb(),s.Pb(),s.Qb(39,"div",34,35),s.Qb(41,"div",36),s.Qb(42,"div",37),s.Qb(43,"h2"),s.zc(44,"Indicaciones antes de comenzar el formulario"),s.Pb(),s.Pb(),s.Qb(45,"div",38),s.Mb(46,"div",39),s.Pb(),s.Qb(47,"div",40),s.Qb(48,"button",41),s.Zb("click",(function(){s.rc(e);const i=s.pc(40);return t.toogleModal(i),t.setCurrentStep(t.currentStep+1)})),s.zc(49,"Rellenar"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(50,"div",34,42),s.Qb(52,"div",43),s.Qb(53,"div",44),s.Qb(54,"div",45),s.Qb(55,"div",46),s.yc(56,J,1,0,"span",47),s.yc(57,$,1,0,"span",48),s.yc(58,N,1,0,"span",49),s.yc(59,W,1,0,"span",50),s.Pb(),s.Pb(),s.Pb(),s.Qb(60,"div",51),s.Qb(61,"button",41),s.Zb("click",(function(){s.rc(e);const i=s.pc(51);return t.toogleModal(i)})),s.zc(62,"Cancelar"),s.Pb(),s.Pb(),s.Pb(),s.Pb()}2&e&&(s.zb(4),s.ic("disabled",t.isSubmitting),s.zb(1),s.ic("ngIf",t.updatingForm),s.zb(6),s.ic("form",t.originalForm),s.zb(8),s.ic("ngIf",0===t.currentStep),s.zb(1),s.ic("ngIf",0!==t.currentStep),s.zb(2),s.ic("ngIf",0===t.currentStep),s.zb(1),s.ic("ngStyle",s.lc(21,X,0!==t.currentStep?"block":"none")),s.zb(1),s.ic("ngForOf",t.fields),s.zb(1),s.ic("ngIf",t.currentStep===t.form.fields.length+1),s.zb(1),s.ic("ngIf",0===t.currentStep),s.zb(1),s.ic("ngIf",0!==t.currentStep),s.zb(1),s.ic("ngClass",s.lc(23,G,"plain"===t.form.documentType)),s.zb(1),s.ic("ngIf","plain"===t.form.documentType),s.zb(1),s.ic("ngIf","office"===t.form.documentType),s.zb(6),s.ic("ngIf",t.originalForm.commentsEnabled),s.zb(2),s.ic("ngIf",!t.originalForm.commentsEnabled),s.zb(8),s.ic("innerHTML",t.form.indications,s.sc),s.zb(10),s.ic("ngIf","office"===t.form.documentType),s.zb(1),s.ic("ngIf","office"===t.form.documentType),s.zb(1),s.ic("ngIf","plain"===t.form.documentType),s.zb(1),s.ic("ngIf","plain"===t.form.documentType))},directives:[o.t,l.a,o.w,o.s,o.q,n.e,d.a,f.a,m.a,b.a],pipes:[o.f],encapsulation:2}),e})();var Y=i("lJxs"),ee=i("JIr8");let te=(()=>{class e{constructor(e,t,i){this.formService=e,this.router=t,this.userService=i}resolve(e,t){return e.url.toString().includes("edit")?this.formService.get(e.params.slug).pipe(Object(Y.a)(t=>{if(this.userService.getCurrentUser().username===t.filledBy.username)return e.data={form:t},t;this.router.navigateByUrl("/")}),Object(ee.a)(e=>this.router.navigateByUrl("/"))):this.formService.getWithView(e.params.slug).pipe(Object(Y.a)(e=>e),Object(ee.a)(e=>this.router.navigateByUrl("/")))}}return e.\u0275fac=function(t){return new(t||e)(s.Vb(c.k),s.Vb(n.d),s.Vb(c.u))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac}),e})();const ie=[{path:":slug",component:K,resolve:{form:te}},{path:"edit",component:K,canActivate:[c.a]},{path:"edit/:slug",component:K,canActivate:[c.a],resolve:{form:te}}];let oe=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[n.h.forChild(ie)],n.h]}),e})(),re=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[te],imports:[[o.c,r.a,oe]]}),e})()}}]);