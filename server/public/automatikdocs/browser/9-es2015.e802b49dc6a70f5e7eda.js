(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Bm9x:function(i,e,t){"use strict";t.r(e),t.d(e,"MyFormsModule",(function(){return y}));var s=t("ofXK"),r=t("M0ag"),l=t("tyNb"),o=t("ey9i"),n=t("fXoL"),c=t("5eHb"),a=t("zoH9");const b=["subMenu"],u=function(i){return["/create-form/edit",i]};function d(i,e){if(1&i){const i=n.Rb();n.Qb(0,"tr"),n.Qb(1,"td",14),n.Qb(2,"a",15),n.zc(3),n.Pb(),n.Pb(),n.Qb(4,"td",16),n.Qb(5,"label",17),n.Qb(6,"input",18),n.Zb("change",(function(t){n.rc(i);const s=e.$implicit;return n.dc().updateForm(t,s)})),n.Pb(),n.Qb(7,"span"),n.zc(8,"Activo"),n.Pb(),n.Pb(),n.Pb(),n.Qb(9,"td",19),n.Qb(10,"label",17),n.Qb(11,"input",20),n.Zb("change",(function(t){n.rc(i);const s=e.$implicit;return n.dc().updateForm(t,s)})),n.Pb(),n.Qb(12,"span"),n.zc(13,"P\xfablico"),n.Pb(),n.Pb(),n.Pb(),n.Qb(14,"td",21),n.Qb(15,"label",17),n.Qb(16,"input",22),n.Zb("change",(function(t){n.rc(i);const s=e.$implicit;return n.dc().updateForm(t,s)})),n.Pb(),n.Qb(17,"span"),n.zc(18,"Comentarios"),n.Pb(),n.Pb(),n.Pb(),n.Qb(19,"td",23),n.zc(20),n.Pb(),n.Qb(21,"td",24),n.zc(22),n.Pb(),n.Qb(23,"td",25),n.zc(24),n.ec(25,"date"),n.Pb(),n.Qb(26,"td",26),n.Zb("click",(function(){n.rc(i);const t=e.$implicit;return n.dc().deleteForm(t)})),n.Mb(27,"span",27),n.Pb(),n.Pb()}if(2&i){const i=e.$implicit;n.zb(2),n.ic("routerLink",n.lc(20,u,i.slug)),n.zb(1),n.Ac(i.title),n.zb(2),n.jc("for",i.slug+"status"),n.zb(1),n.jc("name",i.slug+"status"),n.jc("id",i.slug+"status"),n.ic("checked",i.enabled),n.zb(4),n.jc("for",i.slug+"visible"),n.zb(1),n.jc("name",i.slug+"visible"),n.jc("id",i.slug+"visible"),n.ic("checked",i.public),n.zb(4),n.jc("for",i.slug+"commnents"),n.zb(1),n.jc("name",i.slug+"commnents"),n.jc("id",i.slug+"commnents"),n.ic("checked",i.commentsEnabled),n.zb(4),n.Ac(i.likesCount),n.zb(2),n.Ac(i.viewsCount),n.zb(2),n.Ac(n.fc(25,17,i.updatedAt,"dd/MM/yyyy"))}}function h(i,e){if(1&i){const i=n.Rb();n.Qb(0,"span",28),n.Qb(1,"button",29),n.Zb("click",(function(){return n.rc(i),n.dc().moreForms()})),n.zc(2,"Cargar m\xe1s"),n.Pb(),n.Pb()}}function m(i,e){1&i&&(n.Qb(0,"div",30),n.Qb(1,"h2"),n.zc(2,"- No more forms to load -"),n.Pb(),n.Pb())}const f=function(i){return["/fill-form/edit",i]};function g(i,e){if(1&i){const i=n.Rb();n.Qb(0,"tr"),n.Qb(1,"td",14),n.Qb(2,"a",15),n.zc(3),n.Pb(),n.Pb(),n.Qb(4,"td",26),n.Zb("click",(function(){n.rc(i);const t=e.$implicit;return n.dc().deleteFilled(t)})),n.Mb(5,"span",27),n.Pb(),n.Pb()}if(2&i){const i=e.$implicit;n.zb(2),n.ic("routerLink",n.lc(2,f,i.slug)),n.zb(1),n.Bc(" ",i.title," ")}}function F(i,e){1&i&&(n.Qb(0,"div",30),n.Qb(1,"h2"),n.zc(2,"- No more forms to load -"),n.Pb(),n.Pb())}function Q(i,e){if(1&i){const i=n.Rb();n.Qb(0,"span",28),n.Qb(1,"button",29),n.Zb("click",(function(){return n.rc(i),n.dc().moreFormsFilled()})),n.zc(2,"Cargar m\xe1s"),n.Pb(),n.Pb()}}const p=[{path:"",component:(()=>{class i{constructor(i,e,t,s,r,l){this.userService=i,this.searchService=e,this.formService=t,this.toastr=s,this.commonsService=r,this.route=l,this.listConfig=new o.j,this.loadingQuery=!1,this.results=[],this.limit=20,this.currentPage=1,this.noMoreForms=!1,this.isDeleting=!1,this.listConfigFilled=new o.j,this.loadingQueryFilled=!1,this.resultsFilled=[],this.limitFilled=20,this.currentPageFilled=1,this.noMoreFormsFilled=!1}ngOnInit(){this.route.snapshot.data.initedInServer?this.userService.isAuthenticated.subscribe(i=>{this.initialValue()}):this.initialValue()}initialValue(){this.user=this.userService.getCurrentUser(),this.loadingQuery=!0,this.listConfig.orderBy="Date",this.setListTo(),this.searchService.search(this.listConfig).subscribe(i=>{this.loadingQuery=!1,this.results=i}),this.loadingQueryFilled=!0,this.listConfigFilled.orderBy="Date",this.setListToFilled(),this.searchService.search(this.listConfigFilled).subscribe(i=>{this.loadingQueryFilled=!1,this.resultsFilled=i})}setListTo(){this.listConfig={limit:this.limit,orderBy:"Date",offset:this.limit*(this.currentPage-1),query:"",author:this.user.username}}setListToFilled(){this.listConfigFilled={type:"Filled",limit:this.limit,orderBy:"Date",offset:this.limit*(this.currentPage-1),query:"",filledBy:this.user.username}}moreForms(){this.loadingQuery=!0,this.setPageTo(),this.limit&&(this.listConfig.limit=this.limit,this.listConfig.offset=this.limit*(this.currentPage-1)),this.searchService.search(this.listConfig).subscribe(i=>{0!==i.length?this.results=this.results.concat(i):this.noMoreForms=!0,this.loadingQuery=!1})}moreFormsFilled(){this.loadingQueryFilled=!0,this.setPageToFilled(),this.limitFilled&&(this.listConfigFilled.limit=this.limit,this.listConfigFilled.offset=this.limitFilled*(this.currentPageFilled-1)),this.searchService.search(this.listConfigFilled).subscribe(i=>{0!==i.length?this.resultsFilled=this.resultsFilled.concat(i):this.noMoreFormsFilled=!0,this.loadingQueryFilled=!1})}setPageTo(){this.currentPage+=1}setPageToFilled(){this.currentPageFilled+=1}setOrder(i){this.loadingQuery=!0,this.listConfig.offset=0,this.currentPage=1,this.results=[],this.noMoreForms=!1,this.listConfig.orderBy=i,this.searchService.search(this.listConfig).subscribe(i=>{this.loadingQuery=!1,this.results=i})}setOrderFilled(i){this.loadingQueryFilled=!0,this.listConfigFilled.offset=0,this.currentPageFilled=1,this.resultsFilled=[],this.noMoreFormsFilled=!1,this.listConfigFilled.orderBy=i,this.searchService.search(this.listConfigFilled).subscribe(i=>{this.loadingQueryFilled=!1,this.resultsFilled=i})}deleteForm(i){confirm("\xbfSeguro que deseas eliminar el formulario?")&&(this.isDeleting=!0,this.formService.destroy(i.slug).subscribe(e=>{this.toastr.success("Deleted",i.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.results=this.results.filter(e=>e!==i)}))}deleteFilled(i){confirm("\xbfSeguro que deseas eliminar el formulario?")&&(this.isDeleting=!0,this.formService.destroy(i.slug).subscribe(e=>{this.toastr.success("Eliminado",i.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"}),this.resultsFilled=this.resultsFilled.filter(e=>e!==i)}))}updateForm(i,e){e[i.srcElement.value]=i.srcElement.checked,this.formService.save(e).subscribe(i=>{this.toastr.success("Actualizado",i.title,{positionClass:"toast-bottom-right",progressBar:!0,progressAnimation:"decreasing"})})}topMenuNav(i){this.commonsService.subMenuNav(i,this.subMenu.nativeElement)}}return i.\u0275fac=function(e){return new(e||i)(n.Lb(o.v),n.Lb(o.q),n.Lb(o.k),n.Lb(c.b),n.Lb(o.e),n.Lb(l.a))},i.\u0275cmp=n.Fb({type:i,selectors:[["app-my-forms"]],viewQuery:function(i,e){var t;1&i&&n.Dc(b,!0),2&i&&n.oc(t=n.ac())&&(e.subMenu=t.first)},decls:44,vars:10,consts:[[1,"sub-menu"],["subMenu",""],[1,"sub-menu__container"],[1,"sub-menu__nav","sub-menu__nav--my-forms",3,"click"],["data-toogle","created-forms",1,"sub-menu__nav__button","sub-menu__nav__button--my-forms","sub-menu__nav__button--current"],["data-toogle","filled-forms",1,"sub-menu__nav__button","sub-menu__nav__button--my-forms"],["id","created-forms"],[1,"table"],[4,"ngFor","ngForOf"],[1,"loader"],["class","load-more-my-forms w-100 d-flex-and-center",4,"ngIf"],["class","noMoreForms",4,"ngIf"],["id","filled-forms",2,"display","none"],[1,"table","table--filled-forms"],["data-column","Formulario"],[1,"form-link",3,"routerLink"],["data-column","Status"],[1,"select-my-forms",3,"for"],["type","checkbox","value","status",1,"filled-in",3,"name","id","checked","change"],["data-column","Visibilidad"],["type","checkbox","value","public",1,"filled-in",3,"name","id","checked","change"],["data-column","Comentarios"],["type","checkbox","value","commentsEnabled",1,"filled-in",3,"name","id","checked","change"],["data-column","Likes"],["data-column","Visualizaciones"],["data-column","Actualizado"],["data-column","Eliminar",3,"click"],[1,"icon","icon-trash-alt-regular","delete"],[1,"load-more-my-forms","w-100","d-flex-and-center"],[1,"button-filled",3,"click"],[1,"noMoreForms"]],template:function(i,e){1&i&&(n.Qb(0,"div",0,1),n.Qb(2,"div",2),n.Qb(3,"ul",3),n.Zb("click",(function(i){return e.topMenuNav(i)})),n.Qb(4,"li",4),n.zc(5," Creados "),n.Pb(),n.Qb(6,"li",5),n.zc(7," Rellenados "),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(8,"div",6),n.Qb(9,"table",7),n.Qb(10,"thead"),n.Qb(11,"tr"),n.Qb(12,"th"),n.zc(13,"Formulario"),n.Pb(),n.Qb(14,"th"),n.zc(15,"Status"),n.Pb(),n.Qb(16,"th"),n.zc(17,"Visibilidad"),n.Pb(),n.Qb(18,"th"),n.zc(19,"Comentarios"),n.Pb(),n.Qb(20,"th"),n.zc(21,"Likes"),n.Pb(),n.Qb(22,"th"),n.zc(23,"Visualizaciones"),n.Pb(),n.Qb(24,"th"),n.zc(25,"Actualizado"),n.Pb(),n.Mb(26,"th"),n.Pb(),n.Pb(),n.Qb(27,"tbody"),n.yc(28,d,28,22,"tr",8),n.Pb(),n.Pb(),n.Mb(29,"app-loading-spinner",9),n.yc(30,h,3,0,"span",10),n.yc(31,m,3,0,"div",11),n.Pb(),n.Qb(32,"div",12),n.Qb(33,"table",13),n.Qb(34,"thead"),n.Qb(35,"tr"),n.Qb(36,"th"),n.zc(37,"Formulario"),n.Pb(),n.Mb(38,"th"),n.Pb(),n.Pb(),n.Qb(39,"tbody"),n.yc(40,g,6,4,"tr",8),n.Pb(),n.Pb(),n.Mb(41,"app-loading-spinner",9),n.yc(42,F,3,0,"div",11),n.yc(43,Q,3,0,"span",10),n.Pb()),2&i&&(n.zb(28),n.ic("ngForOf",e.results),n.zb(1),n.xc("display",e.loadingQuery?"flex":"none"),n.zb(1),n.ic("ngIf",!1===e.noMoreForms),n.zb(1),n.ic("ngIf",!0===e.noMoreForms),n.zb(9),n.ic("ngForOf",e.resultsFilled),n.zb(1),n.xc("display",e.loadingQuery?"flex":"none"),n.zb(1),n.ic("ngIf",!0===e.noMoreFormsFilled),n.zb(1),n.ic("ngIf",!1===e.noMoreFormsFilled))},directives:[s.s,a.a,s.t,l.g],pipes:[s.f],encapsulation:2}),i})(),resolve:{initedInServer:o.b}}];let P=(()=>{class i{}return i.\u0275mod=n.Jb({type:i}),i.\u0275inj=n.Ib({factory:function(e){return new(e||i)},imports:[[l.h.forChild(p)],l.h]}),i})(),y=(()=>{class i{}return i.\u0275mod=n.Jb({type:i}),i.\u0275inj=n.Ib({factory:function(e){return new(e||i)},imports:[[s.c,P,r.a]]}),i})()}}]);