{"version":3,"sources":["webpack:///./src/app/modules/search/search-routing.module.ts","webpack:///./src/app/modules/search/search-transaction/search-transaction.component.html","webpack:///./src/app/modules/search/search-transaction/search-transaction.component.ts","webpack:///./src/app/modules/search/search.component.html","webpack:///./src/app/modules/search/search.component.ts","webpack:///./src/app/modules/search/search.module.ts"],"names":[],"mappings":"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","file":"modules-search-search-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { SearchComponent } from './search.component';\nimport { SearchTransactionComponent } from './search-transaction/search-transaction.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchComponent,\n  },\n  {\n    path: 'user-forms',\n    component: SearchComponent,\n  },\n  {\n    path: 'search-transaction',\n    component: SearchTransactionComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SearchRoutingModule { }\n","module.exports = \"<div class=\\\"search-transaction\\\" #searchTransactionDiv>\\n  <div class=\\\"search-transaction__container\\\">\\n      <label for=\\\"transactionId\\\"></label>\\n      <input type=\\\"text\\\" name=\\\"transactionId\\\" id=\\\"transactionId\\\" placeholder=\\\"Transaction Id\\\" \\n      [(ngModel)]=\\\"transactionId\\\" (keyup.enter)=\\\"findTransaction()\\\" #transactionIdInput>\\n      <input type=\\\"submit\\\" value=\\\"Find\\\" (click)=\\\"findTransaction()\\\">\\n      <label class=\\\"search-transaction__container__message\\\">Type in the transaction id you got when you finished the form. Check you email.</label>\\n  </div>\\n</div>\"","import { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\nimport { FormService, CommonsService } from '../../../core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-search-transaction',\n  templateUrl: './search-transaction.component.html'\n})\nexport class SearchTransactionComponent implements OnInit, OnDestroy {\n\n  @ViewChild('searchTransactionDiv') searchTransactionDiv: ElementRef;\n  @ViewChild('transactionIdInput') transactionIdInput: ElementRef;\n  public transactionId: string;\n\n  constructor(\n    private formService: FormService,\n    private commonsService: CommonsService,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    window.addEventListener('resize', this.resizeDiv.bind(this));\n    this.resizeDiv();\n  }\n\n  ngOnDestroy() {\n    window.removeEventListener('resize', this.resizeDiv.bind(this));\n  }\n\n  resizeDiv() {\n    const menuHeight: number = document.querySelector('.nav').clientHeight;\n    this.searchTransactionDiv.nativeElement.style.height = (window.innerHeight - menuHeight) + 'px';\n  }\n\n  findTransaction() {\n    // pt0y2tta\n    this.formService.getPaidCertifiedForm(this.transactionId).subscribe((data: any) => {\n      if (data.certifiedForm) {\n        this.router.navigate([('/certified-forms/' + data.certifiedForm.id)], { queryParams: { transactionId: this.transactionId } });\n        this.commonsService.toastMessage('success', 'Transaction found', 'Transaction found');\n      } else if (data.transactionNotFound) {\n        this.transactionIdInput.nativeElement.style.borderBottom = '3px solid #C44D58';\n        this.commonsService.toastMessage('error', 'Transaction Id does not exist', 'Transaction id not found');\n      } else if (data.formExpired) {\n        this.transactionIdInput.nativeElement.style.borderBottom = '3px solid #C44D58';\n        this.commonsService.toastMessage('error', 'The period of 30 days to change the document has expired', 'Transaction expired');\n      }\n    });\n  }\n}\n","module.exports = \"<div class=\\\"sub-menu\\\" #subMenu>\\n    <div class=\\\"sub-menu__container sub-menu__container--search-page\\\">\\n        <ul class=\\\"sub-menu__nav sub-menu__nav--search-page\\\" (click)=\\\"topMenuNav($event)\\\">\\n            <li class=\\\"sub-menu__nav__button sub-menu__nav__button--search-page sub-menu__nav__button--current\\\" data-toogle=\\\"lawyer-forms\\\" (click)=\\\"setUrl(false)\\\">\\n                Creados por abogados\\n            </li>\\n            <li class=\\\"sub-menu__nav__button sub-menu__nav__button--search-page\\\" data-toogle=\\\"user-forms\\\" (click)=\\\"setUrl(true)\\\" #userFormsTab>\\n                Creados por otros usuarios\\n            </li>\\n        </ul>\\n    </div>\\n</div>\\n\\n<div id=\\\"lawyer-forms\\\" class=\\\"lawyer-forms sub-menu-target\\\" >\\n    <div class=\\\"lawyer-forms__container\\\">\\n        <div class=\\\"lawyer-forms__header\\\">\\n            <div class=\\\"lawyer-forms__top-right-link\\\">\\n                <span>\\n                    <a routerLink=\\\"/search/search-transaction\\\">\\n                        Find form by transaction id\\n                    </a>\\n                    <span class=\\\"icon icon-search\\\"></span>\\n                </span>\\n                <span>\\n                    <a routerLink=\\\"/create-form\\\" *appShowAuthed=\\\"true\\\">\\n                        Create my own form\\n                    </a>\\n                    <a routerLink=\\\"/auth/login\\\" *appShowAuthed=\\\"false\\\">\\n                        Create my own form\\n                    </a>\\n                    <span class=\\\"icon icon-link-solid\\\"></span>\\n                </span>\\n            </div>\\n            <div class=\\\"lawyer-forms__title\\\">\\n                <h1>Documentos creados por nuestros abogados</h1>\\n                <p>Mientras rellena un formulario podrá ver, en tiempo real, como un documento redactado por abogados es generado para su posterior descarga.</p>\\n            </div>\\n        </div>\\n        <div class=\\\"lawyer-forms__blocks-container\\\">\\n            <div class=\\\"lawyer-forms__block\\\">\\n                <div class=\\\"lawyer-forms__block__title\\\">\\n                    <span class=\\\"icon icon-building-solid\\\"></span>\\n                    <h2>Empresa</h2>\\n                </div>\\n                <!-- Tree copied from https://gist.github.com/dylancwood/7368914 -->\\n                <div class=\\\"tree-container\\\">\\n                    <ul class=\\\"tree\\\">\\n                        <li>\\n                            <a [routerLink]=\\\"['/certified-forms/pacto-de-socios']\\\">Pacto de socios</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Prestación de servicios</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Compraventa mercantil</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Tratamiento de datos de carácter personal</a>\\n                        </li>\\n                        <li class=\\\"last\\\">\\n                            <a href=\\\"#\\\">Constitución de Sociedad Civil</a>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n            <div class=\\\"lawyer-forms__block\\\">\\n                <div class=\\\"lawyer-forms__block__title\\\">\\n                    <span class=\\\"icon icon-briefcase-solid\\\"></span>\\n                    <h2>Laboral</h2>\\n                </div>\\n                <!-- Tree copied from https://gist.github.com/dylancwood/7368914 -->\\n                <div class=\\\"tree-container\\\">\\n                    <ul class=\\\"tree\\\">\\n                        <li>\\n                            <a href=\\\"#\\\">Contrato para empleado doméstico</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Contrato de trabajo para comercial</a>\\n                        </li>\\n                        <li class=\\\"last\\\">\\n                            <a href=\\\"#\\\">Contrato de trabajo de alta dirección</a>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n            <div class=\\\"lawyer-forms__block\\\">\\n                <div class=\\\"lawyer-forms__block__title\\\">\\n                    <span class=\\\"icon icon-home-solid\\\"></span>\\n                    <h2>Laboral</h2>\\n                </div>\\n                <!-- Tree copied from https://gist.github.com/dylancwood/7368914 -->\\n                <div class=\\\"tree-container\\\">\\n                    <ul class=\\\"tree\\\">\\n                        <li>\\n                            <a href=\\\"#\\\">Alquiler de vivienda de corta duración</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Alquiler de vivienda con opción a compra</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Alquiler de Habitación</a>\\n                        </li>\\n                        <li class=\\\"last\\\">\\n                            <a href=\\\"#\\\">Alquiler de plaza de garaje</a>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n            <div class=\\\"lawyer-forms__block\\\">\\n                <div class=\\\"lawyer-forms__block__title\\\">\\n                    <span class=\\\"icon icon-store-alt-solid\\\"></span>\\n                    <h2>Compraventa</h2>\\n                </div>\\n                <!-- Tree copied from https://gist.github.com/dylancwood/7368914 -->\\n                <div class=\\\"tree-container\\\">\\n                    <ul class=\\\"tree\\\">\\n                        <li>\\n                            <a href=\\\"#\\\">Contrato de compraventa de vivienda</a>\\n                        </li>\\n                        <li class=\\\"last\\\">\\n                            <a [routerLink]=\\\"['/certified-forms/contrato-arras-penitenciales']\\\">Arras penitenciales</a>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n            <div class=\\\"lawyer-forms__block\\\">\\n                <div class=\\\"lawyer-forms__block__title\\\">\\n                    <span class=\\\"icon icon-window-maximize-regular\\\"></span>\\n                    <h2>Internet</h2>\\n                </div>\\n                <!-- Tree copied from https://gist.github.com/dylancwood/7368914 -->\\n                <div class=\\\"tree-container\\\">\\n                    <ul class=\\\"tree\\\">\\n                        <li>\\n                            <a href=\\\"#\\\">Condiciones de uso de Aplicación Móvil</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Política de cookies</a>\\n                        </li>\\n                        <li>\\n                            <a href=\\\"#\\\">Condiciones de uso de Tienda Online</a>\\n                        </li>\\n                        <li class=\\\"last\\\">\\n                            <a href=\\\"#\\\">Condiciones de uso de Página Web</a>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div id=\\\"user-forms\\\" class=\\\"search\\\" style=\\\"display: none\\\">\\n    <div class=\\\"search__container\\\">\\n        <div class=\\\"search__button\\\">\\n            <input type=\\\"text\\\" (keyup.enter)=\\\"search(input.value)\\\" #input>\\n        </div>\\n        <div class=\\\"search__orderby\\\">\\n            <div class=\\\"search__orderby__container\\\">\\n                <label for=\\\"orderby\\\">Order by: </label>\\n                <select id=\\\"orderby\\\" autofocus=\\\"true\\\" (change)=\\\"setOrder($event.target.value)\\\">\\n                    <option value=\\\"Date\\\">Date</option>\\n                    <option value=\\\"Like\\\">Likes</option>\\n                </select>\\n            </div>\\n        </div>\\n        <div class=\\\"search__results\\\">\\n            <div class=\\\"search__results__container\\\">\\n\\n                <div class=\\\"search__results__result\\\" *ngFor=\\\"let form of results\\\">\\n                    <div class=\\\"search__results__result__document\\\" [routerLink]=\\\"['/fill-form', form.slug]\\\">\\n                        <div class=\\\"search__results__result__document__container\\\">\\n                            <div class=\\\"search__results__result__document__container__date\\\">\\n                                <span>{{form.updatedAt | date: 'dd/MM/yyyy'}}</span>\\n                            </div>\\n                            <div class=\\\"search__results__result__document__container__title\\\">\\n                                <span>{{ form.title }}</span>\\n                            </div>\\n                            <div class=\\\"search__results__result__document__container__description\\\">\\n                                <span>{{ form.description.substring(0, 136) }}</span>\\n                            </div>\\n                            <div class=\\\"search__results__result__document__container__likes-views\\\">\\n                                <div class=\\\"search__results__result__document__container__likes-views__likes\\\">\\n                                    <span class=\\\"icon icon-like-button\\\"></span>\\n                                    <span>{{ form.likesCount }}</span>\\n                                </div>\\n                                <div class=\\\"search__results__result__document__container__likes-views__views\\\">\\n                                    <span class=\\\"icon icon-eye-solid\\\"></span>\\n                                    <span>{{ form.viewsCount }}</span>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"search__results__result__more-info\\\">\\n                        <div class=\\\"search__results__result__more-info__author\\\">\\n                            <img src=\\\"{{\\n                                !form.author.image ? 'assets/images/avatar.jpeg' : form.author.image\\n                            }}\\\" alt=\\\"avatar\\\">\\n                            <span [routerLink]=\\\"['/profile', form.author.username]\\\">{{ form.author.username }}</span>\\n                        </div>\\n                        <div class=\\\"search__results__result__more-info__tags\\\">\\n                            <span>\\n                                <span *ngFor=\\\"let tag of form.tags; let i = index\\\">{{tag}}<span *ngIf=\\\"form.tags.length !== i + 1\\\">, </span>\\n\\n                                </span>\\n                            </span>\\n                        </div>\\n                    </div>\\n                </div>\\n\\n            </div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"loader\\\" [style.display]=\\\"loadingQuery ? 'flex' : 'none'\\\">\\n        <svg version=\\\"1.1\\\" id=\\\"loader-1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n            width=\\\"80px\\\" height=\\\"80px\\\" viewBox=\\\"0 0 50 50\\\" style=\\\"enable-background:new 0 0 50 50;\\\" xml:space=\\\"preserve\\\">\\n        <path fill=\\\"#000\\\" d=\\\"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z\\\">\\n            <animateTransform attributeType=\\\"xml\\\"\\n            attributeName=\\\"transform\\\"\\n            type=\\\"rotate\\\"\\n            from=\\\"0 25 25\\\"\\n            to=\\\"360 25 25\\\"\\n            dur=\\\"0.6s\\\"\\n            repeatCount=\\\"indefinite\\\"/>\\n            </path>\\n        </svg>\\n    </div>\\n    \\n    <div class=\\\"noMoreForms\\\" *ngIf=\\\"noMoreForms === true\\\">\\n        <h2>- No more forms to load -</h2>\\n    </div>\\n</div>\"","import { Component, OnInit, HostListener, ElementRef, ViewChild } from '@angular/core';\nimport {\n  FormListConfig,\n  Form,\n  SearchService,\n  CommonsService,\n  UserService,\n  User\n} from '../../core';\nimport { Location } from '@angular/common';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html'\n})\nexport class SearchComponent implements OnInit {\n\n  @ViewChild('subMenu') subMenu: ElementRef;\n  @ViewChild('userFormsTab') userFormsTab: ElementRef;\n\n  public isAuthenticated: boolean;\n  public currentUser: String;\n  public listConfig: FormListConfig = new FormListConfig();\n  public loadingQuery = false;\n  public results: Array<any> = [];\n  public limit: number = 10;\n  public currentPage: number = 1;\n  public noMoreForms: boolean = false;\n\n  constructor(\n    private userService: UserService,\n    private searchService: SearchService,\n    private commonsService: CommonsService,\n    private location: Location\n  ) { }\n\n  ngOnInit() {\n    this.loadingQuery = true;\n    this.listConfig.orderBy = 'Date';\n    this.userService.isAuthenticated.subscribe(\n      (authenticated) => {\n        this.isAuthenticated = authenticated;\n          this.setListTo('all');\n          // Load the current user's data\n          this.userService.currentUser.subscribe(\n          (user: User) => {\n            this.currentUser = user.username;\n          });\n          this.searchService.search(this.listConfig)\n          .subscribe(forms => {\n             this.loadingQuery = false;\n             this.results = forms;\n         });\n      }\n    );\n\n    if (window.location.pathname === '/search/user-forms') {\n      this.userFormsTab.nativeElement.click();\n    }\n  }\n\n  setListTo(type: string = '') {\n    // Takes all forms\n    this.listConfig = {\n      type: type,\n      limit: this.limit,\n      orderBy: 'Date',\n      offset: (this.limit * (this.currentPage - 1)),\n      query: '',\n    };\n  }\n\n  setVisibilityOfFooter(visible: boolean) {\n    document.getElementsByTagName('footer')[0].hidden = visible;\n  }\n\n  moreForms() {\n    this.loadingQuery = true;\n    this.setPageTo();\n    // Create limit and offset filter (if necessary)\n    if (this.limit) {\n      this.listConfig.limit = this.limit;\n      this.listConfig.offset =  (this.limit * (this.currentPage - 1));\n    }\n    this.searchService.search(this.listConfig).subscribe(forms => {\n      if (forms.length !== 0) {\n        this.results = this.results.concat(forms);\n        this.setVisibilityOfFooter(true);\n      } else {\n        this.noMoreForms = true;\n        this.setVisibilityOfFooter(false);\n      }\n       this.loadingQuery = false;\n   });\n  }\n\n  @HostListener('window:scroll', []) onScroll(): void {\n    if (!this.loadingQuery && this.noMoreForms === false) {\n      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n        this.moreForms();\n      }\n    }\n  }\n\n  search(inputSearch: any) {\n    this.loadingQuery = true;\n    this.listConfig.offset = 0;\n    this.currentPage = 1;\n    this.results = [];\n    this.noMoreForms = false;\n    this.listConfig.query = inputSearch;\n    this.searchService.search(this.listConfig)\n      .subscribe(forms => {\n          this.loadingQuery = false;\n          this.results = forms;\n        });\n    }\n\n  setPageTo() {\n    this.currentPage += 1;\n  }\n\n  setOrder(order: string) {\n    this.loadingQuery = true;\n    this.listConfig.offset = 0;\n    this.currentPage = 1;\n    this.results = [];\n    this.noMoreForms = false;\n    this.listConfig.orderBy = order;\n    this.searchService.search(this.listConfig).subscribe(forms => {\n        this.loadingQuery = false;\n        this.results = forms;\n      });\n    }\n\n  topMenuNav(e: any) {\n    this.commonsService.subMenuNav(e, this.subMenu.nativeElement);\n  }\n\n  setUrl(userForms: boolean) {\n    if (userForms) {\n      this.location.replaceState('/search/user-forms');\n    } else {\n      this.location.replaceState('/search');\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from '../../shared';\n\nimport { SearchRoutingModule } from './search-routing.module';\nimport { SearchComponent } from './search.component';\nimport { SearchTransactionComponent } from './search-transaction/search-transaction.component';\n\n@NgModule({\n  declarations: [SearchComponent, SearchTransactionComponent],\n  imports: [\n    CommonModule,\n    SearchRoutingModule,\n    SharedModule\n  ]\n})\nexport class SearchModule { }\n"],"sourceRoot":""}