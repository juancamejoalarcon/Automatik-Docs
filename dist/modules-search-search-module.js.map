{"version":3,"sources":["webpack:///./src/app/modules/search/search-routing.module.ts","webpack:///./src/app/modules/search/search.component.html","webpack:///./src/app/modules/search/search.component.ts","webpack:///./src/app/modules/search/search.module.ts"],"names":[],"mappings":"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","file":"modules-search-search-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { SearchComponent } from './search.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SearchRoutingModule { }\n","module.exports = \"<section id=\\\"search\\\">\\n  <div class=\\\"search-container\\\">\\n      <div class=\\\"search-button\\\">\\n          <input type=\\\"text\\\" (keyup.enter)=\\\"search(input.value)\\\" #input>\\n      </div>\\n      <div class=\\\"orderby-search\\\">\\n          <div class=\\\"orderby-search-container\\\">\\n              <label for=\\\"orderby\\\">Order by: </label>\\n              <select id=\\\"orderby\\\" autofocus=\\\"true\\\" (change)=\\\"setOrder($event.target.value)\\\">\\n                  <option value=\\\"Date\\\">Date</option>\\n                  <option value=\\\"Likes\\\">Likes</option>\\n                  <option value=\\\"Views\\\">Views</option>\\n              </select>\\n          </div>\\n      </div>\\n      <div class=\\\"search-results\\\">\\n          <div class=\\\"search-results-container\\\">\\n\\n              <div class=\\\"result\\\" *ngFor=\\\"let form of results\\\">\\n                  <div class=\\\"document\\\">\\n                      <div class=\\\"document-container\\\">\\n                          <div class=\\\"date\\\">\\n                              <span>{{form.updatedAt | date: 'dd/MM/yyyy'}}</span>\\n                          </div>\\n                          <div class=\\\"title\\\">\\n                            <span [routerLink]=\\\"['/fill-form', form.slug]\\\">\\n                                {{ form.title }}\\n                            </span>\\n                          </div>\\n                          <div class=\\\"description\\\">\\n                              <span>{{ form.description.substring(0, 136) }}</span>\\n                          </div>\\n                          <div class=\\\"likes-views\\\">\\n                              <div class=\\\"likes\\\">\\n                                  <span class=\\\"icon icon-like-button\\\"></span>\\n                                  <span>{{ form.likesCount }}</span>\\n                              </div>\\n                              <div class=\\\"views\\\">\\n                                  <span class=\\\"icon icon-eye-solid\\\"></span>\\n                                  <span>{{ form.viewsCount }}</span>\\n                              </div>\\n                          </div>\\n                      </div>\\n                  </div>\\n                  <div class=\\\"more-info\\\">\\n                    <div class=\\\"author\\\">\\n                        <img src=\\\"{{\\n                            form.author.image === null ? 'assets/images/avatar.jpeg' : form.author.image\\n                        }}\\\" alt=\\\"avatar\\\">\\n                        <span class=\\\"profile-link\\\" [routerLink]=\\\"['/profile', form.author.username]\\\">\\n                            {{ form.author.username }}\\n                        </span>\\n                    </div>\\n                  </div>\\n              </div>\\n              \\n\\n          </div>\\n      </div>\\n  </div>\\n</section>\\n\\n<!--Div is shown when there no author forms-->\\n<!-- <div [hidden]=\\\"loading || results.length\\\">No Forms are here... yet.</div> -->\\n\\n<div class=\\\"loader\\\" [style.display]=\\\"loadingQuery ? 'flex' : 'none'\\\">\\n    <svg version=\\\"1.1\\\" id=\\\"loader-1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n      width=\\\"80px\\\" height=\\\"80px\\\" viewBox=\\\"0 0 50 50\\\" style=\\\"enable-background:new 0 0 50 50;\\\" xml:space=\\\"preserve\\\">\\n   <path fill=\\\"#000\\\" d=\\\"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z\\\">\\n     <animateTransform attributeType=\\\"xml\\\"\\n       attributeName=\\\"transform\\\"\\n       type=\\\"rotate\\\"\\n       from=\\\"0 25 25\\\"\\n       to=\\\"360 25 25\\\"\\n       dur=\\\"0.6s\\\"\\n       repeatCount=\\\"indefinite\\\"/>\\n     </path>\\n   </svg>\\n</div>\\n\\n<div class=\\\"noMoreForms\\\" *ngIf=\\\"noMoreForms === true\\\">\\n    <h2>- No more forms to load -</h2>\\n</div>\"","import { Component, OnInit, HostListener } from '@angular/core';\nimport {\n  FormListConfig,\n  Form,\n  SearchService,\n  UserService,\n  User\n} from '../../core';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html'\n})\nexport class SearchComponent implements OnInit {\n\n  public isAuthenticated: boolean;\n  public currentUser: String;\n  public listConfig: FormListConfig = new FormListConfig();\n  public loadingQuery = false;\n  public results: Array<any> = [];\n  public limit: number = 10;\n  public currentPage: number = 1;\n  public noMoreForms: boolean = false;\n\n  constructor(\n    private userService: UserService,\n    private searchService: SearchService\n  ) { }\n\n  ngOnInit() {\n    this.loadingQuery = true;\n    this.listConfig.orderBy = 'Date';\n    this.userService.isAuthenticated.subscribe(\n      (authenticated) => {\n        this.isAuthenticated = authenticated;\n          this.setListTo('all');\n          // Load the current user's data\n          this.userService.currentUser.subscribe(\n          (user: User) => {\n            this.currentUser = user.username;\n          });\n          this.searchService.search(this.listConfig)\n          .subscribe(forms => {\n             this.loadingQuery = false;\n             this.results = forms;\n         });\n      }\n    );\n  }\n\n  setListTo(type: string = '') {\n    // Takes all forms\n    this.listConfig = {\n      type: type,\n      limit: this.limit,\n      orderBy: 'Date',\n      offset: (this.limit * (this.currentPage - 1)),\n      query: '',\n    };\n  }\n\n  moreForms() {\n    this.loadingQuery = true;\n    this.setPageTo();\n    // Create limit and offset filter (if necessary)\n    if (this.limit) {\n      this.listConfig.limit = this.limit;\n      this.listConfig.offset =  (this.limit * (this.currentPage - 1));\n    }\n    this.searchService.search(this.listConfig).subscribe(forms => {\n      if (forms.length !== 0) {\n        this.results = this.results.concat(forms);\n      } else {\n        this.noMoreForms = true;\n      }\n       this.loadingQuery = false;\n   });\n  }\n\n  @HostListener('window:scroll', []) onScroll(): void {\n    if (!this.loadingQuery && this.noMoreForms === false) {\n      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n        this.moreForms();\n      }\n    }\n  }\n\n  search(inputSearch: any) {\n    this.loadingQuery = true;\n    this.listConfig.offset = 0;\n    this.currentPage = 1;\n    this.results = [];\n    this.noMoreForms = false;\n    this.listConfig.query = inputSearch;\n    this.searchService.search(this.listConfig)\n      .subscribe(forms => {\n          this.loadingQuery = false;\n          this.results = forms;\n        });\n    }\n\n  setPageTo() {\n    this.currentPage += 1;\n  }\n\n  setOrder(order: string) {\n    this.loadingQuery = true;\n    this.listConfig.offset = 0;\n    this.currentPage = 1;\n    this.results = [];\n    this.noMoreForms = false;\n    this.listConfig.orderBy = order;\n    this.searchService.search(this.listConfig).subscribe(forms => {\n        this.loadingQuery = false;\n        this.results = forms;\n      });\n    }\n  }\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SearchRoutingModule } from './search-routing.module';\nimport { SearchComponent } from './search.component';\n\n@NgModule({\n  declarations: [SearchComponent],\n  imports: [\n    CommonModule,\n    SearchRoutingModule\n  ]\n})\nexport class SearchModule { }\n"],"sourceRoot":""}